(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{1419:function(e,t,n){"use strict";n.d(t,"a",function(){return A});var r=n(1),a=n(109),o=(n(1422),n(146)),i=n.n(o),c=(n(167),n(353)),l=n.n(c),s=(n(578),n(352)),u=n.n(s),m=(n(248),n(1377)),d=n.n(m),f=(n(1376),n(1371)),p=n.n(f),g=(n(1370),n(168)),y=n.n(g),b=(n(354),n(23)),h=n.n(b),v=(n(351),n(582)),E=n.n(v),I=(n(581),n(584)),N=n.n(I),w=(n(583),n(580)),M=n.n(w),C=(n(579),n(11)),S=n(16),j=n.n(S);function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function T(e,t){return!t||"object"!==k(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function z(e){return(z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function B(e,t){return(B=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var x=l.a.Option,D=u.a.Group,L=p.a.RangePicker,R=M.a.CheckableTag,P={SelectInput:function(e){var t=e.selectValue,n=e.inputValue,a=e.placeholder,o=e.options,i=e.onSelectChange,c=e.onInputChange,s=e.onPressEnter,m=e.selectStyle;return r.createElement(D,{compact:!0},r.createElement(l.a,{style:m?Object.assign({width:110},m):{width:110},value:t,onChange:i},o&&o.map(function(e,t){return r.createElement(x,{key:t,value:e.value},e.title)})),r.createElement(u.a,{style:{width:238},value:n,onChange:c,placeholder:a,onPressEnter:s}))},Select:function(e){var t=e.option,n=e.label,a=e.mode,o=e.onSearch,i=e.onSelect,c=e.onBlur,s=e.onFocus,u=e.value,m=e.placeholder,d=e.showSearch,f=e.width,p=e.filterOption,g=e.onChange,y=e.allowClear,b=e.onPopupScroll;return r.createElement(r.Fragment,null,n&&r.createElement("span",{className:"common-list-label"},"".concat(n,"：")),r.createElement("span",{className:"common-list-control"},r.createElement(l.a,{allowClear:y,value:u,mode:a||!1,style:{minWidth:f||258,width:f},showSearch:d,placeholder:m,filterOption:p,onSearch:o,onSelect:i,onChange:g,onBlur:c,onPopupScroll:b,onFocus:s},t.data.map(function(e){return r.createElement(x,{key:e[t.key]||e.id,value:e[t.value]||e.id,$data:e},e[t.title])}))))},DatePicker:function(e){var t=e.label,n=e.placeholder,a=e.onChange,o=e.value,i=e.style,c=e.format,l=e.showTime;return r.createElement(r.Fragment,null,t&&r.createElement("span",{className:"common-list-label"},"".concat(t,"：")),r.createElement("span",{className:"common-list-control"},r.createElement(p.a,{format:c||!1,style:i,showTime:l,placeholder:n,value:o,onChange:a})))},RangePicker:function(e){var t=e.label,n=e.alias,a=e.placeholder,o=e.onChange,c=e.value,l=e.showTime,s=e.format;return r.createElement(r.Fragment,null,t&&r.createElement("span",{className:"common-list-label"},"".concat(t,"：")),r.createElement("span",{className:"common-list-control"},r.createElement(L,{style:{width:400},showTime:l,format:s,placeholder:a,value:c,onChange:o}),r.createElement("span",{className:"common-list-control-date-alias"},!C.a.isEmpty(n)&&n.map(function(e,t){return r.createElement(i.a,{key:t,onClick:function(){return o([j()(Date.now()-864e5*e).startOf("day"),j()()])}},e," 天内")}))))},Input:function(e){var t=e.label,n=e.value,a=e.placeholder,o=e.onChange,i=e.width,c=e.onPressEnter;return r.createElement(r.Fragment,null,t&&r.createElement("span",{className:"common-list-label"},"".concat(t,"：")),r.createElement("span",{className:"common-list-control"},r.createElement(u.a,{style:{minWidth:i||258},value:n,onChange:o,placeholder:a,onPressEnter:c})))},Checkbox:function(e){var t=e.label,n=e.value,a=e.onChange;return r.createElement(y.a,{checked:n,onChange:a},t)},CheckableTag:function(e){var t=e.label,n=e.option,a=e.value,o=e.onChange;return r.createElement(r.Fragment,null,t&&r.createElement("span",{className:"common-list-label"},"".concat(t,"：")),r.createElement("span",{className:"common-list-control"},!C.a.isEmpty(n)&&n.map(function(e){return r.createElement(R,{key:e.value,checked:e.value===a,onChange:function(){o(e)}},e.title)})))},Label:function(e,t){var n=e.label;return r.createElement(r.Fragment,null,n&&r.createElement("span",{className:"common-list-label"},"".concat(n,"：")),r.createElement("span",{className:"common-list-control"},t))},Custom:function(e){return r.createElement("div",null,(void 0).props.children)}},A=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=T(this,z(t).apply(this,arguments))).state={collapse:!0},e.toggleCollapse=function(t){e.setState({collapse:!e.state.collapse})},e.renderSearcher=function(){var t=e.props.config,n=t.searcher,a=t.table,o=e.state.collapse;return n&&r.createElement("section",{className:"common-list-search"},e.renderWidgets(n.widgets),a&&a.tableHeader&&a.tableHeader(),r.createElement("div",{className:"common-list-search-right"},!n.hideSearcher&&r.createElement(r.Fragment,null,r.createElement(i.a,{type:"primary",onClick:n.onSearch},"查询"),r.createElement(i.a,{onClick:n.onReset},"重置")),n.collapseControl&&n.collapseControl.showMoreBtn&&r.createElement("span",{className:"common-list-serach-more"},r.createElement("a",{onClick:e.toggleCollapse},o?"更多":"收起"," ",r.createElement(h.a,{type:o?"down":"up"})))))},e.renderWidgets=function(t){var n=e.state.collapse,a=e.props.config.searcher;return t&&r.createElement("div",{className:"common-list-search-left"},t.map(function(t,o){return Array.isArray(t)?r.createElement("div",{key:o,className:"common-list-search-row",style:{display:a.collapseControl&&a.collapseControl.showMoreBtn&&n&&o>0?"none":"flex"}},t.map(function(t){return r.createElement("div",{key:t.label,className:"common-list-search-col",style:Object.assign({},t.style)},P[t.type]&&P[t.type](t,t.children?e.renderWidgets(t.children):null))})):r.createElement("div",{key:t.label,className:"common-list-search-row ".concat(t.className)},P[t.type]&&P[t.type](t,t.children?e.renderWidgets(t.children):null))}))},e.renderAddBtn=function(){var t=e.props.config,n=t.addBtn,a=t.searcher;return n&&r.createElement("section",{className:"common-list-addbtn",style:n.style},"function"==typeof n.title?r.createElement(n.title,null):n.title,r.createElement("div",{className:"common-list-search-batch"},a.batchControl.showBatchControl&&r.createElement(l.a,{placeholder:a.batchControl.placeholder,style:{minWidth:120},defaultValue:void 0,onChange:a.batchControl.onBatch},a.batchControl.options.map(function(e){return r.createElement(x,{key:e.value,value:e.value},e.title)}))))},e.renderTableHeader=function(){var t=e.props.config.tableHeader;return r.createElement("section",{className:"common-list-table-header"},t&&t())},e.renderTable=function(){var t=e.props.config.table,n=t.rowKey,a=t.rowSelection,o=t.columns,i=t.dataSource,c=t.pagination,l=t.onChange,s=t.loading,u=t.locale;return r.createElement("section",{className:"common-list-table"},r.createElement(d.a,{locale:u,rowKey:n||"id",rowSelection:a,columns:o,dataSource:i,loading:s,pagination:c,onChange:l}))},e.renderCards=function(){var t=e.props.config.cards,n=t.dataSource,a=t.loading,o=t.pagination,i=t.renderCard,c=t.addBtn;return r.createElement("div",{className:"common-list-cards-wrapper"},r.createElement("ul",{className:"common-list-cards"},a?r.createElement("div",{className:"common-list-cards-loading"},r.createElement(N.a,null)):r.createElement(r.Fragment,null,r.createElement("li",{className:"common-list-card add-btn"},r.createElement("div",{className:"common-list-card-item",onClick:c.onAddBtnClick},c.icon?r.createElement("img",{src:c.icon,alt:""}):r.createElement(h.a,{type:"plus-circle"}),r.createElement("p",null,c.title))),n.map(function(e){return r.createElement("li",{className:"common-list-card"},r.createElement("div",{className:"common-list-card-item"},i(e)))}))),r.createElement("section",{className:"common-list-cards-pagination"},r.createElement(E.a,Object.assign({},o))))},e}var n,o,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&B(e,t)}(t,a["a"]),n=t,(o=[{key:"render",value:function(){var e=this.props.config;return r.createElement("div",{className:"common-list"},this.renderSearcher(),this.renderAddBtn(),this.renderTableHeader(),e.table&&this.renderTable(),e.cards&&this.renderCards())}}])&&O(n.prototype,o),c&&O(n,c),t}()},1420:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(1),a=n(1375),o=n.n(a),i=(n(1374),n(11));n(1421);function c(e){var t=i.a.getPageBreadcrumb(e.location.pathname),n=e.title,a=e.links,c=e.tabs,l=e.currentTab;return r.createElement("div",{className:"common-header"},r.createElement("section",{className:"common-header-breadcrumb"},t&&r.createElement(o.a,null,t.map(function(e,t){return r.createElement(o.a.Item,{key:t},e.title)}))),r.createElement("section",{className:"common-header-title"},r.createElement("h2",null,n),r.createElement("div",{className:"common-header-links"},a&&a.map(function(t,n){return r.createElement("a",{key:n,onClick:function(){e.history.push(t.path)}},t.title)}))),r.createElement("section",{className:"common-header-tabs"},c&&c.map(function(t,n){return r.createElement("a",{onClick:function(){e.onTabClick(t.id)},className:"".concat(l===t.id?"tab-active":""," ")},r.createElement("span",null,t.title),t.tipComponent&&t.tipComponent())})))}},1421:function(e,t,n){},1422:function(e,t,n){},1423:function(e,t,n){"use strict";var r=function(e){var t=e;return 15===e.length&&(t=function(e){if(/^\d{15}$/.test(e)){e=e.substr(0,6)+"19"+e.substr(6,e.length-6);for(var t=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2],n=0,r=0;r<e.length;r++)n+=parseInt(e.substr(r,1))*t[r];return e+["1","0","X","9","8","7","6","5","4","3","2"][n%11]}return e}(e)),function(e){if(!/^\d{17}(\d|x)$/i.test(e))return!1;return null!=={11:"北京",12:"天津",13:"河北",14:"山西",15:"内蒙",21:"辽宁",22:"吉林",23:"黑龙",31:"上海",32:"江苏",33:"浙江",34:"安徽",35:"福建",36:"江西",37:"山东",41:"河南",42:"湖北",43:"湖南",44:"广东",45:"广西",46:"海南",50:"重庆",51:"四川",52:"贵州",53:"云南",54:"西藏",61:"陕西",62:"甘肃",63:"青海",64:"宁夏",65:"新疆",71:"台湾",81:"香港",82:"澳门",83:"台湾",91:"国外"}[parseInt(e.substr(0,2))]}(t)},a=function(e){return/^[HMhm]{1}([0-9]{8})$/.test(e)},o=function(e){return/^[0-9]{8}$/.test(e)||/^[0-9]{10}$/.test(e)},i=function(e){return/^[a-zA-Z]{5, 17}$/.test(e)||/^[a-zA-Z0-9]$/.test(e)},c=n(11);function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.d(t,"a",function(){return u});var s={isNonEmpty:function(e,t,n){if(0!==e&&c.a.isEmpty(e))return n&&n(),t},maxLength:function(e,t,n,r){if(e.length>t)return r&&r(),n},minLength:function(e,t,n,r){if(e.length<t)return r&&r(),n},isEmail:function(e,t,n){if(!/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(e))return n&&n(),t},isMobile:function(e,t,n){if(!/^(13[0-9]|14[57]|15[012356789]|16[0-9]|18[0-9]|17[0-9]|19[0-9])\d{8}$/.test(e))return n&&n(),t},isID:function(e,t,n,c){var l=null;if("id"===t?l=r:"HKMC"===t?l=a:"TW"===t?l=o:"PSPort"===t&&(l=i),!l(e))return c&&c(),n},isNumber:function(e,t,n){if(e&&Number.isNaN(Number(e)))return n&&n(),t},isHexColor:function(e,t,n){var r=e.toString();if(!r||!function(e){if("#"!==e[0])return!1;var t=e.slice(1);return 6===t.length&&/^[0-9a-fA-f]{6}$/.test(t)}(r))return n&&n(),t},customReg:function(e,t,n,r){var a=e.toString();if(!a||!new RegExp(t).test(a))return r&&r(),n}},u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.cache=[]}var t,n,r;return t=e,(n=[{key:"add",value:function(e,t){var n=this,r=!0,a=!1,o=void 0;try{for(var i,c=function(){var t=i.value,r=t.strategy.split(":");n.cache.push(function(){var n=r.shift();return r.unshift(e),r.push(t.errMsg),r.push(t.cb),s[n].apply(null,r)})},l=t[Symbol.iterator]();!(r=(i=l.next()).done);r=!0)c()}catch(e){a=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw o}}}},{key:"start",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,a=this.cache[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){var o=(0,r.value)();if(o)return o}}catch(e){t=!0,n=e}finally{try{e||null==a.return||a.return()}finally{if(t)throw n}}}}])&&l(t.prototype,n),r&&l(t,r),e}()},1424:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n(1);n(1425);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var s={hot:"hot",normal:"normal",wait:"wait",block:"block"},u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i(this,c(t).apply(this,arguments))}var n,a,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(t,r["Component"]),n=t,(a=[{key:"render",value:function(){var e=this.props,t=e.text,n=e.type;return r.createElement("span",{className:"status-text ".concat(s[n])},r.createElement("span",{className:"status-text-dot ".concat(s[n])}),r.createElement("span",null,t))}}])&&o(n.prototype,a),u&&o(n,u),t}()},1425:function(e,t,n){},1447:function(e,t,n){},1448:function(e,t,n){},1449:function(e,t,n){},1450:function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNTcyMjQ5NTEzOTExIiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMzAgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjMyNTYiIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjAxLjE3MTg3NSIgaGVpZ2h0PSIyMDAiPjxkZWZzPjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+PC9zdHlsZT48L2RlZnM+PHBhdGggZD0iTTg2NS42MzQ2NzUgMTQ5LjAwMzA5NkM3NzMuNjk2NTk0IDU1LjQ3OTg3NiA2NDYuODg1NDQ5IDAgNTA1LjgwODA1IDBjLTEzNy45MDcxMjEgMC0yNjMuMTMzMTI3IDU1LjQ3OTg3Ni0zNTUuMDcxMjA4IDE0NS44MzI4MTdsLTMuMTcwMjc5IDMuMTcwMjc5QzU1LjYyODQ4MyAyMzkuMzU2MDM3IDAuMTQ4NjA3IDM2Ny43NTIzMjIgMC4xNDg2MDcgNTA3LjI0NDU4MmMwIDE0MS4wNzczOTkgNTUuNDc5ODc2IDI2Ny44ODg1NDUgMTQ3LjQxNzk1NiAzNTkuODI2NjI1IDkxLjkzODA4IDkxLjkzODA4IDIxOC43NDkyMjYgMTQ5LjAwMzA5NiAzNTguMjQxNDg3IDE0OS4wMDMwOTYgMTM3LjkwNzEyMSAwIDI2NC43MTgyNjYtNTUuNDc5ODc2IDM1Ni42NTYzNDYtMTQ1LjgzMjgxN2wzLjE3MDI3OS0zLjE3MDI3OWM5MS45MzgwOC05My41MjMyMiAxNDkuMDAzMDk2LTIyMC4zMzQzNjUgMTQ5LjAwMzA5Ni0zNTkuODI2NjI1cy01Ny4wNjUwMTUtMjY3Ljg4ODU0NS0xNDkuMDAzMDk2LTM1OC4yNDE0ODZ6IG0tNzQuNTAxNTQ4IDM5Ny44Njk5NjljLTExLjA5NTk3NSAxMS4wOTU5NzUtMjUuMzYyMjI5IDE3LjQzNjUzMy0zOS42Mjg0ODMgMTcuNDM2NTMzSDI2NC44NjY4NzNjLTE1Ljg1MTM5MyAwLTMwLjExNzY0Ny02LjM0MDU1Ny00MS4yMTM2MjItMTcuNDM2NTMzLTkuNTEwODM2LTExLjA5NTk3NS0xNy40MzY1MzMtMzAuMTE3NjQ3LTE3LjQzNjUzMy00NC4zODM5MDEgMC0xNS44NTEzOTMgNC43NTU0MTgtMzMuMjg3OTI2IDE1Ljg1MTM5My00Mi43OTg3NjIgMTEuMDk1OTc1LTkuNTEwODM2IDI1LjM2MjIyOS0xNy40MzY1MzMgNDEuMjEzNjIzLTE3LjQzNjUzMmg0ODYuNjM3NzcxYzE1Ljg1MTM5MyAwIDMwLjExNzY0NyA2LjM0MDU1NyAzOS42Mjg0ODMgMTcuNDM2NTMyIDExLjA5NTk3NSAxMS4wOTU5NzUgMTcuNDM2NTMzIDI4LjUzMjUwOCAxNy40MzY1MzIgNDIuNzk4NzYycy0zLjE3MDI3OSAzMC4xMTc2NDctMTUuODUxMzkzIDQ0LjM4MzkwMXoiIHAtaWQ9IjMyNTciIGZpbGw9IiM0QTRBNEEiPjwvcGF0aD48L3N2Zz4="},1512:function(e,t,n){"use strict";n.r(t);var r=n(2),a=n(1),o=n(109),i=n(200),c=n(120),l=n(72),s=n.n(l),u=(n(249),n(1369)),m=n.n(u),d=(n(1368),n(1447),n(110)),f=n(251),p=n.n(f),g=n(1420),y=n(1419),b=n(1373),h=n.n(b),v=(n(1372),n(352)),E=n.n(v),I=(n(248),n(146)),N=n.n(I),w=(n(167),n(1381)),M=n.n(w),C=(n(1380),n(23)),S=n.n(C),j=(n(351),n(1379)),k=n.n(j),O=(n(1378),n(580)),T=n.n(O),z=(n(579),n(202)),B=n.n(z),x=(n(355),n(356)),D=n.n(x),L=(n(587),n(353)),R=n.n(L),P=(n(578),n(1448),n(3)),A=n(1423),U=n(11),F=n(58);function V(e){return(V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Q(e){return(Q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function W(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Y(e,t){return(Y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var K=h.a.Item,Z=m.a.confirm,H=E.a.TextArea,G=R.a.Option,J=a.createElement("div",null,a.createElement(S.a,{type:"plus"}),a.createElement("div",{className:"ant-upload-text"},"上传图片")),X=function(e,t,n){return{labelCol:{span:e,offset:n},wrapperCol:{span:t}}},ee=function(e){function t(){var e,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,o=Q(t).apply(this,arguments),(e=!o||"object"!==V(o)&&"function"!=typeof o?W(n):o).$selectRef=null,e.state={breadcrumbs:[],mode:"add",previewImage:"",previewVisible:!1,fileList:[],selectVisible:!1,inputValue:void 0,shoeOptions:[],showColorPicker:!1,bgFlag:!1},e.init=function(){return r.a(W(e),void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,a=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=U.a.getPageBreadcrumb(this.props.location.pathname),n=this.$qs.parse(this.props.location.search),this.setState({breadcrumbs:t,mode:0==n.id?"add":"edit"},function(){return r.a(a,void 0,void 0,regeneratorRuntime.mark(function e(){var t,r=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(t=U.a.getLStorage("currentBrandNo"))?Z({title:"品牌恢复操作",content:"检测到您存在未提交品牌信息，请问是否从上次编辑的品牌中恢复状态？",onOk:function(){r.props.community.setCurrentBrand(t)},onCancel:function(){r.init(),U.a.rmLStorage("currentBrandNo")}}):"edit"===this.state.mode?this.$store.community.getCurrentBrand({brandUid:n.id}):this.props.community.setCurrentBrand({},!0,!1);case 2:case"end":return e.stop()}},e,this)}))});case 3:case"end":return e.stop()}},e,this)}))},e.renderEditor=function(){var t=e.state.mode,n=e.props.community,r=n.setCurrentBrand,o=n.currentShowBrand,i=e.props.form.getFieldDecorator;return a.createElement(h.a,{className:"editor-form"},a.createElement(K,null,a.createElement("h2",{className:"editor-form-title form-title"},"基本信息")),a.createElement(K,Object.assign({label:"企业邮箱"},X(2,6),{required:!0}),i("mail",{initialValue:o&&o.mail})(a.createElement(E.a,{disabled:"edit"==t,placeholder:"请输入企业邮箱（选填）",onChange:function(e){r({mail:e.target.value},!1)}}))),a.createElement(K,Object.assign({label:"品牌名称"},X(2,6),{required:!0}),i("brandName",{initialValue:o&&o.brandName})(a.createElement(E.a,{placeholder:"请输入 2-30 字名称（中+英）",onChange:function(e){r({brandName:e.target.value},!1)}}))),a.createElement(K,Object.assign({label:"品牌分类",className:"category-type-select"},X(2,6),{required:!0}),i("brandType",{initialValue:o&&o.brandType})(a.createElement(R.a,{getPopupContainer:function(){return document.getElementsByClassName("category-type-select")[0]},placeholder:"请选择品牌分类",onChange:function(e,t){r({brandType:e},!1)}},F.e.map(function(e){return a.createElement(G,{key:e.id,value:e.id},a.createElement("span",null,e.value))})))),a.createElement(K,Object.assign({label:"品牌介绍"},X(2,8),{required:!0}),i("description",{initialValue:o&&o.description,rules:[]})(a.createElement(H,{placeholder:"请输入品牌介绍，50-200 字最佳",rows:6,onChange:function(e){r({description:e.target.value},!1)}}))),e.renderUploadComponent({label:"上传头像",field:"brandLogo",format:"image/png,image/jpg,image/jpeg",className:"upload-transparent-bg",required:!0,bgFlag:!0,size:{width:500,height:500},tip:"*尺寸：500*500px 及以下的方形图，jpg、png 格式"}),e.renderUploadComponent({label:"社区首页背景图",field:"brandFeedPic",format:"image/png,image/jpg,image/jpeg",className:"upload-transparent-bg",required:!0,bgFlag:!0,size:{width:750,height:750},tip:"*尺寸：750*750px；jpg、png 格式"}),a.createElement(K,Object.assign({label:"是否加 v"},X(2,6),{required:!0}),i("hasCertified",{initialValue:o&&o.hasCertified})(a.createElement(D.a.Group,{onChange:function(e){r({hasCertified:e.target.value},!1)}},a.createElement(D.a,{value:1},"是"),a.createElement(D.a,{value:0},"否")))),a.createElement(K,null,a.createElement("h2",{className:"editor-form-title form-title"},"更多信息")),e.renderMoreInfo(),a.createElement(K,{className:"editor-form-btns"},a.createElement(N.a,{type:"primary",onClick:e.handleSubmit},"保存"),a.createElement(N.a,{onClick:e.goBack},"取消")))},e.renderMoreInfo=function(){var t=e.props.community,n=t.currentShowBrand,r=t.setCurrentBrand,o=e.props.form.getFieldDecorator,i={display:"block",marginBottom:12};return a.createElement(a.Fragment,null,a.createElement(K,Object.assign({label:"品牌排序"},X(2,12)),o("order",{initialValue:n&&n.ranking})(a.createElement(k.a,{min:0,max:99,onChange:function(e){r({ranking:e},!1)}})),a.createElement("span",{className:"tip"},"*不同类别下的品牌优先级排序，前 6 位为首屏可视区域，最大值为 99")),e.renderSearchKeyword(),a.createElement(K,Object.assign({label:"是否上架",required:!0},X(2,6),{className:"editor-upshelf"}),o("brandStatus",{initialValue:n&&n.brandStatus})(a.createElement(D.a.Group,{onChange:function(e){r({brandStatus:e.target.value},!1)}},a.createElement(D.a,{style:i,value:1},"是"),a.createElement(D.a,{style:i,value:0},"否")))))},e.renderSearchKeyword=function(){var t=e.props.community.currentShowBrand,n=e.state.selectVisible;return a.createElement(K,Object.assign({label:"搜索关键词"},X(2,6)),a.createElement("div",{className:"editor-specific-shoe"},t&&t.searchKeyword&&t.searchKeyword.map(function(t,n){var r=t&&t.length>20,o=a.createElement(T.a,{key:t,closable:!0,onClose:function(){return e.handleClose(t)}},r?"".concat(t.slice(0,20),"..."):t);return r?a.createElement(B.a,{title:t,key:t},o):o}),n&&a.createElement(E.a,{ref:function(t){return e.$selectRef=t},onBlur:e.onKeywordBlur,onPressEnter:e.onKeywordBlur,onChange:function(t){e.onKeywordSelect(t.target.value)}}),!n&&a.createElement(T.a,{style:{background:"#fff",borderStyle:"dashed"},onClick:function(){e.setState({selectVisible:!0},function(){return e.$selectRef.focus()})}},a.createElement(S.a,{type:"plus"}),"添加")))},e.getUpLoadFileName=function(e){var t=e.name.split(".")[0],n=e.name.split(".")[1],r="".concat((new Date).getTime());return"".concat(t,"_").concat(r,".").concat(n)},e.customRequest=function(t,n){var r=e.props.community.setCurrentBrand;if(t.limit&&n.file.size/1024>t.limit)return e.$msg.error("图片大小不得超过 ".concat(t.limit,"kb")),Promise.reject(0);function a(){U.a.uploadFile({file:n.file,fileName:n.file.name,ypModel:"brand_zone"}).then(function(e){r(_({},t.field,e),!1)})}t.size?U.a.getFileInfo(n.file,function(n){n.width/n.height!=t.size.width/t.size.height||n.width>t.size.width||n.height>t.size.height?e.$msg.warning("请上传正确尺寸图片"):a()}):a()},e.renderUploadComponent=function(t){var n=e.props.form.getFieldDecorator,r=e.props.community,o=r.currentShowBrand,i=r.setCurrentBrand;return a.createElement(h.a.Item,{className:"form-upload",label:a.createElement("label",null,a.createElement("span",null,t.label)),labelCol:{span:t.labelCol||2},wrapperCol:{span:t.wrapperCol||18},required:t.required||!1},n(t.field,{initialValue:o&&o[t.field]})(a.createElement(M.a,{key:t.field,className:"logo-square ".concat(t.className),accept:t.format||"image/*",action:"",listType:"picture-card",onPreview:function(n){return e.handlePreview(n,t.bgFlag)},beforeUpload:function(n){if(t.format){var r=t.format.split(",").includes(n.type);return r||e.$msg.error("请上传正确格式图片"),r}return!0},onRemove:function(n){i(_({},t.field,void 0),!1),e.setState({bgFlag:!1})},customRequest:function(n){return e.customRequest(t,n)},fileList:o&&o[t.field]},J)),a.createElement("span",{className:"form-upload-tip"},t.tip))},e.handlePreview=function(t,n){e.setState({previewImage:t.url||t.thumbUrl,previewVisible:!0,bgFlag:n})},e.onKeywordSelect=function(t,n){t?e.setState({inputValue:t.trim()}):e.setState({inputValue:void 0})},e.onKeywordBlur=function(){e.onKeywordConfirm(),e.setState({selectVisible:!1,inputValue:void 0})},e.onKeywordConfirm=function(){var t=e.state.inputValue,n=e.props.community.currentShowBrand.searchKeyword;n=U.a.isEmpty(n)?[]:n,t&&n&&Object(P.o)(n)instanceof Array&&-1===n.indexOf(t)&&(n=[].concat($(n),[t])),e.props.community.setCurrentBrand(Object.assign({},e.props.community.currentBrand,{searchKeyword:n.join(",")}),!1)},e.handleClose=function(t){var n=e.props.community.currentShowBrand.searchKeyword;n=n.filter(function(e){return e!==t}),e.props.community.setCurrentBrand(Object.assign({},e.props.community.currentBrand,{searchKeyword:n.join(",")}))},e.handleSubmit=function(t){return r.a(W(e),void 0,void 0,regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.props.form.validateFields(function(e,n){return r.a(t,void 0,void 0,regeneratorRuntime.mark(function t(){var n,r,a,o,i,c=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=9;break}if(n=this.props.common.userInfo,r=this.props.community.currentBrand,a=this.state.mode,!(o=this.getValidation(r))){t.next=7;break}return t.abrupt("return",this.$msg.warn(o));case 7:i={mail:r.mail,brandName:r.brandName,brandType:r.brandType,description:r.description,brandLogo:r.brandLogo,brandFeedPic:r.brandFeedPic,hasCertified:r.hasCertified,ranking:r.ranking,searchKeyword:r.searchKeyword||"",brandStatus:r.brandStatus},"add"===a?(i.createBy=n.empId,this.$api.community.addBrand(i).then(function(e){0==e.data.ret?(c.$msg.success("品牌 ".concat(r.brandName," 添加成功")),setTimeout(function(){btnLoading=!1,c.goBack();var e=c.props.community.brandListMeta,t=e.pageNum,n=e.pageSize;c.$store.community.getBrandList({pageNum:t,pageSize:n})},300)):c.$msg.error(e.data.msg)})):(i.uid=r.uid,i.updateBy=n.empId,this.$api.community.editBrand(i).then(function(e){0==e.data.ret?(c.$msg.success("品牌 ".concat(r.brandName," 编辑成功")),setTimeout(function(){btnLoading=!1,c.goBack();var e=c.props.community.brandListMeta,t=e.pageNum,n=e.pageSize;c.$store.community.getBrandList({pageNum:t,pageSize:n})},300)):c.$msg.error(e.data.msg)}));case 9:case"end":return t.stop()}},t,this)}))});case 1:case"end":return e.stop()}},e,this)}))},e.getValidation=function(e){var t,n=new A.a;e.mail&&n.add(e.mail,[{strategy:"isNonEmpty",errMsg:"请输入邮箱"},{strategy:"isEmail",errMsg:"请输入合法邮箱"}]),n.add(e.brandName,[{strategy:"isNonEmpty",errMsg:"请填写品牌名称"},{strategy:"maxLength:30",errMsg:"品牌名称不得超过 30 个字"},{strategy:"minLength:2",errMsg:"品牌名称不得少于 2 个字"}]),n.add(e.brandType,[{strategy:"isNonEmpty",errMsg:"请选择品牌分类"}]),n.add(e.description,[{strategy:"isNonEmpty",errMsg:"请填写品牌介绍"},{strategy:"maxLength:200",errMsg:"品牌介绍不得超过 200 个字"}]),n.add(e.brandLogo,[{strategy:"isNonEmpty",errMsg:"请上传头像"}]),n.add(e.brandFeedPic,[{strategy:"isNonEmpty",errMsg:"请上传社区首页背景图"}]),n.add(e.hasCertified,[{strategy:"isNonEmpty",errMsg:"请选择是否加 v"}]),null!=e.orrankingder?(t=e.ranking.toString(),n.add(t,[{strategy:"maxLength:5",errMsg:"排序不得超过 5 位"}])):t=e.ranking,1==e.status&&(n.add(e.publicStartTime,[{strategy:"isNonEmpty",errMsg:"上架时间段不能为空"}]),n.add(e.publicEndTime,[{strategy:"isNonEmpty",errMsg:"上架时间段不能为空"}]));var r=n.start();return r||(null==e.brandStatus&&(r="请选择是否上架"),r)},e.goBack=function(){setTimeout(function(){e.props.history.goBack(),e.props.community.setCurrentBrand({}),U.a.rmLStorage("currentBrandNo")},300)},e.renderModal=function(){var t=e.state,n=t.previewImage,r=t.previewVisible,o=t.bgFlag,i=o?{backgroundColor:"#666",minWidth:80,maxWidth:320,margin:"0 auto"}:{};return a.createElement(m.a,{visible:r,className:"".concat(o?"blank-transparent-bg":""),bodyStyle:i,footer:null,onCancel:e.handleCancel},a.createElement("img",{alt:"example",style:{width:"100%",objectFit:"contain"},src:n}))},e.handleCancel=function(){e.setState({previewVisible:!1})},e}var n,i,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Y(e,t)}(t,o["a"]),n=t,(i=[{key:"componentDidMount",value:function(){return r.a(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.init();case 1:case"end":return e.stop()}},e,this)}))}},{key:"componentWillUnmount",value:function(){this.props.community.setCurrentBrand({})}},{key:"render",value:function(){return a.createElement("div",{className:"editor"},a.createElement("section",{className:"editor-content panel-block"},this.renderEditor()),a.createElement("section",{className:"editor-modal"},this.renderModal()))}}])&&q(n.prototype,i),c&&q(n,c),t}(),te=ee=r.b([h.a.create(),Object(d.b)("common","shoe","community"),d.c],ee),ne=(n(1449),n(16)),re=n.n(ne),ae=n(585),oe=n.n(ae),ie=n(1382),ce=n.n(ie),le=n(147),se=n.n(le),ue=n(1403),me=n.n(ue),de=n(1450),fe=n.n(de),pe=n(87),ge=n.n(pe);function ye(e){return(ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function be(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function he(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ve(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ee(e){return(Ee=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ie(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ne(e,t){return(Ne=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var we=R.a.Option,Me=h.a.Item,Ce=m.a.confirm,Se=a.createElement("div",null,a.createElement(S.a,{type:"plus"}),a.createElement("div",{className:"ant-upload-text"},"上传图片")),je=function(e,t,n){return{labelCol:{span:e,offset:n},wrapperCol:{span:t}}},ke=function(e){function t(){var e,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,o=Ee(t).apply(this,arguments),(e=!o||"object"!==ye(o)&&"function"!=typeof o?Ie(n):o).$topicRef=null,e.$enqupmentRef=null,e.state={mode:"add",visible:!1,seeMoreTopic:!0,showClubCard:!1,selectedModule:void 0,clubCardPayload:void 0,bgFlag:!1,previewImage:"",previewVisible:!1,selectTopicVisible:!1,topicOptions:[],topicOptionsMeta:{},selectActivityVisible:!1,activityOptions:[],activityOptionsMeta:{},selectChallengeVisible:!1,challengeOptions:[],challengeOptionsMeta:{},selectArticleVisible:!1,articleOptions:[],articleOptionsMeta:{},selectEnquipmentVisible:!1,enquipmentOptions:[],enquipmentOptionsMeta:{}},e.init=function(){return r.a(Ie(e),void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,a=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=U.a.getPageBreadcrumb(this.props.location.pathname),n=this.$qs.parse(this.props.location.search),this.setState({breadcrumbs:t,mode:0==n.id?"add":"edit"},function(){return r.a(a,void 0,void 0,regeneratorRuntime.mark(function e(){var t,r=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=U.a.getLStorage("currentBrandNo"))){e.next=5;break}Ce({title:"品牌内容恢复操作",content:"检测到您存在未提交品牌内容，请问是否从上次编辑的品牌内容中恢复状态？",onOk:function(){r.props.community.setCurrentBrand(t)},onCancel:function(){r.init(),U.a.rmLStorage("currentBrandNo")}}),e.next=12;break;case 5:if("edit"!==this.state.mode){e.next=11;break}return e.next=8,this.$store.community.getCurrentBrand({brandUid:n.id});case 8:this.setSeeMoreConfig(),e.next=12;break;case 11:this.props.community.setCurrentBrand({},!0,!1);case 12:case"end":return e.stop()}},e,this)}))});case 3:case"end":return e.stop()}},e,this)}))},e.setSeeMoreConfig=function(){var t,n=e.props.community,r=n.currentBrand,a=n.setCurrentBrand;U.a.isEmpty(r.cardInfo)||((t=ge()(r.cardInfo)).visible=!0,a({cardInfo:t},!1));["topicInfo","activitysInfo","challengesInfo","articleInfo"].forEach(function(t){var n=r[t],o=!U.a.isEmpty(n)&&!U.a.isEmpty(n.configItem)&&n.configItem||[];a(he({},t,Object.assign({},n,{visible:!o.every(function(e){return 3==e.operationType})})),!1),o.length>3&&e.setState(he({},"".concat(t,"More"),!0))})},e.onModalOk=function(){var t=e.state.selectedModule,n=e.props.community,r=n.setCurrentBrand,a=n.currentBrand,o=a.cardInfo,i=a.topicInfo,c=a.activitysInfo,l=a.challengesInfo,s=a.articleInfo,u=a.hasConfig;if("会员卡"===t)if(u&&null!=o)r({cardInfo:{visible:!0,configItem:o.configItem.concat({operationType:1})||[{operationType:1}]}},!1);else{if(o&&o.configItem)return e.$msg.warning("已存在会员卡模块");r({cardInfo:{visible:!0,configItem:[{operationType:1}]}},!1)}else if("话题"===t)if(u&&null!=i)r({topicInfo:{visible:!0,configItem:i.configItem||[]}},!1);else{if(i&&i.configItem)return e.$msg.warning("已存在话题模块");r({topicInfo:{visible:!0,configItem:[]}},!1)}else if("活动"===t)if(u)r({activitysInfo:{visible:!0,configItem:c.configItem||[]}},!1);else{if(c&&c.configItem)return e.$msg.warning("已存在活动模块");r({activitysInfo:{visible:!0,configItem:[]}},!1)}else if("挑战"===t)if(u)r({challengesInfo:{visible:!0,configItem:l.configItem||[]}},!1);else{if(l&&l.configItem)return e.$msg.warning("已存在挑战模块");r({challengesInfo:{visible:!0,configItem:[]}},!1)}else if("文章"===t)if(u)r({articleInfo:{visible:!0,configItem:s.configItem||[]}},!1);else{if(s&&s.configItem)return e.$msg.warning("已存在文章模块");r({articleInfo:{visible:!0,configItem:[]}},!1)}e.setState({selectedModule:void 0}),e.toggleModal()},e.onModalCancel=function(){e.toggleModal(),e.setState({selectedModule:void 0})},e.toggleModal=function(){e.setState({visible:!e.state.visible})},e.handleSubmit=function(t){return r.a(Ie(e),void 0,void 0,regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.props.form.validateFields(function(e,n){return r.a(t,void 0,void 0,regeneratorRuntime.mark(function t(){var n,r,a,o,i,c,l,s=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=11;break}if(n=this.props.community,r=n.currentBrand,n.currentShowBrand,a=this.props.common.userInfo,this.state.mode,!(o=this.getValidation(r))){t.next=7;break}return t.abrupt("return",this.$msg.warn(o));case 7:i=r.hasConfig,c=this.getBrandConfigInfo(),l={brandConfigInfo:U.a.isEmpty(c)?void 0:c,memberCardInfo:U.a.isEmpty(r.cardInfo)||U.a.isEmpty(r.cardInfo.configItem)?void 0:r.cardInfo.configItem,brandUid:r.uid,operator:a.empId},i?this.$api.community.editBrandConfig(l).then(function(e){0==e.data.ret?(s.$msg.success("品牌配置编辑成功"),setTimeout(function(){s.goBack();var e=s.props.community.brandListMeta,t=e.pageNum,n=e.pageSize;s.$store.community.getBrandList({pageNum:t,pageSize:n})},300)):s.$msg.error(e.data.msg)}):this.$api.community.addBrandConfig(l).then(function(e){0==e.data.ret?(s.$msg.success("品牌配置添加成功"),setTimeout(function(){s.goBack();var e=s.props.community.brandListMeta,t=e.pageNum,n=e.pageSize;s.$store.community.getBrandList({pageNum:t,pageSize:n})},300)):s.$msg.error(e.data.msg)});case 11:case"end":return t.stop()}},t,this)}))});case 1:case"end":return e.stop()}},e,this)}))},e.getBrandConfigInfo=function(){var t=[],n=e.props.community.currentBrand,r=n.hasConfig;if(n.topicInfo&&n.topicInfo.configItem){var a=n.topicInfo.configItem.map(function(e){return r?e:{bizId:e.bizId,bizType:2}});t=t.concat(a)}if(n.activitysInfo&&n.activitysInfo.configItem){var o=n.activitysInfo.configItem.map(function(e){return r?e:{bizId:e.bizId,bizType:3}});t=t.concat(o)}if(n.challengesInfo&&n.challengesInfo.configItem){var i=n.challengesInfo.configItem.map(function(e){return r?e:{bizId:e.bizId,bizType:4}});t=t.concat(i)}if(n.articleInfo&&n.articleInfo.configItem){var c=n.articleInfo.configItem.map(function(e){return r?e:{bizId:e.bizId,bizType:5}});t=t.concat(c)}return t},e.getValidation=function(e){var t=new A.a;if(!U.a.isEmpty(e.cardInfo)&&!U.a.isEmpty(e.cardInfo.configItem)){var n=e.cardInfo.configItem;n.forEach(function(e,r){t.add(n[r].memberCardDesc,[{strategy:"isNonEmpty",errMsg:"请输入会员卡说明"}]),t.add(n[r].memberCardLogo,[{strategy:"isNonEmpty",errMsg:"请输入会员卡 logo"}]),t.add(n[r].memberRegUrl,[{strategy:"isNonEmpty",errMsg:"请输入会员链接"}]),t.add(n[r].memberJumpUrl,[{strategy:"isNonEmpty",errMsg:"请输入注册链接"}])})}return t.start()},e.onContentModuleSelect=function(t,n){e.setState({selectedModule:t})},e.goBack=function(){setTimeout(function(){e.props.history.goBack(),e.props.community.setCurrentBrand({}),U.a.rmLStorage("currentBrandNo")},300)},e.handlePreview=function(t,n){e.setState({previewImage:t.url||t.thumbUrl,previewVisible:!0,bgFlag:n})},e.renderEditor=function(){var t=e.props.community,n=t.currentBrand,r=t.currentShowBrand,o=t.setCurrentBrand,i=r.cardInfo,c=r.topicInfo,l=r.activitysInfo,s=r.challengesInfo,u=r.articleInfo,m=n.brandType&&F.e.find(function(e){return e.id==n.brandType}),d=["一","二","三","四","五"],f=0,p=[i,c,l,s,u].map(function(e,t){return 0===t&&e?d[f++]:e&&e.configItem instanceof Array&&e.visible?d[f++]:void 0});return a.createElement("ul",{className:"editor-wrapper"},a.createElement("li",{className:"editor-item editor-item-content"},a.createElement("h2",{className:"editor-form-title form-title"},"配置内容"),a.createElement("div",{className:"editor-content"},a.createElement("img",{src:n.brandLogo,alt:""}),a.createElement("div",{className:"editor-content-info"},a.createElement("p",null,a.createElement("span",null,"品牌名称："),a.createElement("span",null,n.brandName)),a.createElement("p",null,a.createElement("span",null,"品牌类别："),a.createElement("span",null,m&&m.value))),a.createElement(N.a,{type:"primary",onClick:e.toggleModal},a.createElement(S.a,{type:"plus"})," 添加配置"))),i&&i.configItem instanceof Array&&i.visible&&a.createElement("li",{className:"editor-item"},a.createElement(h.a,{className:"editor-form"},a.createElement(Me,null,a.createElement("h2",{className:"editor-form-title form-title"},a.createElement("span",null,a.createElement(S.a,{type:"tags",style:{color:"#4AC7FA",marginRight:6}}),"".concat(p[0],"、会员卡")),a.createElement("span",{className:"form-title-delete",onClick:function(){if(n.hasConfig){var e=ge()(n.cardInfo.configItem);o({cardInfo:{visible:!1,configItem:e.map(function(e){return e.operationType=3,e})}},!1)}else o({cardInfo:void 0},!1)}},a.createElement("img",{src:fe.a}),a.createElement("span",null,"删除")))),i.configItem.map(function(t,r){return a.createElement("section",{style:{display:3!=t.operationType?"block":"none"}},a.createElement(Me,Object.assign({label:"内容类别"},je(2,6,2)),"会员卡"),a.createElement(Me,Object.assign({label:"会员卡介绍文案"},je(2,6),{required:!0}),a.createElement(E.a,{value:t.memberCardDesc,placeholder:"请输入 12 字内的介绍文案",onChange:function(e){var t=ge()(n.cardInfo.configItem);o({cardInfo:{visible:!0,configItem:t.map(function(t,a){if(r===a){var o=n.hasConfig?1==t.operationType?1:2:1;t.memberCardDesc=e.target.value,t.operationType=o}return t})}},!1)}})),a.createElement(h.a.Item,{className:"form-upload",label:a.createElement("label",null,a.createElement("span",null,"会员卡面")),labelCol:{span:2},wrapperCol:{span:18},required:!0},a.createElement(M.a,{key:"cardInfo",className:"logo-square",accept:"image/png,image/jpg,image/jpeg",action:"",listType:"picture-card",onPreview:function(t){return e.handlePreview(t)},beforeUpload:function(t){var n="image/png,image/jpg,image/jpeg".split(",").includes(t.type);return n||e.$msg.error("请上传正确格式图片"),n},onRemove:function(t){var a=ge()(n.cardInfo.configItem);n.hasConfig?o({cardInfo:{visible:!0,configItem:a.map(function(e,t){if(r===t){var a=n.hasConfig?1==e.operationType?1:2:1;e.memberCardLogo=void 0,e.operationType=a}return e})}},!1):o({cardInfo:{visible:!0,configItem:a.map(function(e,t){return r===t&&(e.memberCardLogo=void 0),e})}},!1),e.setState({bgFlag:!1})},customRequest:function(t){var a=e.props.community.setCurrentBrand,o=Ie(e);U.a.getFileInfo(t.file,function(e){U.a.uploadFile({file:t.file,fileName:t.file.name,ypModel:"community_brand"}).then(function(e){var t=ge()(n.cardInfo.configItem);a({cardInfo:{visible:!0,configItem:t.map(function(t,a){if(r===a){var o=n.hasConfig?1==t.operationType?1:2:1;t.memberCardLogo=e,t.operationType=o}return t})}},!1),o.forceUpdate()})})},fileList:t.memberCardLogo||[]},Se),a.createElement("span",{className:"form-upload-tip"},"尺寸：1029*300px，jpg、png 格式")),a.createElement(Me,Object.assign({label:"注册链接"},je(2,6),{required:!0}),a.createElement(E.a,{value:t.memberRegUrl,placeholder:"请输入注册链接",onChange:function(e){var t=ge()(n.cardInfo.configItem);o({cardInfo:{visible:!0,configItem:t.map(function(t,a){if(r===a){var o=n.hasConfig?1==t.operationType?1:2:1;t.memberRegUrl=e.target.value,t.operationType=o}return t})}},!1)}})),a.createElement(Me,Object.assign({label:"会员链接"},je(2,6),{required:!0}),a.createElement(E.a,{value:t.memberJumpUrl,placeholder:"请输入会员链接",onChange:function(e){var t=ge()(n.cardInfo.configItem);o({cardInfo:{visible:!0,configItem:t.map(function(t,a){if(r===a){var o=n.hasConfig?1==t.operationType?1:2:1;t.memberJumpUrl=e.target.value,t.operationType=o}return t})}},!1)}})))}))),c&&c.configItem instanceof Array&&c.visible&&e.renderConfigItem({title:"".concat(p[1],"、话题"),type:"topicInfo",visible:"selectTopicVisible",ref:"$topicRef",list:"topicOptions",meta:"topicOptionsMeta",bizType:2,seeMore:"topicInfoMore"}),l&&l.configItem instanceof Array&&l.visible&&e.renderConfigItem({title:"".concat(p[2],"、活动"),type:"activitysInfo",visible:"selectActivityVisible",ref:"$activityRef",list:"activityOptions",meta:"activityOptionsMeta",bizType:3,seeMore:"activitysInfoMore"}),s&&s.configItem instanceof Array&&s.visible&&e.renderConfigItem({title:"".concat(p[3],"、挑战"),type:"challengesInfo",visible:"selectChallengeVisible",ref:"$challengeRef",list:"challengeOptions",meta:"challengeMeta",bizType:4,seeMore:"challengesInfoMore"}),u&&u.configItem instanceof Array&&u.visible&&e.renderConfigItem({title:"".concat(p[4],"、文章"),type:"articleInfo",visible:"selectArticleVisible",ref:"$articleRef",list:"articleOptions",meta:"articleMeta",bizType:5,seeMore:"articleInfoMore"}),a.createElement("li",{className:"editor-item editor-item-action"},a.createElement("div",{className:"spliter"}),r.isEmptyContent&&a.createElement("p",null,"暂无内容"),a.createElement(N.a,{type:"primary",onClick:e.handleSubmit},"保存"),a.createElement(N.a,{onClick:e.goBack},"取消")))},e.renderConfigItem=function(t){var n=e.props.community,o=n.setCurrentBrand,i=n.currentBrand,c=i[t.type];c=U.a.isEmpty(c)?{configItem:[]}:c;var l=e.state[t.list].map(function(e){return a.createElement(we,{key:e.bizId,$data:e},e.title)}),s=!U.a.isEmpty(c)&&!U.a.isEmpty(c.configItem)&&c.configItem.filter(function(e){return 3!=e.operationType})||[];return a.createElement("li",{className:"editor-item"},a.createElement(h.a,{className:"editor-form"},a.createElement(Me,null,a.createElement("h2",{className:"editor-form-title form-title"},a.createElement("span",null,a.createElement(S.a,{type:"tags",style:{color:"#4AC7FA",marginRight:6}}),t.title),a.createElement("span",{className:"form-title-delete",onClick:function(){if(i.hasConfig){var e=ge()(c.configItem);o(he({},t.type,{visible:!1,configItem:e.map(function(e){return e.operationType=3,e})}),!1)}else o(he({},t.type,void 0),!1)}},a.createElement("img",{src:fe.a}),a.createElement("span",null,"删除")))),a.createElement(Me,Object.assign({label:"内容"},je(2,6)),t.title),a.createElement(Me,Object.assign({label:"配置 ID",className:"tag-select"},je(2,10),{required:!0}),a.createElement("div",{className:"editor-specific-shoe"},e.state[t.visible]&&a.createElement(R.a,{style:{width:300,marginRight:10},getPopupContainer:function(){return document.getElementsByClassName("tag-select")[0]},ref:function(n){return e[t.ref]=n},showSearch:!0,filterOption:!1,placeholder:t.placeholder,onFocus:function(){return r.a(Ie(e),void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}))},onPopupScroll:oe()(function(t){return r.a(Ie(e),void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}))}),onSearch:function(n){e.onConfigItemSearch(Object.assign({},t,{bizId:n,bizType:t.bizType,brandUid:i.uid}))},onSelect:function(n,r){e.onConfigItemSelect(t,n,r)},onBlur:function(){return e.onConfigItemBlur(t)}},l),!e.state[t.visible]&&a.createElement(T.a,{style:{background:"#fff",borderStyle:"dashed"},onClick:function(){e.setState(he({},t.visible,!0),function(){return e[t.ref].focus()})}},a.createElement(S.a,{type:"plus"}),"添加"))),a.createElement(Me,null,s&&(s.length>3&&e.state[t.seeMore]?s.slice(0,3):s).map(function(e){return a.createElement("div",{className:"list-item"},a.createElement("p",null,a.createElement("span",null,e.bizId),a.createElement("span",null,a.createElement("a",{href:"".concat(e.bizId),target:"_blank",style:{color:"#1890ff"}},"标题：",e.title)),a.createElement("span",null,"发布时间：",re()(e.itemTime).format("YYYY.MM.DD HH:mm"))),a.createElement(S.a,{type:"close",onClick:function(){var n=[];ge()(c.configItem).forEach(function(t){e.bizId==t.bizId?void 0===t.operationType||null===t.operationType||(t.operationType=3,n.push(t)):n.push(t)}),o(he({},t.type,{visible:c.visible,configItem:n}),!1)}}))})),a.createElement(Me,null,s&&s.length>4&&a.createElement("div",{className:"list-item see-more",onClick:function(){e.setState(he({},t.seeMore,!e.state[t.seeMore]))}},e.state[t.seeMore]?a.createElement(a.Fragment,null,"展开查看",a.createElement(S.a,{type:"down"})):a.createElement(a.Fragment,null,"点击收起",a.createElement(S.a,{type:"up"}))))))},e.onConfigItemSearch=se()(function(t){return r.a(Ie(e),void 0,void 0,regeneratorRuntime.mark(function e(){var n,r,a=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.bizId){e.next=2;break}return e.abrupt("return",!1);case 2:return e.next=4,this.$api.community.getBrandConfigItem({bizId:t.bizId,bizType:t.bizType,brandUid:t.brandUid});case 4:n=e.sent,r=n.data.data,this.setState(he({},t.list,[r]),function(){a.forceUpdate()});case 7:case"end":return e.stop()}},e,this)}))},500),e.onConfigItemSelect=function(t,n,r){var a=e.props.community.currentBrand[t.type];a=U.a.isEmpty(a)?{visible:!0,configItem:[]}:a;var o=r&&r.props.$data||{};if(!U.a.isEmpty(a)&&a.configItem instanceof Array){var i=a.configItem.find(function(e){return e.bizId===o.bizId});i?i&&3==i.operationType&&(a={visible:a.visible,configItem:ce()(ge()(a.configItem).map(function(e){return i.bizId==e.bizId&&(e.operationType=0),e}),"bizId")}):a=Object.assign({},a,{configItem:me()([].concat(be(a.configItem),[o]),"itemTime","desc")})}e.props.community.setCurrentBrand(he({},t.type,a),!1),e.setState(he({},t.visible,!1))},e.onConfigItemBlur=function(t){e.setState(he({},t.visible,!1))},e.renderModal=function(){var t=e.state,n=t.visible,r=t.selectedModule;return a.createElement(m.a,{title:"内容模块",visible:n,onOk:e.onModalOk,onCancel:e.onModalCancel},a.createElement(h.a,{className:"editor-form"},a.createElement(Me,Object.assign({label:"内容模块",className:"category-type-select"},je(4,12),{required:!0}),a.createElement(R.a,{getPopupContainer:function(){return document.getElementsByClassName("category-type-select")[0]},placeholder:"请选择内容模块",value:r,onChange:function(t,n){e.onContentModuleSelect(t,n)}},F.f.map(function(e){return a.createElement(we,{key:e.value},a.createElement("span",null,e.value))})))))},e.handleCancel=function(){e.setState({previewVisible:!1})},e.renderPreviewModal=function(){var t=e.state,n=t.previewImage,r=t.previewVisible,o=t.bgFlag,i=o?{backgroundColor:"#666",minWidth:80,maxWidth:320,margin:"0 auto"}:{};return a.createElement(m.a,{visible:r,className:"".concat(o?"blank-transparent-bg":""),bodyStyle:i,footer:null,onCancel:e.handleCancel},a.createElement("img",{alt:"example",style:{width:"100%",objectFit:"contain"},src:n}))},e}var n,i,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ne(e,t)}(t,o["a"]),n=t,(i=[{key:"componentDidMount",value:function(){return r.a(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.init();case 1:case"end":return e.stop()}},e,this)}))}},{key:"componentWillUnmount",value:function(){this.props.community.setCurrentBrand({})}},{key:"render",value:function(){return a.createElement("div",{className:"editor detail-brand-editor"},a.createElement("section",{className:"editor-content panel-block"},this.renderEditor()),a.createElement("section",{className:"editor-modal"},this.renderModal()),a.createElement("section",{className:"preview-modal"},this.renderPreviewModal()))}}])&&ve(n.prototype,i),c&&ve(n,c),t}(),Oe=ke=r.b([h.a.create(),Object(d.b)("common","community"),d.c],ke),Te=(n(250),n(1424));function ze(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Be=function(e){var t=[{width:100,title:"品牌号 ID",dataIndex:"uid"},{title:"品牌 LOGO",render:function(e,t){return a.createElement("a",{href:t.brandLogo,style:{backgroundColor:"#666",width:60,height:60,display:"inline-block"}},a.createElement("img",{src:t.brandLogo,alt:"",style:{width:60,height:60,objectFit:"contain"}}))}},{title:"品牌号名称",dataIndex:"brandName"},{title:"品牌分类",dataIndex:"brandType",render:function(e,t){var n=F.e.find(function(t){return t.id==e});return n&&n.value||"--"}},{title:"分类排序",dataIndex:"ranking"},{title:"粉丝数",dataIndex:"fansCount"},{width:120,title:"状态",dataIndex:"brandStatus",render:function(e,t){return a.createElement(Te.a,{type:{3:"block",2:"normal",1:"normal",0:"block"}[t.brandStatus],text:{3:"注销",2:"正常",1:"上架",0:"下架"}[t.brandStatus]})}},{width:200,title:"操作",render:function(t,n){return a.createElement("div",{className:"common-list-table-operation"},a.createElement("span",{onClick:function(){return e.goToEditor(n)}},"编辑"),a.createElement("span",{className:"common-list-table-operation-spliter"}),a.createElement("span",{onClick:function(){e.props.community.setCurrentBrand(n,!0,!1);var t="/admin/community/brand/brand-list/detail-editor?id=".concat(U.a.isEmpty(n)?0:n.uid);e.props.history.push(t)}},"配置"))}}],n=Object.assign({},e.props.common.paginationConfig,{current:e.state.currentPage,total:e.props.community.brandListMeta.total,onChange:function(e,t){},onShowSizeChange:function(t,n){e.resetPagination(n,t)}});return{addBtn:{title:function(){return a.createElement(N.a,{type:"primary",onClick:function(){return e.goToEditor({})}},a.createElement(S.a,{type:"plus"})," 添加")}},searcher:{batchControl:{placeholder:"请选择",showBatchControl:!U.a.isEmpty(e.state.selectedRowKeys),options:[{title:"上架",value:"upshelf"},{title:"下架",value:"downshelf"}],onBatch:function(t){e.onBatch(t)}},widgets:[[{type:"SelectInput",label:"品牌",placeholder:"请输入品牌号/ 品牌号ID",options:[{title:"品牌号 ID",value:"brandUid"},{title:"品牌名称",value:"brandName"}],inputValue:e.state.brandValue,selectValue:e.state.brandField,onSelectChange:function(t){e.setBrandField(t)},onInputChange:function(t){e.setBrandValue(t.target.value)},onPressEnter:function(t){e.onSearch()}},{type:"Select",label:"品牌号分类",placeholder:"请选择品牌",value:e.state.categoryValue,option:{key:"categoryId",value:"categoryId",title:"categoryName",data:e.state.categoryOptions||[]},onSearch:function(t){e.onBrandSearch(t)},onChange:function(t,n){e.onCategorySelect(t,n)},onSelect:function(e,t){},onBlur:function(){},onFocus:function(){e.onBrandFocus()},onPopupScroll:function(t){e.onBrandPopupScroll(t)}}]],onSearch:function(){e.onSearch()},onReset:function(){e.onReset()}},table:{rowKey:"id",columns:t,loading:e.state.tableLoading,dataSource:e.props.community.brandList,pagination:n,current:e.state.currentPage,total:e.props.community.brandListMeta.total,onChange:function(t,n,r){var a={pageNum:t.current,pageSize:t.pageSize};if(!U.a.isEmpty(n))for(var o=0,i=Object.entries(n);o<i.length;o++){var c=ze(i[o],2),l=c[0],s=c[1];a[l]=s?s[0]:void 0}U.a.isEmpty(r)||(a.orderBy="".concat(r.field),a.sort="".concat("descend"===r.order?"desc":"asc")),e.setState({filter:Object.assign({},e.state.filter,a),currentPage:t.current},function(){e.getDataList(e.state.filter)})}}}};function xe(e){return(xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function De(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Le(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Re(e){return(Re=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Pe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ae(e,t){return(Ae=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ue=m.a.confirm,Fe=[],Ve=function(e){function t(){var e,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,o=Re(t).apply(this,arguments),(e=!o||"object"!==xe(o)&&"function"!=typeof o?Pe(n):o).state={selectedRowKeys:[],categoryOptions:[{categoryId:20,categoryName:"赛事"},{categoryId:10,categoryName:"运动装备"},{categoryId:30,categoryName:"服务机构"}],brandCategoryOptions:[],filter:{},brandField:"brandName",brandValue:void 0,categoryValue:void 0,tableLoading:!1,currentPage:1,brandOptionsMeta:{total:0,pageNum:1,pageSize:20}},e.getDataList=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setState({tableLoading:!0,filter:Object.assign({},e.state.filter,t)},function(){return r.a(Pe(e),void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$store.community.getBrandList(Object.assign({},this.state.filter,t));case 2:this.setState({tableLoading:!1});case 3:case"end":return e.stop()}},e,this)}))})},e.resetPagination=function(t,n){return r.a(Pe(e),void 0,void 0,regeneratorRuntime.mark(function e(){var a=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({filter:Object.assign({},this.state.filter,{pageSize:t,pageNum:n})},function(){return r.a(a,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=this.state.filter,this.getDataList(t);case 2:case"end":return e.stop()}},e,this)}))});case 1:case"end":return e.stop()}},e,this)}))},e.setBrandField=function(t){var n=e.state.filter;"brandUid"!==t?delete n.brandUid:"brandName"!==t&&delete n.brandName,e.setState({brandField:t,brandValue:void 0,filter:Object.assign({},n,De({},t,void 0))})},e.setBrandValue=function(t){e.setState({brandValue:t,filter:Object.assign({},e.state.filter,De({},e.state.brandField,t||void 0))})},e.onSearch=function(){return r.a(Pe(e),void 0,void 0,regeneratorRuntime.mark(function e(){var t,n=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this.state.filter).brandUid||!Number.isNaN(Number(t.brandUid))){e.next=3;break}return e.abrupt("return",this.$msg.error("请输入正确品牌号 ID"));case 3:this.setState({filter:Object.assign({},t,{pageNum:1}),currentPage:1},function(){n.getDataList(n.state.filter)});case 4:case"end":return e.stop()}},e,this)}))},e.onReset=function(){return r.a(Pe(e),void 0,void 0,regeneratorRuntime.mark(function e(){var t,n=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t={pageNum:1,pageSize:this.state.filter.pageSize},this.setState({brandValue:void 0,categoryValue:void 0,filter:t,currentPage:1},function(){n.getDataList(n.state.filter)});case 2:case"end":return e.stop()}},e,this)}))},e.goToEditor=function(t){var n="/admin/community/brand/brand-list/basic-editor?id=".concat(p()(t)?0:t.uid);e.props.history.push(n)},e.renderMenu=function(t){var n=a.createElement("span",{onClick:e.doOperation.bind(Pe(e),t.brandId)},"重置密码"),r=a.createElement("span",{onClick:e.cancelOperation.bind(Pe(e),t.brandId)},"注销");return a.createElement(s.a,null,[n,r].map(function(e){return a.createElement(s.a.Item,null,e)}))},e.doOperation=function(t){return r.a(Pe(e),void 0,void 0,regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:Ue({title:"密码重置操作",content:a.createElement("span",null,"请问是否重置当前品牌号密码？"),onOk:function(){return r.a(t,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$api.community.resetBrandPassword({});case 2:this.getDataList(this.state.filter);case 3:case"end":return e.stop()}},e,this)}))},onCancel:function(){return r.a(t,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}))}});case 1:case"end":return e.stop()}},e)}))},e.cancelOperation=function(t){return r.a(Pe(e),void 0,void 0,regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:Ue({title:"账号注销操作",content:a.createElement("span",null,"请问是否注销当前品牌号？"),onOk:function(){return r.a(t,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$api.community.logoutBrand({});case 2:this.getDataList(this.state.filter);case 3:case"end":return e.stop()}},e,this)}))},onCancel:function(){return r.a(t,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}))}});case 1:case"end":return e.stop()}},e)}))},e.onCategorySelect=function(t,n){var r=n&&n.props.$data.categoryId;e.setState({categoryValue:r,filter:Object.assign({},e.state.filter,{brandType:r||void 0})},function(){e.onSearch()})},e}var n,i,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ae(e,t)}(t,o["a"]),n=t,(i=[{key:"componentDidMount",value:function(){return r.a(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,r,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:"/admin/community/brand/brand-list"===this.props.location.pathname&&this.props.history.replace("/admin/community/brand/brand-list/list"),t=this.props.common.paginationConfig,n=t.defaultPageSize,r=t.defaultCurrent,a=this.props.location,this.$qs.parse(a.search),this.resetPagination(n,r);case 5:case"end":return e.stop()}},e,this)}))}},{key:"componentDidUpdate",value:function(){"/admin/community/brand/brand-list"===this.props.location.pathname&&this.props.history.replace("/admin/community/brand/brand-list/list")}},{key:"render",value:function(){var e=this,t=this.props,n=t.match,r=t.location,o=this.props.community.currentBrand,i="/admin/shoe/brand/editor"===r.pathname?U.a.isEmpty(o)?"添加品牌号":"编辑品牌号":"品牌列表";return a.createElement("div",null,a.createElement(g.a,Object.assign({},this.props,{links:Fe,title:i})),a.createElement(c.a,{path:"".concat(n.url,"/list"),render:function(t){return a.createElement(y.a,Object.assign({},t,{config:Be(e)}))}}),a.createElement(c.a,{path:"".concat(n.url,"/basic-editor"),render:function(e){return a.createElement(te,Object.assign({},e))}}),a.createElement(c.a,{path:"".concat(n.url,"/detail-editor"),render:function(e){return a.createElement(Oe,Object.assign({},e))}}))}}])&&Le(n.prototype,i),l&&Le(n,l),t}();Ve=r.b([Object(i.a)("/admin/community/brand/brand-list",{exact:!1}),Object(d.b)("common","community"),d.c],Ve);t.default=Ve}}]);