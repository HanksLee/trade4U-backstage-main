(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{1419:function(e,t,n){"use strict";n.d(t,"a",function(){return A});var r=n(1),o=n(109),a=(n(1422),n(146)),i=n.n(a),c=(n(167),n(353)),s=n.n(c),l=(n(578),n(352)),u=n.n(l),m=(n(248),n(1377)),p=n.n(m),f=(n(1376),n(1371)),d=n.n(f),h=(n(1370),n(168)),g=n.n(h),b=(n(354),n(23)),v=n.n(b),y=(n(351),n(582)),E=n.n(y),w=(n(581),n(584)),N=n.n(w),S=(n(583),n(580)),C=n.n(S),k=(n(579),n(11)),O=n(16),j=n.n(O);function M(e){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function P(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function I(e,t){return!t||"object"!==M(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function D(e,t){return(D=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var R=s.a.Option,L=u.a.Group,T=d.a.RangePicker,z=C.a.CheckableTag,B={SelectInput:function(e){var t=e.selectValue,n=e.inputValue,o=e.placeholder,a=e.options,i=e.onSelectChange,c=e.onInputChange,l=e.onPressEnter,m=e.selectStyle;return r.createElement(L,{compact:!0},r.createElement(s.a,{style:m?Object.assign({width:110},m):{width:110},value:t,onChange:i},a&&a.map(function(e,t){return r.createElement(R,{key:t,value:e.value},e.title)})),r.createElement(u.a,{style:{width:238},value:n,onChange:c,placeholder:o,onPressEnter:l}))},Select:function(e){var t=e.option,n=e.label,o=e.mode,a=e.onSearch,i=e.onSelect,c=e.onBlur,l=e.onFocus,u=e.value,m=e.placeholder,p=e.showSearch,f=e.width,d=e.filterOption,h=e.onChange,g=e.allowClear,b=e.onPopupScroll;return r.createElement(r.Fragment,null,n&&r.createElement("span",{className:"common-list-label"},"".concat(n,"：")),r.createElement("span",{className:"common-list-control"},r.createElement(s.a,{allowClear:g,value:u,mode:o||!1,style:{minWidth:f||258,width:f},showSearch:p,placeholder:m,filterOption:d,onSearch:a,onSelect:i,onChange:h,onBlur:c,onPopupScroll:b,onFocus:l},t.data.map(function(e){return r.createElement(R,{key:e[t.key]||e.id,value:e[t.value]||e.id,$data:e},e[t.title])}))))},DatePicker:function(e){var t=e.label,n=e.placeholder,o=e.onChange,a=e.value,i=e.style,c=e.format,s=e.showTime;return r.createElement(r.Fragment,null,t&&r.createElement("span",{className:"common-list-label"},"".concat(t,"：")),r.createElement("span",{className:"common-list-control"},r.createElement(d.a,{format:c||!1,style:i,showTime:s,placeholder:n,value:a,onChange:o})))},RangePicker:function(e){var t=e.label,n=e.alias,o=e.placeholder,a=e.onChange,c=e.value,s=e.showTime,l=e.format;return r.createElement(r.Fragment,null,t&&r.createElement("span",{className:"common-list-label"},"".concat(t,"：")),r.createElement("span",{className:"common-list-control"},r.createElement(T,{style:{width:400},showTime:s,format:l,placeholder:o,value:c,onChange:a}),r.createElement("span",{className:"common-list-control-date-alias"},!k.a.isEmpty(n)&&n.map(function(e,t){return r.createElement(i.a,{key:t,onClick:function(){return a([j()(Date.now()-864e5*e).startOf("day"),j()()])}},e," 天内")}))))},Input:function(e){var t=e.label,n=e.value,o=e.placeholder,a=e.onChange,i=e.width,c=e.onPressEnter;return r.createElement(r.Fragment,null,t&&r.createElement("span",{className:"common-list-label"},"".concat(t,"：")),r.createElement("span",{className:"common-list-control"},r.createElement(u.a,{style:{minWidth:i||258},value:n,onChange:a,placeholder:o,onPressEnter:c})))},Checkbox:function(e){var t=e.label,n=e.value,o=e.onChange;return r.createElement(g.a,{checked:n,onChange:o},t)},CheckableTag:function(e){var t=e.label,n=e.option,o=e.value,a=e.onChange;return r.createElement(r.Fragment,null,t&&r.createElement("span",{className:"common-list-label"},"".concat(t,"：")),r.createElement("span",{className:"common-list-control"},!k.a.isEmpty(n)&&n.map(function(e){return r.createElement(z,{key:e.value,checked:e.value===o,onChange:function(){a(e)}},e.title)})))},Label:function(e,t){var n=e.label;return r.createElement(r.Fragment,null,n&&r.createElement("span",{className:"common-list-label"},"".concat(n,"：")),r.createElement("span",{className:"common-list-control"},t))},Custom:function(e){return r.createElement("div",null,(void 0).props.children)}},A=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=I(this,x(t).apply(this,arguments))).state={collapse:!0},e.toggleCollapse=function(t){e.setState({collapse:!e.state.collapse})},e.renderSearcher=function(){var t=e.props.config,n=t.searcher,o=t.table,a=e.state.collapse;return n&&r.createElement("section",{className:"common-list-search"},e.renderWidgets(n.widgets),o&&o.tableHeader&&o.tableHeader(),r.createElement("div",{className:"common-list-search-right"},!n.hideSearcher&&r.createElement(r.Fragment,null,r.createElement(i.a,{type:"primary",onClick:n.onSearch},"查询"),r.createElement(i.a,{onClick:n.onReset},"重置")),n.collapseControl&&n.collapseControl.showMoreBtn&&r.createElement("span",{className:"common-list-serach-more"},r.createElement("a",{onClick:e.toggleCollapse},a?"更多":"收起"," ",r.createElement(v.a,{type:a?"down":"up"})))))},e.renderWidgets=function(t){var n=e.state.collapse,o=e.props.config.searcher;return t&&r.createElement("div",{className:"common-list-search-left"},t.map(function(t,a){return Array.isArray(t)?r.createElement("div",{key:a,className:"common-list-search-row",style:{display:o.collapseControl&&o.collapseControl.showMoreBtn&&n&&a>0?"none":"flex"}},t.map(function(t){return r.createElement("div",{key:t.label,className:"common-list-search-col",style:Object.assign({},t.style)},B[t.type]&&B[t.type](t,t.children?e.renderWidgets(t.children):null))})):r.createElement("div",{key:t.label,className:"common-list-search-row ".concat(t.className)},B[t.type]&&B[t.type](t,t.children?e.renderWidgets(t.children):null))}))},e.renderAddBtn=function(){var t=e.props.config,n=t.addBtn,o=t.searcher;return n&&r.createElement("section",{className:"common-list-addbtn",style:n.style},"function"==typeof n.title?r.createElement(n.title,null):n.title,r.createElement("div",{className:"common-list-search-batch"},o.batchControl.showBatchControl&&r.createElement(s.a,{placeholder:o.batchControl.placeholder,style:{minWidth:120},defaultValue:void 0,onChange:o.batchControl.onBatch},o.batchControl.options.map(function(e){return r.createElement(R,{key:e.value,value:e.value},e.title)}))))},e.renderTableHeader=function(){var t=e.props.config.tableHeader;return r.createElement("section",{className:"common-list-table-header"},t&&t())},e.renderTable=function(){var t=e.props.config.table,n=t.rowKey,o=t.rowSelection,a=t.columns,i=t.dataSource,c=t.pagination,s=t.onChange,l=t.loading,u=t.locale;return r.createElement("section",{className:"common-list-table"},r.createElement(p.a,{locale:u,rowKey:n||"id",rowSelection:o,columns:a,dataSource:i,loading:l,pagination:c,onChange:s}))},e.renderCards=function(){var t=e.props.config.cards,n=t.dataSource,o=t.loading,a=t.pagination,i=t.renderCard,c=t.addBtn;return r.createElement("div",{className:"common-list-cards-wrapper"},r.createElement("ul",{className:"common-list-cards"},o?r.createElement("div",{className:"common-list-cards-loading"},r.createElement(N.a,null)):r.createElement(r.Fragment,null,r.createElement("li",{className:"common-list-card add-btn"},r.createElement("div",{className:"common-list-card-item",onClick:c.onAddBtnClick},c.icon?r.createElement("img",{src:c.icon,alt:""}):r.createElement(v.a,{type:"plus-circle"}),r.createElement("p",null,c.title))),n.map(function(e){return r.createElement("li",{className:"common-list-card"},r.createElement("div",{className:"common-list-card-item"},i(e)))}))),r.createElement("section",{className:"common-list-cards-pagination"},r.createElement(E.a,Object.assign({},a))))},e}var n,a,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&D(e,t)}(t,o["a"]),n=t,(a=[{key:"render",value:function(){var e=this.props.config;return r.createElement("div",{className:"common-list"},this.renderSearcher(),this.renderAddBtn(),this.renderTableHeader(),e.table&&this.renderTable(),e.cards&&this.renderCards())}}])&&P(n.prototype,a),c&&P(n,c),t}()},1420:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(1),o=n(1375),a=n.n(o),i=(n(1374),n(11));n(1421);function c(e){var t=i.a.getPageBreadcrumb(e.location.pathname),n=e.title,o=e.links,c=e.tabs,s=e.currentTab;return r.createElement("div",{className:"common-header"},r.createElement("section",{className:"common-header-breadcrumb"},t&&r.createElement(a.a,null,t.map(function(e,t){return r.createElement(a.a.Item,{key:t},e.title)}))),r.createElement("section",{className:"common-header-title"},r.createElement("h2",null,n),r.createElement("div",{className:"common-header-links"},o&&o.map(function(t,n){return r.createElement("a",{key:n,onClick:function(){e.history.push(t.path)}},t.title)}))),r.createElement("section",{className:"common-header-tabs"},c&&c.map(function(t,n){return r.createElement("a",{onClick:function(){e.onTabClick(t.id)},className:"".concat(s===t.id?"tab-active":""," ")},r.createElement("span",null,t.title),t.tipComponent&&t.tipComponent())})))}},1421:function(e,t,n){},1422:function(e,t,n){},1423:function(e,t,n){"use strict";var r=function(e){var t=e;return 15===e.length&&(t=function(e){if(/^\d{15}$/.test(e)){e=e.substr(0,6)+"19"+e.substr(6,e.length-6);for(var t=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2],n=0,r=0;r<e.length;r++)n+=parseInt(e.substr(r,1))*t[r];return e+["1","0","X","9","8","7","6","5","4","3","2"][n%11]}return e}(e)),function(e){if(!/^\d{17}(\d|x)$/i.test(e))return!1;return null!=={11:"北京",12:"天津",13:"河北",14:"山西",15:"内蒙",21:"辽宁",22:"吉林",23:"黑龙",31:"上海",32:"江苏",33:"浙江",34:"安徽",35:"福建",36:"江西",37:"山东",41:"河南",42:"湖北",43:"湖南",44:"广东",45:"广西",46:"海南",50:"重庆",51:"四川",52:"贵州",53:"云南",54:"西藏",61:"陕西",62:"甘肃",63:"青海",64:"宁夏",65:"新疆",71:"台湾",81:"香港",82:"澳门",83:"台湾",91:"国外"}[parseInt(e.substr(0,2))]}(t)},o=function(e){return/^[HMhm]{1}([0-9]{8})$/.test(e)},a=function(e){return/^[0-9]{8}$/.test(e)||/^[0-9]{10}$/.test(e)},i=function(e){return/^[a-zA-Z]{5, 17}$/.test(e)||/^[a-zA-Z0-9]$/.test(e)},c=n(11);function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.d(t,"a",function(){return u});var l={isNonEmpty:function(e,t,n){if(0!==e&&c.a.isEmpty(e))return n&&n(),t},maxLength:function(e,t,n,r){if(e.length>t)return r&&r(),n},minLength:function(e,t,n,r){if(e.length<t)return r&&r(),n},isEmail:function(e,t,n){if(!/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(e))return n&&n(),t},isMobile:function(e,t,n){if(!/^(13[0-9]|14[57]|15[012356789]|16[0-9]|18[0-9]|17[0-9]|19[0-9])\d{8}$/.test(e))return n&&n(),t},isID:function(e,t,n,c){var s=null;if("id"===t?s=r:"HKMC"===t?s=o:"TW"===t?s=a:"PSPort"===t&&(s=i),!s(e))return c&&c(),n},isNumber:function(e,t,n){if(e&&Number.isNaN(Number(e)))return n&&n(),t},isHexColor:function(e,t,n){var r=e.toString();if(!r||!function(e){if("#"!==e[0])return!1;var t=e.slice(1);return 6===t.length&&/^[0-9a-fA-f]{6}$/.test(t)}(r))return n&&n(),t},customReg:function(e,t,n,r){var o=e.toString();if(!o||!new RegExp(t).test(o))return r&&r(),n}},u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.cache=[]}var t,n,r;return t=e,(n=[{key:"add",value:function(e,t){var n=this,r=!0,o=!1,a=void 0;try{for(var i,c=function(){var t=i.value,r=t.strategy.split(":");n.cache.push(function(){var n=r.shift();return r.unshift(e),r.push(t.errMsg),r.push(t.cb),l[n].apply(null,r)})},s=t[Symbol.iterator]();!(r=(i=s.next()).done);r=!0)c()}catch(e){o=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw a}}}},{key:"start",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,o=this.cache[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var a=(0,r.value)();if(a)return a}}catch(e){t=!0,n=e}finally{try{e||null==o.return||o.return()}finally{if(t)throw n}}}}])&&s(t.prototype,n),r&&s(t,r),e}()},1424:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n(1);n(1425);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var l={hot:"hot",normal:"normal",wait:"wait",block:"block"},u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i(this,c(t).apply(this,arguments))}var n,o,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){var e=this.props,t=e.text,n=e.type;return r.createElement("span",{className:"status-text ".concat(l[n])},r.createElement("span",{className:"status-text-dot ".concat(l[n])}),r.createElement("span",null,t))}}])&&a(n.prototype,o),u&&a(n,u),t}()},1425:function(e,t,n){},1438:function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNTY0NjMxNTY0MTkyIiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwODggMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjQ3MDYiIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjEyLjUiIGhlaWdodD0iMjAwIj48ZGVmcz48c3R5bGUgdHlwZT0idGV4dC9jc3MiPjwvc3R5bGU+PC9kZWZzPjxwYXRoIGQ9Ik0xMDQzLjcxMiAyODMuNzc2QzExMDIuMDggMjI1LjQ3MiAxMDk1LjU1MiAxMjQuMDk2IDEwMjkuMDU2IDU3LjYgOTYyLjQzMi04Ljg5NiA4NjEuMTItMTUuNDg4IDgwMi44OCA0Mi44OEw3MjcuMjk2IDExOC41OTIgOTY4LjE5MiAzNTkuNDg4IDEwNDMuNzEyIDI4My43NzYgMTA0My43MTIgMjgzLjc3NloiIHAtaWQ9IjQ3MDciIGZpbGw9IiM4MzgzODQiPjwvcGF0aD48cGF0aCBkPSJNNDEzLjk1MiA5MTMuNjY0IDgwNy4zNiA1MjAuMTkyIDg1Ni43NjggNTY5LjYgOTU4LjE0NCA0NjguMDk2IDYxOC4zNjggMTI4LjMyIDUxNi45MjggMjI5LjY5NiA1NjYuNCAyNzkuMTY4IDE3Mi45MjggNjcyLjUxMiA2NS4yOCA5NzIuODY0IDExMy41MzYgMTAyMS4xMiA0MTMuOTUyIDkxMy42NjQgNDEzLjk1MiA5MTMuNjY0Wk02MzQuNjI0IDM0Ny4zOTIgNzM5LjI2NCA0NTIuMDk2IDMzOC40OTYgODUyLjczNiAxNzIuNDggOTE0LjE3NiAyMzMuODU2IDc0OC4wMzIgNjM0LjYyNCAzNDcuMzkyIDYzNC42MjQgMzQ3LjM5MloiIHAtaWQ9IjQ3MDgiIGZpbGw9IiM4MzgzODQiPjwvcGF0aD48L3N2Zz4="},1457:function(e,t,n){},1458:function(e,t,n){},1459:function(e,t,n){},1460:function(e,t,n){e.exports=n.p+"assets/img/transparent.png?f61eb907f32bef228297ef0181be2cf3"},1514:function(e,t,n){"use strict";n.r(t);var r=n(2),o=n(1),a=n.n(o),i=n(109),c=n(200),s=n(120),l=n(72),u=n.n(l),m=(n(249),n(1369)),p=n.n(m),f=(n(1368),n(1457),n(110)),d=n(251),h=n.n(d),g=n(1420),b=n(1419),v=n(1373),y=n.n(v),E=(n(1372),n(352)),w=n.n(E),N=(n(248),n(146)),S=n.n(N),C=(n(167),n(1381)),k=n.n(C),O=(n(1380),n(23)),j=n.n(O),M=(n(351),n(1379)),P=n.n(M),I=(n(1378),n(580)),x=n.n(I),D=(n(579),n(202)),R=n.n(D),L=(n(355),n(353)),T=n.n(L),z=(n(578),n(356)),B=n.n(z),A=(n(587),n(1371)),Y=n.n(A),_=(n(1370),n(1397)),$=n.n(_),F=(n(1396),n(1458),n(1423)),V=n(58),H=n(11),U=n(147),W=n.n(U),G=n(16),Q=n.n(G),Z=n(1424),q=n(1405),X=n(1438),J=n.n(X);n(1459);function K(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function ee(e){return(ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function te(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ne(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function re(e,t,n){return t&&ne(e.prototype,t),n&&ne(e,n),e}function oe(e,t){return!t||"object"!==ee(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ae(e){return(ae=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ie(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ce(e,t)}function ce(e,t){return(ce=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var se=function(){return a.a.createElement("img",{src:J.a,alt:""})},le="#1890ff",ue=function(e){function t(){var e;return te(this,t),(e=oe(this,ae(t).apply(this,arguments))).handleSystem=function(t){return e.props.handleChange({hex:t.target.value,a:e.props.alpha})},e}return ie(t,a.a.Component),re(t,[{key:"render",value:function(){var e=this.props.hex;return a.a.createElement("div",{className:"system-color-picker-wrapper"},a.a.createElement(j.a,{component:se,style:{fontSize:14}}),a.a.createElement("input",{className:"system-color-picker",type:"color",value:e,onChange:this.handleSystem}))}}]),t}(),me=function(e){function t(){var e;return te(this,t),(e=oe(this,ae(t).apply(this,arguments))).state={color:le,colorPickerPosition:[0,0]},e.handleChange=function(t){e.props.onColorConfirm&&e.props.onColorConfirm(Object(q.b)(t).hex)},e.handleConfirm=function(t){e.props.onColorConfirm&&e.props.onColorConfirm(Object(q.b)(t).hex)},e.hideColorPicker=function(){e.props.hideColorPicker&&e.props.hideColorPicker()},e.handleDragStart=function(t){var n=function(t){e.setState({colorPickerPosition:[t.clientX,t.clientY]}),e.props.setColorPickerPosition&&e.props.setColorPickerPosition([t.clientX,t.clientY])};document.addEventListener("mousemove",n),document.addEventListener("mouseup",function e(){document.removeEventListener("mousemove",n),document.removeEventListener("mouseup",e)})},e.setColorPickerPosition=function(t,n){var r=K(e.state.colorPickerPosition,2),o=r[0],a=r[1],i=t,c=n;e.setState({colorPickerPosition:[o+i,a+c]})},e}return ie(t,o["Component"]),re(t,[{key:"componentDidMount",value:function(){this.props.onRef(this)}},{key:"componentDidUpdate",value:function(){if(this.props.showColorPicker){var e=document.querySelector(".color-picker-header .icon.dora");e&&(e.innerHTML="x")}}},{key:"render",value:function(){var e=this.props.color,t=this.props,n=t.showColorPicker,r=K(t.colorPickerPosition,2),o=r[0],i=r[1];return n&&a.a.createElement("div",{style:{position:"fixed",top:i,left:o}},a.a.createElement(q.a,{color:e,onConfirm:this.handleConfirm,onClose:this.hideColorPicker,onChange:this.handleChange,onDragStart:this.handleDragStart},a.a.createElement(ue,null)))}}]),t}();me.defaultProps={colorPickerPosition:[0,0],color:le};var pe=n(1460),fe=n.n(pe),de=n(585),he=n.n(de),ge=n(1382),be=n.n(ge);function ve(e){return(ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ye(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Ee(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function we(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ne(e){return(Ne=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Se(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ce(e,t){return(Ce=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ke=function(){return o.createElement("img",{src:J.a,alt:""})},Oe=!1,je=y.a.Item,Me=T.a.Option,Pe=Y.a.RangePicker,Ie=p.a.confirm,xe=w.a.TextArea,De=o.createElement("div",null,o.createElement(j.a,{type:"plus"}),o.createElement("div",{className:"ant-upload-text"},"上传图片")),Re=function(e,t,n){return{labelCol:{span:e,offset:n},wrapperCol:{span:t}}},Le=function(e){function t(){var e,n,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,a=Ne(t).apply(this,arguments),(e=!a||"object"!==ve(a)&&"function"!=typeof a?Se(n):a).$selectRef=null,e.$colorPicker=null,e.state={breadcrumbs:[],mode:"add",previewImage:"",previewVisible:!1,fileList:[],selectVisible:!1,inputValue:void 0,shoeOptions:[],shoeOptionsMeta:{total:0,pageNum:1,pageSize:20},showColorPicker:!1,colorField:"",btnLoading:!1,colorPickerPosition:[0,0]},e.init=function(){var t=H.a.getPageBreadcrumb(e.props.location.pathname),n=e.$qs.parse(e.props.location.search);e.setState({breadcrumbs:t,mode:0==n.id?"add":"edit"},function(){e.state.mode});var r=document.getElementsByClassName("color-tube"),o=Se(e);if(!H.a.isEmpty(r))for(var a=0;a<r.length;a++)r[a].onclick=function(e){o.setState({colorPickerPosition:[e.clientX+30,e.clientY-20]})}},e.renderEditor=function(){var t=e.props.shoe,n=t.setCurrentNewShoe,r=t.currentShowNewShoe,a=e.props.form.getFieldDecorator;return o.createElement(y.a,{className:"editor-form"},o.createElement(je,null,o.createElement("h2",{className:"editor-form-title form-title"},"基本信息")),e.renderSpecificShoe(),o.createElement(je,Object.assign({label:"介绍文案"},Re(2,8),{required:!0}),a("content",{initialValue:r&&r.content})(o.createElement(xe,{placeholder:"请输入介绍文案",rows:6,onChange:function(e){n({content:e.target.value},!1)}}))),o.createElement(je,null,o.createElement("h2",{className:"editor-form-title form-title"},"配置信息")),e.renderConfigInfo(),o.createElement(je,null,o.createElement("h2",{className:"editor-form-title form-title"},"更多信息")),e.renderMoreInfo(),o.createElement(je,{className:"editor-form-btns"},o.createElement(S.a,{type:"primary",onClick:e.handleSubmit},"保存"),o.createElement(S.a,{onClick:e.goBack},"取消")))},e.openColorPicker=function(t,n){e.setState({showColorPicker:!0,colorField:t},function(){e.$colorPicker.setColorPickerPosition(n.clientX,n.clientY)})},e.hideColorPicker=function(){e.setState({showColorPicker:!1,colorField:""})},e.renderConfigInfo=function(){var t=e.props.shoe,n=t.currentShowNewShoe,r=t.setCurrentNewShoe,a=e.props.form.getFieldDecorator;return o.createElement(o.Fragment,null,e.renderUploadComponent({label:"选择首页配图",field:"photoPath",format:"image/png",required:!0,size:{width:600,height:380},tip:"*尺寸： 600*380px，跑鞋左鞋外侧样式。 *仅限 png 格式，大小限制 300 kb。",limit:300}),o.createElement(je,Object.assign({label:"指示器配色"},Re(2,6),{required:!0}),a("photoBgColor",{initialValue:n&&n.photoBgColor})(o.createElement(w.a,{addonBefore:"#",placeholder:"请输入指示器配色",onChange:function(e){r({photoBgColor:"#"+e.target.value},!1)},suffix:o.createElement(j.a,{onClick:e.openColorPicker.bind(Se(e),"photoBgColor"),component:ke,style:{width:14},className:"color-tube"})}))),o.createElement(je,Object.assign({label:"价格配色"},Re(2,6)),a("buttonColor",{initialValue:n&&n.buttonColor})(o.createElement(w.a,{addonBefore:"#",placeholder:"请输入价格配色",onChange:function(e){r({buttonColor:"#"+e.target.value},!1)},suffix:o.createElement(j.a,{onClick:e.openColorPicker.bind(Se(e),"buttonColor"),component:ke,style:{width:14},className:"color-tube"})}))),o.createElement(je,Object.assign({label:"是否可购买"},Re(2,6),{required:!0}),o.createElement($.a,{checked:n&&1==n.canBuy,onChange:function(e){r({canBuy:e?1:0},!1)}})),o.createElement(je,Object.assign({label:"跳转链接"},Re(2,6),{required:!0}),a("jump_status",{initialValue:n&&n.jumpUrl?1:0})(o.createElement(B.a.Group,{onChange:function(t){e.props.form.setFieldsValue({jump_status:t.target.value})}},o.createElement(B.a,{value:1},"有"),o.createElement(B.a,{value:0},"无"))),0!=e.props.form.getFieldValue("jump_status")&&o.createElement(w.a,{value:n.jumpUrl,placeholder:"请输入链接",onChange:function(e){r({jumpUrl:e.target.value},!1)}})))},e.toggleColorPicker=function(t){e.setState({showColorPicker:t})},e.renderMoreInfo=function(){var t=e.props.shoe,n=t.currentShowNewShoe,r=t.setCurrentNewShoe,a=e.props.form.getFieldDecorator,i={display:"block",marginBottom:12};return o.createElement(o.Fragment,null,o.createElement(je,Object.assign({label:"首页排序"},Re(2,6)),a("ranking",{initialValue:n&&n.ranking})(o.createElement(P.a,{min:1,onChange:function(e){r({ranking:e},!1)}})),o.createElement("span",{className:"tip"},"*v5.2 展示 1-5 个，数字越大越靠前。")),o.createElement(je,Object.assign({label:"是否速递",required:!0},Re(2,6),{className:"editor-upshelf"}),a("canOnline",{initialValue:n&&n.canOnline})(o.createElement(B.a.Group,{onChange:function(e){r({canOnline:e.target.value},!1)}},o.createElement(B.a,{style:i,value:1},"是"),o.createElement(B.a,{style:i,value:0},"否"))),n&&1==n.canOnline&&o.createElement(Pe,{style:{width:400},showTime:!0,format:"YYYY-MM-DD HH:mm:ss",disabledDate:function(e){return e&&e<Q()().startOf("day")},value:n.time_range?n.time_range:[],onChange:function(t){var n=t?t.map(function(e){return e.valueOf()}):[];r(Object.assign({},e.props.shoe.currentNewShoe,{publicStartTime:n[0],publicEndTime:n[1]}),!1)}})))},e.renderSpecificShoe=function(){var t=e.props.shoe,n=t.currentShowNewShoe,a=n.shoeId,i=n.shoeName,c=n.brandName,s=n.firstPublish,l=n.canOnline,u=n.price,m=n.publicStartTime,p=t.setCurrentNewShoe,f=e.state,d=f.mode,h=f.selectVisible,g=f.shoeOptions,b=i&&i.length>20,v=o.createElement(x.a,{key:a,closable:"add"===d,onClose:function(){return e.handleClose(a)}},b?"".concat(i.slice(0,20),"..."):i);return o.createElement(je,Object.assign({label:"选择跑鞋"},Re(2,6),{required:!0}),o.createElement("div",{className:"editor-specific-shoe"},a&&(b?o.createElement(R.a,{title:i,key:a},v):v),h&&o.createElement(T.a,{ref:function(t){return e.$selectRef=t},showSearch:!0,filterOption:!1,placeholder:"请输入跑鞋型号",onFocus:function(){return r.a(Se(e),void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$api.shoe.getSkuList({pageNum:1,pageSize:20});case 2:t=e.sent,this.setState({shoeOptions:t.data.data.list,shoeOptionsMeta:{total:t.data.data.total,pageNum:t.data.data.pageNum,pageSize:t.data.data.pageSize}});case 4:case"end":return e.stop()}},e,this)}))},onPopupScroll:he()(function(t){return r.a(Se(e),void 0,void 0,regeneratorRuntime.mark(function e(){var n,r,o,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.state,r=n.shoeOptions,o=n.shoeOptionsMeta,!(!(!t||!t.target)&&t.target.scrollHeight-(t.target.scrollTop+t.target.clientHeight)<=10&&o.total>r.length)){e.next=7;break}return e.next=5,this.$api.shoe.getSkuList({pageNum:o.pageNum+1,pageSize:20});case 5:a=e.sent,this.setState({shoeOptions:be()(this.state.shoeOptions,a.data.data.list,"shoeId"),shoeOptionsMeta:{total:a.data.data.total,pageNum:a.data.data.pageNum,pageSize:a.data.data.pageSize}});case 7:case"end":return e.stop()}},e,this)}))},300),onSearch:e.onShoeSearch,onSelect:e.onShoeSelect,onBlur:e.onShoeBlur},g.map(function(e){return o.createElement(Me,{key:e.shoeId,value:e.shoeId,$data:e},e.shoeName)})),!h&&!a&&o.createElement(x.a,{style:{background:"#fff",borderStyle:"dashed"},onClick:function(){e.setState({selectVisible:!0},function(){return e.$selectRef.focus()})}},o.createElement(j.a,{type:"plus"}),"添加"),a&&o.createElement("div",{className:"editor-specific-shoe-panel"},o.createElement("div",{className:"editor-specific-shoe-panel-left"},o.createElement("p",{className:"editor-specific-shoe-field"},o.createElement("span",{className:"editor-specific-shoe-label"},"跑鞋品牌："),o.createElement("span",{className:"editor-specific-shoe-value"},c)),o.createElement("p",{className:"editor-specific-shoe-field"},o.createElement("span",{className:"editor-specific-shoe-label"},"跑鞋型号："),o.createElement("span",{className:"editor-specific-shoe-value"},i)),o.createElement("p",{className:"editor-specific-shoe-field"},o.createElement("span",{className:"editor-specific-shoe-label"},"是否首发："),o.createElement("span",{className:"editor-specific-shoe-value empty"},1==s?"是":"否")),o.createElement("p",{className:"editor-specific-shoe-field"},o.createElement("span",{className:"editor-specific-shoe-label"},"官方售价："),o.createElement(P.a,{style:{width:220},placeholder:"请输入官方售价",value:u,onChange:function(e){p({price:e?100*Number(e):void 0},!1)}}))),o.createElement("div",{className:"editor-specific-shoe-panel-right"},o.createElement("p",{className:"editor-specific-shoe-field"},e.renderUploadComponent({label:"品牌 logo",field:"photoLogo",tip:"*80*80，仅限 png 格式 图片内容为白色",className:"upload-transparent-bg",format:"image/png",labelCol:6,wrapperCol:18})),o.createElement("p",{className:"editor-specific-shoe-field"},o.createElement("span",{className:"editor-specific-shoe-label"},"状态："),o.createElement("span",{className:"editor-specific-shoe-empty"},o.createElement(Z.a,{type:1==l?"normal":Date.now()>m?"waiting":"block",text:1==l?"上架":Date.now()>m?"待上架":"未上架"})))))))},e.renderUploadComponent=function(t){var n=e.props.form.getFieldDecorator,r=e.props.shoe,a=r.currentShowNewShoe,i=r.setCurrentNewShoe;return o.createElement(y.a.Item,{className:"form-upload",label:o.createElement("span",null,o.createElement("span",null,t.label)),labelCol:{span:t.labelCol||2},wrapperCol:{span:t.wrapperCol||18},required:t.required||!1},n(t.field,{initialValue:a&&a[t.field]})(o.createElement(k.a,{key:t.field,className:"logo-square ".concat(t.className),accept:t.format||"image/*",action:V.c,listType:"picture-card",beforeUpload:function(n){if(t.format){var r=n.type===t.format;return r||e.$msg.error("请上传正确格式图片"),r}return!0},onPreview:e.handlePreview,onRemove:function(e){i(Ee({},t.field,void 0),!1)},customRequest:function(n){return e.customRequest(t,n)},fileList:a&&a[t.field]},De)),o.createElement("span",{className:"form-upload-tip"},t.tip))},e.handlePreview=function(t){e.setState({previewImage:t.url||t.thumbUrl,previewVisible:!0})},e.handleUpload=function(t,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return r.a(Se(e),void 0,void 0,regeneratorRuntime.mark(function e(){var r,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.limit){e.next=3;break}if(!(n.file.size/1024>t.limit)){e.next=3;break}return e.abrupt("return",this.$msg.error("图片大小不得超过 ".concat(t.limit,"kb")));case 3:r=(r=(r=ye(n.fileList)).slice(-o)).map(function(e){return e.url=e.thumbUrl,e}),a=H.a.isEmpty(r),this.props.shoe.setCurrentNewShoe(Ee({},t.field,a?void 0:r[0].url||""),!1);case 8:case"end":return e.stop()}},e,this)}))},e.customRequest=function(t,n){var r=e.props.shoe.setCurrentNewShoe;if(t.limit&&n.file.size/1024>t.limit)return e.$msg.error("图片大小不得超过 ".concat(t.limit,"kb")),Promise.reject(0);function o(){H.a.uploadFile({file:n.file,fileName:n.file.name,ypModel:"run_shoe"}).then(function(e){r(Ee({},t.field,e),!1)})}t.size?H.a.getFileInfo(n.file,function(n){n.width!==t.size.width||n.height!==t.size.height?e.$msg.warning("请上传正确尺寸图片"):o()}):o()},e.onShoeSearch=W()(function(t){return r.a(Se(e),void 0,void 0,regeneratorRuntime.mark(function e(){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$api.shoe.getSkuList({pageNum:1,pageSize:10,shoeName:t});case 2:n=e.sent,r=n.data.data.list,this.setState({shoeOptions:r});case 5:case"end":return e.stop()}},e,this)}))},500),e.onShoeSelect=function(t,n){var r=n.props.$data;e.props.shoe.setCurrentNewShoe({brandId:r.brandId,brandName:r.brandName,shoeId:r.shoeId,shoeName:r.shoeName,price:r.price,photoLogo:r.brandInfo?r.brandInfo.brandIconSmall:""},!1),e.setState({selectVisible:!1})},e.onShoeBlur=function(){e.setState({selectVisible:!1})},e.handleClose=function(t){e.props.shoe.setCurrentNewShoe({brandId:void 0,brandName:void 0,shoeId:void 0,photoLogo:void 0,price:void 0,shoeName:void 0},!1)},e.handleSubmit=function(t){return r.a(Se(e),void 0,void 0,regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.props.form.validateFields(function(e,n){return r.a(t,void 0,void 0,regeneratorRuntime.mark(function t(){var n,r,o,a,i=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=10;break}if(n=this.props.shoe.currentNewShoe,r=this.state.mode,o={brandId:n.brandId,brandName:n.brandName,photoLogo:n.photoLogo,content:n.content,photoPath:n.photoPath,photoBgColor:n.photoBgColor,buttonColor:n.buttonColor,canBuy:n.canBuy||0,jumpUrl:n.jumpUrl||"",ranking:n.ranking,canOnline:n.canOnline,shoeId:n.shoeId,shoeName:n.shoeName,price:Number(n.price)||0},1==n.canOnline?(o.publicStartTime=Q()(n.publicStartTime).format("YYYY-MM-DD HH:mm:ss"),o.publicEndTime=Q()(n.publicEndTime).format("YYYY-MM-DD HH:mm:ss")):(o.publicStartTime=Q()("1972-01-01").format("YYYY-MM-DD HH:mm:ss"),o.publicEndTime=Q()("1972-01-01").format("YYYY-MM-DD HH:mm:ss")),!(a=this.getValidation(n))){t.next=8;break}return t.abrupt("return",this.$msg.warn(a));case 8:this.setState({btnLoading:!0}),Oe||(Oe=!0,"add"===r?(o.id=0,this.$api.shoe.updateNewShoe(o).then(function(e){i.$msg.success("新鞋速递 ".concat(n.shoeName," 添加成功")),i.setState({btnLoading:!1}),setTimeout(function(){Oe=!1,i.goBack();var e=i.props.shoe.newShoeListMeta,t=e.pageNum,n=e.pageSize;i.$store.shoe.getNewShoeList({pageNum:t,pageSize:n,orderBy:"ranking",sort:"desc"})},1500)})):(o.id=n.id,this.$api.shoe.updateNewShoe(o).then(function(e){i.$msg.success("新鞋速递 ".concat(n.shoeName," 编辑成功")),i.setState({btnLoading:!1}),setTimeout(function(){Oe=!1,i.goBack();var e=i.props.shoe.newShoeListMeta,t=e.pageNum,n=e.pageSize;i.$store.shoe.getNewShoeList({pageNum:t,pageSize:n,orderBy:"ranking",sort:"desc"})},1500)})));case 10:case"end":return t.stop()}},t,this)}))});case 1:case"end":return e.stop()}},e,this)}))},e.getValidation=function(e){var t,n,r=new F.a;if(r.add(e.shoeId,[{strategy:"isNonEmpty",errMsg:"请选择待速递的新鞋"}]),null!=e.price){r.add(e.price,[{strategy:"isNumber",errMsg:"请输入正确价格"}]);var o=(t=(e.price/100).toString().split("."))[0],a=t[1];r.add(o,[{strategy:"maxLength:6",errMsg:"跑鞋价格不得超过 6 位"}]),H.a.isEmpty(a)||r.add(a,[{strategy:"maxLength:2",errMsg:"跑鞋价格小数位不得超过 2 位"}])}else t=e.price,r.add(t,[{strategy:"maxLength:6",errMsg:"跑鞋价格不得超过 6 位"}]);r.add(e.content,[{strategy:"isNonEmpty",errMsg:"介绍不能为空"},{strategy:"maxLength:1000",errMsg:"介绍不得超过 1000 个字"}]),r.add(e.photoPath,[{strategy:"isNonEmpty",errMsg:"首页配图不能为空"}]),r.add(e.photoBgColor,[{strategy:"isNonEmpty",errMsg:"指示器配色不能为空"},{strategy:"isHexColor",errMsg:"指示器配色，请输入合法的 6 位十六进制色值"}]),r.add(e.buttonColor,[{strategy:"isNonEmpty",errMsg:"价格配色不能为空"},{strategy:"isHexColor",errMsg:"价格配色，请输入合法的 6 位十六进制色值"}]),n=null!=e.ranking?e.ranking.toString():e.ranking,r.add(n,[{strategy:"isNonEmpty",errMsg:"首发排序不能为空"},{strategy:"maxLength:5",errMsg:"首页排序不得超过 5 位"}]),1==e.canOnline&&(r.add(e.publicStartTime,[{strategy:"isNonEmpty",errMsg:"速递时间段不能为空"}]),r.add(e.publicEndTime,[{strategy:"isNonEmpty",errMsg:"速递时间段不能为空"}]));var i=r.start();return i||(null==e.canOnline&&(i="请选择是否速递"),i)},e.goBack=function(){setTimeout(function(){e.props.history.goBack(),e.props.shoe.setCurrentNewShoe({}),H.a.rmLStorage("currentNewShoe")},300)},e.renderModal=function(){var t=e.state,n=t.previewImage,r=t.previewVisible;return o.createElement(p.a,{visible:r,footer:null,bodyStyle:{backgroundImage:"url(".concat(fe.a,")")},onCancel:e.handleCancel},o.createElement("img",{alt:"example",style:{width:"100%"},src:n}))},e.handleCancel=function(){e.setState({previewVisible:!1})},e.onColorChange=function(t,n){e.props.shoe.setCurrentNewShoe(Ee({},n,t),!1)},e.setColorPickerPosition=function(t){e.setState({colorPickerPosition:t})},e}var n,a,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ce(e,t)}(t,i["a"]),n=t,(a=[{key:"componentDidMount",value:function(){return r.a(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(t=H.a.getLStorage("currentNewShoe"))?Ie({title:"跑鞋速递恢复操作",content:"检测到您存在未提交跑鞋速递信息，请问是否从上次编辑的跑鞋速递中恢复状态？",onOk:function(){n.props.shoe.setCurrentNewShoe(t)},onCancel:function(){n.init(),H.a.rmLStorage("currentNewShoe")}}):this.init();case 2:case"end":return e.stop()}},e,this)}))}},{key:"componentWillUnmount",value:function(){this.props.shoe.setCurrentNewShoe({})}},{key:"render",value:function(){var e=this,t=this.state,n=t.showColorPicker,r=t.colorField,a=this.props.shoe.currentNewShoe;return o.createElement("div",{className:"editor"},o.createElement("section",{className:"editor-content panel-block"},this.renderEditor()),o.createElement("section",{className:"editor-modal"},this.renderModal()),o.createElement("section",null,o.createElement(me,{color:a[r],showColorPicker:n,onColorConfirm:function(t){return e.onColorChange(t,r)},hideColorPicker:this.hideColorPicker,onRef:function(t){return e.$colorPicker=t},colorPickerPosition:this.state.colorPickerPosition,setColorPickerPosition:this.setColorPickerPosition})))}}])&&we(n.prototype,a),c&&we(n,c),t}(),Te=Le=r.b([y.a.create(),Object(f.b)("common","shoe"),f.c],Le),ze=n(1383),Be=n.n(ze),Ae=(n(586),n(203)),Ye=n.n(Ae);n(250);function _e(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var $e=function(e){var t=[{width:100,title:"排序",dataIndex:"ranking",sorter:!0},{width:100,title:"跑鞋 ID",dataIndex:"shoeId",sorter:!0},{width:240,title:"跑鞋型号",dataIndex:"shoeName",sorter:!0},{width:200,title:"展示信息",render:function(e,t){return o.createElement(Be.a,{content:t.content},H.a.ellipsis(t.content||" -- ",20))}},{title:"上新时间段",width:document.body.clientWidth>1600?400:280,render:function(e,t){var n=[t.publicStartTime,t.publicEndTime];return n?n.map(function(e){return e?Q()(e).format("YYYY.MM.DD HH:mm:ss"):"--"}).join(" ~ "):"--"}},{width:120,title:"首发跳转",filters:[{text:"是",value:1},{text:"否",value:0}],dataIndex:"firstPublish",filterMultiple:!1,render:function(e,t){return 1===t.firstPublish?"是":"否"}},{width:120,title:"状态",filters:[{text:"上新",value:1},{text:"未上新",value:0}],dataIndex:"canOnline",filterMultiple:!1,render:function(e,t){var n={1:"normal",0:"block",2:"waiting"}[t.canOnline],r={1:"上新",0:"未上新",2:"待上新"}[t.canOnline];return t.publicStartTime>Date.now()&&(r="待上新",n="waiting"),1==t.delFlag&&(r="删除",n="block"),o.createElement(Z.a,{type:n,text:r})}},{width:140,title:"操作",render:function(t,n){return o.createElement("div",{className:"common-list-table-operation"},o.createElement("span",{onClick:function(){return e.goToEditor(n)}},"编辑"),o.createElement("span",{className:"common-list-table-operation-spliter"}),o.createElement(Ye.a,{overlay:e.renderMenu(n)},o.createElement("span",null,"更多 ",o.createElement(j.a,{type:"down"}))))}}],n=Object.assign({},e.props.common.paginationConfig,{total:e.props.shoe.newShoeListMeta.total,current:e.state.currentPage,onChange:function(e,t){},onShowSizeChange:function(t,n){e.resetPagination(n,t)}});return{addBtn:{title:function(){return o.createElement(S.a,{type:"primary",onClick:function(){return e.goToEditor({})}},o.createElement(j.a,{type:"plus"})," 添加")}},searcher:{batchControl:{placeholder:"请选择",showBatchControl:!H.a.isEmpty(e.state.selectedRowKeys),options:[{title:"上新",value:"upshelf"},{title:"取消上新",value:"downshelf"},{title:"删除",value:"delete"}],onBatch:function(t){e.onBatch(t)}},widgets:[{type:"SelectInput",label:"跑鞋",placeholder:"请输入跑鞋 ID 或型号",options:[{title:"跑鞋 ID",value:"shoeId"},{title:"跑鞋型号",value:"shoeName"}],inputValue:e.state.shoeValue,selectValue:e.state.shoeField,onSelectChange:function(t){e.setShoeField(t)},onInputChange:function(t){e.setShoeValue(t.target.value)},onPressEnter:function(t){e.onSearch()}}],onSearch:function(){e.onSearch()},onReset:function(){e.onReset()}},table:{rowKey:"id",columns:t,loading:e.state.tableLoading,current:e.state.currentPage,dataSource:e.props.shoe.newShoeList,pagination:n,onChange:function(t,n,r){var o={pageNum:t.current,pageSize:t.pageSize};if(!H.a.isEmpty(n))for(var a=0,i=Object.entries(n);a<i.length;a++){var c=_e(i[a],2),s=c[0],l=c[1];o[s]=l?l[0]:void 0}H.a.isEmpty(r)?(o.orderBy="ranking",o.sort="desc"):(o.orderBy="".concat(r.field),o.sort="".concat("descend"===r.order?"desc":"asc")),e.setState({filter:Object.assign({},e.state.filter,o),currentPage:t.current},function(){e.getDataList(e.state.filter)})}}}};function Fe(e){return(Fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ve(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function He(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ue(e){return(Ue=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function We(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ge(e,t){return(Ge=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Qe=p.a.confirm,Ze=[{title:"跑鞋评价 >",path:"/admin/shoe/racing/comment/comment-list"},{title:"跑鞋热词 >",path:"/admin/shoe/racing/term"}],qe=function(e){function t(){var e,n,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,a=Ue(t).apply(this,arguments),(e=!a||"object"!==Fe(a)&&"function"!=typeof a?We(n):a).state={selectedRowKeys:[],filter:{orderBy:"ranking",sort:"desc"},shoeField:"shoeName",shoeValue:void 0,tableLoading:!1,currentPage:1},e.getDataList=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setState({tableLoading:!0,filter:Object.assign({},e.state.filter,t)},function(){return r.a(We(e),void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$store.shoe.getNewShoeList(Object.assign({},this.state.filter,t));case 2:this.setState({tableLoading:!1});case 3:case"end":return e.stop()}},e,this)}))})},e.resetPagination=function(t,n){return r.a(We(e),void 0,void 0,regeneratorRuntime.mark(function e(){var o=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({filter:Object.assign({},this.state.filter,{pageSize:t,pageNum:n})},function(){return r.a(o,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=this.state.filter,this.getDataList(t);case 2:case"end":return e.stop()}},e,this)}))});case 1:case"end":return e.stop()}},e,this)}))},e.onSearch=function(){return r.a(We(e),void 0,void 0,regeneratorRuntime.mark(function e(){var t,n=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this.state.filter).shoeId||!Number.isNaN(Number(t.shoeId))){e.next=3;break}return e.abrupt("return",this.$msg.error("请输入正确 shoeId"));case 3:this.setState({filter:Object.assign({},t,{pageNum:1}),currentPage:1},function(){n.getDataList(n.state.filter)});case 4:case"end":return e.stop()}},e,this)}))},e.onReset=function(){return r.a(We(e),void 0,void 0,regeneratorRuntime.mark(function e(){var t,n=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t={pageSize:this.state.filter.pageSize,pageNum:1,sort:"desc",orderBy:"ranking"},this.setState({shoeValue:void 0,filter:t,currentPage:1},function(){n.getDataList(n.state.filter)});case 2:case"end":return e.stop()}},e,this)}))},e.onBatch=function(t){return r.a(We(e),void 0,void 0,regeneratorRuntime.mark(function e(){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.state.selectedRowKeys,!t||!H.a.isEmpty(n)){e.next=3;break}return e.abrupt("return",this.$msg.warning("请选择至少一条记录"));case 3:"upshelf"===t?this.doOperation(n.join(",")):"delete"===t?this.deleteRecord(n.join(",")):"downshelf"===t&&this.cancelOperation(n.join(","));case 4:case"end":return e.stop()}},e,this)}))},e.setShoeField=function(t){var n=e.state.filter;"shoeId"!==t?delete n.shoeId:"shoeName"!==t&&delete n.shoeName,e.setState({shoeField:t,shoeValue:void 0,filter:Object.assign({},n,Ve({},t,void 0))})},e.setShoeValue=function(t){e.setState({shoeValue:t,filter:Object.assign({},e.state.filter,Ve({},e.state.shoeField,t||void 0))})},e.goToEditor=function(t){e.props.shoe.setCurrentNewShoe(t,!0,!1);var n="/admin/shoe/repo/new/editor?id=".concat(h()(t)?0:t.id);e.props.history.push(n)},e.renderMenu=function(t){var n=o.createElement("span",{onClick:e.doOperation.bind(We(e),t.id)},"速递"),r=o.createElement("span",{onClick:e.cancelOperation.bind(We(e),t.id)},"取消速递"),a=o.createElement("span",{onClick:e.deleteRecord.bind(We(e),t.id)},"删除"),i={0:[n,a],1:[r,a],2:[n,a]},c=i[t.canOnline];return t.publicStartTime>Date.now()&&(c=[n,a]),i[t.canOnline]&&o.createElement(u.a,null,c.map(function(e){return o.createElement(u.a.Item,null,e)}))},e.doOperation=function(t){return r.a(We(e),void 0,void 0,regeneratorRuntime.mark(function e(){var n=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:Qe({title:"新鞋速递操作",content:o.createElement("span",null,"请问是否速递当前选中的跑鞋"),onOk:function(){return r.a(n,void 0,void 0,regeneratorRuntime.mark(function e(){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$api.shoe.updateNewShoeStatus({canOnline:1,id:t});case 2:0==(n=e.sent).data.ret?(this.$msg.success("新鞋取消速递成功"),this.getDataList(this.state.filter)):this.$msg.error(n.data.msg);case 4:case"end":return e.stop()}},e,this)}))},onCancel:function(){return r.a(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}))}});case 1:case"end":return e.stop()}},e)}))},e.cancelOperation=function(t){return r.a(We(e),void 0,void 0,regeneratorRuntime.mark(function e(){var n=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:Qe({title:"新鞋取消速递操作",content:o.createElement("span",null,"请问是否取消速递当前选中的跑鞋"),onOk:function(){return r.a(n,void 0,void 0,regeneratorRuntime.mark(function e(){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$api.shoe.updateNewShoeStatus({canOnline:0,id:t});case 2:0==(n=e.sent).data.ret?(this.$msg.success("新鞋取消速递成功"),this.getDataList(this.state.filter)):this.$msg.error(n.data.msg);case 4:case"end":return e.stop()}},e,this)}))},onCancel:function(){return r.a(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}))}});case 1:case"end":return e.stop()}},e)}))},e.deleteRecord=function(t){return r.a(We(e),void 0,void 0,regeneratorRuntime.mark(function e(){var n=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:Qe({title:"新鞋速递删除操作",content:o.createElement("span",null,"请问是否确定删除当前选中速递跑鞋"),onOk:function(){return r.a(n,void 0,void 0,regeneratorRuntime.mark(function e(){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$api.shoe.deleteNewShoe({params:{id:t}});case 2:0==(n=e.sent).data.ret?(this.$msg.success("速递新鞋删除成功"),this.getDataList(this.state.filter)):this.$msg.error(n.data.msg);case 4:case"end":return e.stop()}},e,this)}))},onCancel:function(){return r.a(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}))}});case 1:case"end":return e.stop()}},e)}))},e}var n,a,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ge(e,t)}(t,i["a"]),n=t,(a=[{key:"componentDidMount",value:function(){return r.a(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=this.props.common.paginationConfig,n=t.defaultPageSize,r=t.defaultCurrent,this.resetPagination(n,r);case 2:case"end":return e.stop()}},e,this)}))}},{key:"componentDidUpdate",value:function(){"/admin/shoe/repo/new"===this.props.location.pathname&&this.props.history.replace("/admin/shoe/repo/new/list")}},{key:"render",value:function(){var e=this,t=this.props.match,n=this.props.shoe.currentNewShoe,r="/admin/shoe/repo/new/editor"===window.location.pathname?H.a.isEmpty(n)?"添加新鞋速递":"编辑新鞋速递":"新鞋速递";return o.createElement("div",null,o.createElement(g.a,Object.assign({},this.props,{links:Ze,title:r})),o.createElement(s.a,{path:"".concat(t.url,"/list"),render:function(t){return o.createElement(b.a,Object.assign({},t,{config:$e(e)}))}}),o.createElement(s.a,{path:"".concat(t.url,"/editor"),render:function(e){return o.createElement(Te,Object.assign({},e))}}))}}])&&He(n.prototype,a),c&&He(n,c),t}();qe=r.b([Object(c.a)("/admin/shoe/repo/new",{exact:!1}),Object(f.b)("common","shoe"),f.c],qe);t.default=qe}}]);