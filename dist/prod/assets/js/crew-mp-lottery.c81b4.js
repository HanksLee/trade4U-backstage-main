(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{1419:function(e,t,n){"use strict";n.d(t,"a",function(){return $});var r=n(1),a=n(109),o=(n(1422),n(146)),i=n.n(o),l=(n(167),n(353)),c=n.n(l),s=(n(578),n(352)),u=n.n(s),m=(n(248),n(1377)),p=n.n(m),d=(n(1376),n(1371)),f=n.n(d),h=(n(1370),n(168)),y=n.n(h),g=(n(354),n(23)),v=n.n(g),b=(n(351),n(582)),E=n.n(b),w=(n(581),n(584)),C=n.n(w),S=(n(583),n(580)),k=n.n(S),N=(n(579),n(11)),O=n(16),x=n.n(O);function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function L(e,t){return!t||"object"!==_(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function R(e,t){return(R=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var D=c.a.Option,I=u.a.Group,z=f.a.RangePicker,T=k.a.CheckableTag,M={SelectInput:function(e){var t=e.selectValue,n=e.inputValue,a=e.placeholder,o=e.options,i=e.onSelectChange,l=e.onInputChange,s=e.onPressEnter,m=e.selectStyle;return r.createElement(I,{compact:!0},r.createElement(c.a,{style:m?Object.assign({width:110},m):{width:110},value:t,onChange:i},o&&o.map(function(e,t){return r.createElement(D,{key:t,value:e.value},e.title)})),r.createElement(u.a,{style:{width:238},value:n,onChange:l,placeholder:a,onPressEnter:s}))},Select:function(e){var t=e.option,n=e.label,a=e.mode,o=e.onSearch,i=e.onSelect,l=e.onBlur,s=e.onFocus,u=e.value,m=e.placeholder,p=e.showSearch,d=e.width,f=e.filterOption,h=e.onChange,y=e.allowClear,g=e.onPopupScroll;return r.createElement(r.Fragment,null,n&&r.createElement("span",{className:"common-list-label"},"".concat(n,"：")),r.createElement("span",{className:"common-list-control"},r.createElement(c.a,{allowClear:y,value:u,mode:a||!1,style:{minWidth:d||258,width:d},showSearch:p,placeholder:m,filterOption:f,onSearch:o,onSelect:i,onChange:h,onBlur:l,onPopupScroll:g,onFocus:s},t.data.map(function(e){return r.createElement(D,{key:e[t.key]||e.id,value:e[t.value]||e.id,$data:e},e[t.title])}))))},DatePicker:function(e){var t=e.label,n=e.placeholder,a=e.onChange,o=e.value,i=e.style,l=e.format,c=e.showTime;return r.createElement(r.Fragment,null,t&&r.createElement("span",{className:"common-list-label"},"".concat(t,"：")),r.createElement("span",{className:"common-list-control"},r.createElement(f.a,{format:l||!1,style:i,showTime:c,placeholder:n,value:o,onChange:a})))},RangePicker:function(e){var t=e.label,n=e.alias,a=e.placeholder,o=e.onChange,l=e.value,c=e.showTime,s=e.format;return r.createElement(r.Fragment,null,t&&r.createElement("span",{className:"common-list-label"},"".concat(t,"：")),r.createElement("span",{className:"common-list-control"},r.createElement(z,{style:{width:400},showTime:c,format:s,placeholder:a,value:l,onChange:o}),r.createElement("span",{className:"common-list-control-date-alias"},!N.a.isEmpty(n)&&n.map(function(e,t){return r.createElement(i.a,{key:t,onClick:function(){return o([x()(Date.now()-864e5*e).startOf("day"),x()()])}},e," 天内")}))))},Input:function(e){var t=e.label,n=e.value,a=e.placeholder,o=e.onChange,i=e.width,l=e.onPressEnter;return r.createElement(r.Fragment,null,t&&r.createElement("span",{className:"common-list-label"},"".concat(t,"：")),r.createElement("span",{className:"common-list-control"},r.createElement(u.a,{style:{minWidth:i||258},value:n,onChange:o,placeholder:a,onPressEnter:l})))},Checkbox:function(e){var t=e.label,n=e.value,a=e.onChange;return r.createElement(y.a,{checked:n,onChange:a},t)},CheckableTag:function(e){var t=e.label,n=e.option,a=e.value,o=e.onChange;return r.createElement(r.Fragment,null,t&&r.createElement("span",{className:"common-list-label"},"".concat(t,"：")),r.createElement("span",{className:"common-list-control"},!N.a.isEmpty(n)&&n.map(function(e){return r.createElement(T,{key:e.value,checked:e.value===a,onChange:function(){o(e)}},e.title)})))},Label:function(e,t){var n=e.label;return r.createElement(r.Fragment,null,n&&r.createElement("span",{className:"common-list-label"},"".concat(n,"：")),r.createElement("span",{className:"common-list-control"},t))},Custom:function(e){return r.createElement("div",null,(void 0).props.children)}},$=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=L(this,P(t).apply(this,arguments))).state={collapse:!0},e.toggleCollapse=function(t){e.setState({collapse:!e.state.collapse})},e.renderSearcher=function(){var t=e.props.config,n=t.searcher,a=t.table,o=e.state.collapse;return n&&r.createElement("section",{className:"common-list-search"},e.renderWidgets(n.widgets),a&&a.tableHeader&&a.tableHeader(),r.createElement("div",{className:"common-list-search-right"},!n.hideSearcher&&r.createElement(r.Fragment,null,r.createElement(i.a,{type:"primary",onClick:n.onSearch},"查询"),r.createElement(i.a,{onClick:n.onReset},"重置")),n.collapseControl&&n.collapseControl.showMoreBtn&&r.createElement("span",{className:"common-list-serach-more"},r.createElement("a",{onClick:e.toggleCollapse},o?"更多":"收起"," ",r.createElement(v.a,{type:o?"down":"up"})))))},e.renderWidgets=function(t){var n=e.state.collapse,a=e.props.config.searcher;return t&&r.createElement("div",{className:"common-list-search-left"},t.map(function(t,o){return Array.isArray(t)?r.createElement("div",{key:o,className:"common-list-search-row",style:{display:a.collapseControl&&a.collapseControl.showMoreBtn&&n&&o>0?"none":"flex"}},t.map(function(t){return r.createElement("div",{key:t.label,className:"common-list-search-col",style:Object.assign({},t.style)},M[t.type]&&M[t.type](t,t.children?e.renderWidgets(t.children):null))})):r.createElement("div",{key:t.label,className:"common-list-search-row ".concat(t.className)},M[t.type]&&M[t.type](t,t.children?e.renderWidgets(t.children):null))}))},e.renderAddBtn=function(){var t=e.props.config,n=t.addBtn,a=t.searcher;return n&&r.createElement("section",{className:"common-list-addbtn",style:n.style},"function"==typeof n.title?r.createElement(n.title,null):n.title,r.createElement("div",{className:"common-list-search-batch"},a.batchControl.showBatchControl&&r.createElement(c.a,{placeholder:a.batchControl.placeholder,style:{minWidth:120},defaultValue:void 0,onChange:a.batchControl.onBatch},a.batchControl.options.map(function(e){return r.createElement(D,{key:e.value,value:e.value},e.title)}))))},e.renderTableHeader=function(){var t=e.props.config.tableHeader;return r.createElement("section",{className:"common-list-table-header"},t&&t())},e.renderTable=function(){var t=e.props.config.table,n=t.rowKey,a=t.rowSelection,o=t.columns,i=t.dataSource,l=t.pagination,c=t.onChange,s=t.loading,u=t.locale;return r.createElement("section",{className:"common-list-table"},r.createElement(p.a,{locale:u,rowKey:n||"id",rowSelection:a,columns:o,dataSource:i,loading:s,pagination:l,onChange:c}))},e.renderCards=function(){var t=e.props.config.cards,n=t.dataSource,a=t.loading,o=t.pagination,i=t.renderCard,l=t.addBtn;return r.createElement("div",{className:"common-list-cards-wrapper"},r.createElement("ul",{className:"common-list-cards"},a?r.createElement("div",{className:"common-list-cards-loading"},r.createElement(C.a,null)):r.createElement(r.Fragment,null,r.createElement("li",{className:"common-list-card add-btn"},r.createElement("div",{className:"common-list-card-item",onClick:l.onAddBtnClick},l.icon?r.createElement("img",{src:l.icon,alt:""}):r.createElement(v.a,{type:"plus-circle"}),r.createElement("p",null,l.title))),n.map(function(e){return r.createElement("li",{className:"common-list-card"},r.createElement("div",{className:"common-list-card-item"},i(e)))}))),r.createElement("section",{className:"common-list-cards-pagination"},r.createElement(E.a,Object.assign({},o))))},e}var n,o,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&R(e,t)}(t,a["a"]),n=t,(o=[{key:"render",value:function(){var e=this.props.config;return r.createElement("div",{className:"common-list"},this.renderSearcher(),this.renderAddBtn(),this.renderTableHeader(),e.table&&this.renderTable(),e.cards&&this.renderCards())}}])&&j(n.prototype,o),l&&j(n,l),t}()},1420:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var r=n(1),a=n(1375),o=n.n(a),i=(n(1374),n(11));n(1421);function l(e){var t=i.a.getPageBreadcrumb(e.location.pathname),n=e.title,a=e.links,l=e.tabs,c=e.currentTab;return r.createElement("div",{className:"common-header"},r.createElement("section",{className:"common-header-breadcrumb"},t&&r.createElement(o.a,null,t.map(function(e,t){return r.createElement(o.a.Item,{key:t},e.title)}))),r.createElement("section",{className:"common-header-title"},r.createElement("h2",null,n),r.createElement("div",{className:"common-header-links"},a&&a.map(function(t,n){return r.createElement("a",{key:n,onClick:function(){e.history.push(t.path)}},t.title)}))),r.createElement("section",{className:"common-header-tabs"},l&&l.map(function(t,n){return r.createElement("a",{onClick:function(){e.onTabClick(t.id)},className:"".concat(c===t.id?"tab-active":""," ")},r.createElement("span",null,t.title),t.tipComponent&&t.tipComponent())})))}},1421:function(e,t,n){},1422:function(e,t,n){},1423:function(e,t,n){"use strict";var r=function(e){var t=e;return 15===e.length&&(t=function(e){if(/^\d{15}$/.test(e)){e=e.substr(0,6)+"19"+e.substr(6,e.length-6);for(var t=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2],n=0,r=0;r<e.length;r++)n+=parseInt(e.substr(r,1))*t[r];return e+["1","0","X","9","8","7","6","5","4","3","2"][n%11]}return e}(e)),function(e){if(!/^\d{17}(\d|x)$/i.test(e))return!1;return null!=={11:"北京",12:"天津",13:"河北",14:"山西",15:"内蒙",21:"辽宁",22:"吉林",23:"黑龙",31:"上海",32:"江苏",33:"浙江",34:"安徽",35:"福建",36:"江西",37:"山东",41:"河南",42:"湖北",43:"湖南",44:"广东",45:"广西",46:"海南",50:"重庆",51:"四川",52:"贵州",53:"云南",54:"西藏",61:"陕西",62:"甘肃",63:"青海",64:"宁夏",65:"新疆",71:"台湾",81:"香港",82:"澳门",83:"台湾",91:"国外"}[parseInt(e.substr(0,2))]}(t)},a=function(e){return/^[HMhm]{1}([0-9]{8})$/.test(e)},o=function(e){return/^[0-9]{8}$/.test(e)||/^[0-9]{10}$/.test(e)},i=function(e){return/^[a-zA-Z]{5, 17}$/.test(e)||/^[a-zA-Z0-9]$/.test(e)},l=n(11);function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.d(t,"a",function(){return u});var s={isNonEmpty:function(e,t,n){if(0!==e&&l.a.isEmpty(e))return n&&n(),t},maxLength:function(e,t,n,r){if(e.length>t)return r&&r(),n},minLength:function(e,t,n,r){if(e.length<t)return r&&r(),n},isEmail:function(e,t,n){if(!/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(e))return n&&n(),t},isMobile:function(e,t,n){if(!/^(13[0-9]|14[57]|15[012356789]|16[0-9]|18[0-9]|17[0-9]|19[0-9])\d{8}$/.test(e))return n&&n(),t},isID:function(e,t,n,l){var c=null;if("id"===t?c=r:"HKMC"===t?c=a:"TW"===t?c=o:"PSPort"===t&&(c=i),!c(e))return l&&l(),n},isNumber:function(e,t,n){if(e&&Number.isNaN(Number(e)))return n&&n(),t},isHexColor:function(e,t,n){var r=e.toString();if(!r||!function(e){if("#"!==e[0])return!1;var t=e.slice(1);return 6===t.length&&/^[0-9a-fA-f]{6}$/.test(t)}(r))return n&&n(),t},customReg:function(e,t,n,r){var a=e.toString();if(!a||!new RegExp(t).test(a))return r&&r(),n}},u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.cache=[]}var t,n,r;return t=e,(n=[{key:"add",value:function(e,t){var n=this,r=!0,a=!1,o=void 0;try{for(var i,l=function(){var t=i.value,r=t.strategy.split(":");n.cache.push(function(){var n=r.shift();return r.unshift(e),r.push(t.errMsg),r.push(t.cb),s[n].apply(null,r)})},c=t[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)l()}catch(e){a=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}}},{key:"start",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,a=this.cache[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){var o=(0,r.value)();if(o)return o}}catch(e){t=!0,n=e}finally{try{e||null==a.return||a.return()}finally{if(t)throw n}}}}])&&c(t.prototype,n),r&&c(t,r),e}()},1426:function(e,t,n){"use strict";n.d(t,"a",function(){return d});var r=n(1),a=n(582),o=n.n(a),i=(n(581),n(1387)),l=n.n(i);n(1386),n(1427);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=u(this,m(t).apply(this,arguments))).$carousel=null,e.changeGalleryIndex=function(t,n){e.props.changeGalleryIndex&&e.props.changeGalleryIndex(t-1)},e}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,r["Component"]),n=t,(a=[{key:"componentDidMount",value:function(){var e=this.props.activeIndex;this.$carousel.goTo(e)}},{key:"componentDidUpdate",value:function(){var e=this.props.activeIndex;this.$carousel.goTo(e)}},{key:"render",value:function(){var e=this,t=this.props,n=t.source,a=t.activeIndex;return r.createElement("div",{className:"gallery"},r.createElement("section",{className:"gallery-carousel"},r.createElement(l.a,{ref:function(t){return e.$carousel=t},dots:!1},n&&n.map(function(e){return r.createElement("div",{className:"gallery-item"},r.createElement("h3",{className:"gallery-item-img",style:{backgroundImage:"url(".concat(e.src||e.url||e.imgUrl||e.colorImgUrl,")")}}))}))),r.createElement("section",{className:"gallery-pagination"},r.createElement(o.a,{pageSize:1,current:a+1,total:n.length,onChange:this.changeGalleryIndex})))}}])&&s(n.prototype,a),i&&s(n,i),t}();d.defaultProps={activeIndex:0,source:[]}},1427:function(e,t,n){},1441:function(e,t,n){},1497:function(e,t,n){},1516:function(e,t,n){"use strict";n.r(t);var r=n(2),a=n(1),o=n(109),i=n(200),l=n(120),c=n(1369),s=n.n(c),u=(n(1368),n(1441),n(110)),m=n(251),p=n.n(m),d=n(1420),f=n(1419),h=n(1410),y=n.n(h),g=n(590),v=(n(1411),n(1412),n(1413)),b=n.n(v),E=n(11),w=n(1397),C=n.n(w),S=(n(1396),n(23)),k=n.n(S);n(351);function N(e){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j(e,t){return(j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var L=!0;y.a.use(b()({includeEditors:["editor-with-color-picker"],theme:"light"}));var P=["undo","redo","bold","italic","underline","strike-through","text-color","superscript","subscript","separator","font-size","line-height","letter-spacing","headings","separator","remove-styles","text-indent","text-align","separator","list-ul","list-ol","blockquote","code","link","separator","media"],R=function(e){function t(){var e,n,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,a=x(t).apply(this,arguments),(e=!a||"object"!==N(a)&&"function"!=typeof a?_(n):a).state={editorState:y.a.createEditorState(null),styleChecked:!0,init:!0},e.onChange=function(t){if(L)L=!1;else{e.setState({editorState:t});var n=e.props.onContentChange;n&&n(t.toText()?t.toHTML():"")}},e.onStyleSwitchChange=function(t){e.setState({styleChecked:t})},e.clearContent=function(){var t=g.ContentUtils.clear(e.state.editorState);e.setState({editorState:t});var n=e.props.onContentChange;n&&n(t.toHTML())},e.myUploadFn=function(t){return r.a(_(e),void 0,void 0,regeneratorRuntime.mark(function e(){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=t.file,r=this.getUpLoadFileName(n),E.a.uploadFile({file:n,fileName:n.name,ypModel:"crew_lottery"}).then(function(e){t.success({url:e,meta:{id:r,title:r}})}).catch(function(e){t.error({msg:e.message})}),t.progress(function(e){});case 4:case"end":return e.stop()}},e,this)}))},e.getUpLoadFileName=function(e){var t=e.name.split(".")[0],n=e.name.split(".")[1],r="".concat((new Date).getTime());return"".concat("crew_lottery","_").concat(t,"_").concat(r,".").concat(n)},e}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}(t,a["Component"]),n=t,i=[{key:"getDerivedStateFromProps",value:function(e,t){return t.init?{init:!1,editorState:y.a.createEditorState(e.defaultValue)}:null}}],(o=[{key:"componentWillUnmount",value:function(){L=!0}},{key:"render",value:function(){var e=this.props.className,t=this.state,n=t.editorState,r=t.styleChecked,o=[{key:"antd-switch-style",type:"component",component:a.createElement("span",{className:"control-item media button"},"样式粘贴：",a.createElement(C.a,{size:"small",checked:r,onChange:this.onStyleSwitchChange}))},{key:"clear-editor",title:"清空内容",type:"button",text:a.createElement(k.a,{type:"delete",onClick:this.clearContent})}];return a.createElement(a.Fragment,null,a.createElement(y.a,{id:"editor-with-color-picker",className:e,controls:P,onChange:this.onChange,stripPastedStyles:r,extendControls:o,value:n,media:{uploadFn:this.myUploadFn,accepts:{image:"image/png,image/jpeg,image/gif,image/webp,image/apng,image/svg",video:"video/mp4",audio:!1}}}))}}])&&O(n.prototype,o),i&&O(n,i),t}(),D=n(1373),I=n.n(D),z=(n(1372),n(352)),T=n.n(z),M=(n(248),n(578),n(146)),$=n.n(M),F=(n(167),n(1381)),A=n.n(F),V=(n(1380),n(1371)),G=n.n(V),B=(n(1370),n(1497),n(1423)),U=n(16),Y=n.n(U),q=n(147),H=n.n(q);function W(e){return(W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Z(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function K(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function J(e){return(J=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function X(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Q(e,t){return(Q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ee=I.a.Item,te=s.a.confirm,ne=a.createElement("div",null,a.createElement(k.a,{type:"plus"}),a.createElement("div",{className:"ant-upload-text"},"上传图片")),re=function(e,t,n){return{labelCol:{span:e,offset:n},wrapperCol:{span:t}}},ae=function(e){function t(){var e,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,o=J(t).apply(this,arguments),(e=!o||"object"!==W(o)&&"function"!=typeof o?X(n):o).state={mode:"add",previewImage:"",previewVisible:!1,selectVisible:!1,bgFlag:!1},e.init=function(){return r.a(X(e),void 0,void 0,regeneratorRuntime.mark(function e(){var t,n=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=this.$qs.parse(this.props.location.search),this.setState({mode:0==t.id?"add":"edit"},function(){return r.a(n,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(t=E.a.getLStorage("currentLottery"))?te({title:"抽奖记录恢复操作",content:"检测到您存在未提交的抽奖记录，请问是否从上次编辑中恢复状态？",onOk:function(){n.props.crew.setCurrentLottery(t)},onCancel:function(){n.init(),E.a.rmLStorage("currentLottery")}}):"edit"===this.state.mode||this.props.crew.setCurrentLottery({},!0,!1);case 2:case"end":return e.stop()}},e,this)}))});case 2:case"end":return e.stop()}},e,this)}))},e.onContentChange=H()(function(t){e.props.crew.setCurrentLottery({prizeIntroduce:t},!1)},600),e.renderEditor=function(){var t=e.props.form.getFieldDecorator,n=e.props.crew,r=n.setCurrentLottery,o=n.currentShowLottery;return a.createElement(I.a,{className:"editor-form"},a.createElement(ee,Object.assign({label:"抽奖日期",className:"push-type-select"},re(2,6),{required:!0}),t("lotteryDate",{initialValue:o&&o.lotteryDate})(a.createElement(G.a,{className:"upshelf-date",disabledDate:function(e){return e&&e<Y()().startOf("day")},value:o.lotteryDate?o.lotteryDate:null,onChange:function(e){var t=e?e.format("YYYY-MM-DD"):void 0;r({lotteryDate:t},!1)}}))),a.createElement(ee,Object.assign({label:"奖品名称"},re(2,6),{required:!0}),t("name",{initialValue:o&&o.prizeName})(a.createElement(T.a,{placeholder:"请输入奖品名称",onChange:function(e){r({prizeName:e.target.value},!1)}}))),e.renderUploadComponent({label:"奖品大图",field:"prizePic",format:"image/png,image/jpeg,image/jpg",maxCount:1,limit:1024,required:!0,bgFlag:!0,tip:"*推荐尺寸为 1125*650；图片比例为 16:9；不得大于 1M；支持 png、jpg、jpeg 格式"}),a.createElement(ee,Object.assign({label:"赞助商名称"},re(2,6),{required:!0}),t("sponsor",{initialValue:o&&o.sponsor})(a.createElement(T.a,{placeholder:"请输入赞助商名称",onChange:function(e){r({sponsor:e.target.value},!1)}}))),a.createElement(ee,Object.assign({label:"奖品详情"},re(2,20),{required:!0}),a.createElement(R,{defaultValue:o&&o.prizeIntroduce,className:"rich-editor",onContentChange:e.onContentChange})),a.createElement(ee,{className:"editor-form-btns"},a.createElement($.a,{type:"primary",onClick:e.handleSubmit},"edit"==e.state.mode?"确认修改":"保存"),a.createElement($.a,{onClick:e.goBack},"取消"),"edit"==e.state.mode&&a.createElement($.a,{onClick:e.copyLotteryInfo},"复制信息新建抽奖")))},e.copyLotteryInfo=function(){e.props.history.replace("/admin/crew-mp/lottery/editor?id=0"),e.props.crew.setCurrentLottery({id:void 0},!1),e.setState({mode:"add"},function(){e.$msg.success("复制成功，当前页面即可编辑新抽奖内容")})},e.goBack=function(){setTimeout(function(){e.props.history.goBack(),e.props.crew.setCurrentLottery({}),E.a.rmLStorage("currentLottery")},300)},e.handleSubmit=function(t){return r.a(X(e),void 0,void 0,regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.props.form.validateFields(function(e,n){return r.a(t,void 0,void 0,regeneratorRuntime.mark(function t(){var n,r,a,o,i=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=8;break}if(n=this.props.crew.currentLottery,r=this.state.mode,a={lotteryDate:n.lotteryDate,prizeName:n.prizeName,prizePic:n.prizePic,sponsor:n.sponsor,prizeIntroduce:n.prizeIntroduce},!(o=this.getValidation(a))){t.next=7;break}return t.abrupt("return",this.$msg.warn(o));case 7:"add"==r?this.$api.crew.createLottery(a).then(function(e){i.$msg.success("抽奖项创建成功"),setTimeout(function(){i.goBack(),i.$store.crew.getLotteryList({params:{page:1,perpage:10}})},1500)}):(a.id=n.id,this.$api.crew.updateLottery(a).then(function(e){i.$msg.success("抽奖项更新成功"),setTimeout(function(){i.goBack(),i.$store.crew.getLotteryList({params:{page:1,perpage:10}})},1500)}));case 8:case"end":return t.stop()}},t,this)}))});case 1:case"end":return e.stop()}},e,this)}))},e.getValidation=function(e){var t=new B.a;return t.add(e.lotteryDate,[{strategy:"isNonEmpty",errMsg:"请选择抽奖日期"}]),t.add(e.prizeName,[{strategy:"isNonEmpty",errMsg:"请输入奖品名称"},{strategy:"maxLength:40",errMsg:"奖品名称字数不得超过 40 个字"}]),t.add(e.prizePic,[{strategy:"isNonEmpty",errMsg:"上传奖品大图"}]),t.add(e.sponsor,[{strategy:"isNonEmpty",errMsg:"请输入赞助商名称"},{strategy:"maxLength:10",errMsg:"赞助商名称字数不得超过 10 个字"}]),t.add(e.prizeIntroduce,[{strategy:"isNonEmpty",errMsg:"请输入奖品详情"}]),t.start()},e.renderUploadComponent=function(t){var n=e.props.form.getFieldDecorator,r=e.props.crew,o=r.setCurrentLottery,i=r.currentShowLottery;return a.createElement(ee,{className:"form-upload",label:a.createElement("label",null,a.createElement("span",null,t.label)),labelCol:{span:t.labelCol||2},wrapperCol:{span:t.wrapperCol||18},required:t.required||!1},n(t.field,{initialValue:i&&i[t.field]})(a.createElement(A.a,{key:t.field,className:"logo-square ".concat(t.className),accept:t.format||"image/*",action:"",listType:"picture-card",onPreview:function(n){return e.handlePreview(n,t.bgFlag)},beforeUpload:function(n){var r=!0;if(t.format&&!(r=t.format.split(",").includes(n.type)))return e.$msg.error("请上传正确格式图片"),r;var a=E.a.isEmpty(i[t.field])?0:i[t.field].length;return t.maxCount&&a+1>t.maxCount&&(e.$msg.warn("上传图片数量不得超过 ".concat(t.maxCount," 张")),r=!1),r},onRemove:function(n){o(Z({},t.field,void 0),!1),e.setState({bgFlag:!1})},customRequest:function(n){return e.customRequest(t,n)},fileList:i&&i[t.field]},ne)),a.createElement("p",{className:"form-upload-tip"},t.tip))},e.renderModal=function(){var t=e.state,n=t.previewImage,r=t.previewVisible;return a.createElement(s.a,{visible:r,footer:null,onCancel:e.handleCancel},a.createElement("img",{alt:"example",style:{width:"100%"},src:n}))},e.handleCancel=function(){e.setState({previewVisible:!1})},e.handlePreview=function(t,n){e.setState({previewImage:t.url||t.thumbUrl,previewVisible:!0,bgFlag:n})},e.customRequest=function(t,n){var r=e.props.crew,a=r.setCurrentLottery;r.currentLottery;if(t.limit&&n.file.size/1024>t.limit)return e.$msg.error("图片大小不得超过 ".concat(t.limit,"kb")),Promise.reject(0);function o(){E.a.uploadFile({file:n.file,fileName:n.file.name,ypModel:"crew_lottery"}).then(function(e){a(Z({},t.field,e),!1)})}t.size?E.a.getFileInfo(n.file,function(n){n.width!==t.size.width||n.height!==t.size.height?e.$msg.warning("请上传正确尺寸图片"):o()}):o()},e}var n,i,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Q(e,t)}(t,o["a"]),n=t,(i=[{key:"componentDidMount",value:function(){return r.a(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.init();case 1:case"end":return e.stop()}},e,this)}))}},{key:"componentWillUnmount",value:function(){this.props.crew.setCurrentLottery({},!0,!1)}},{key:"render",value:function(){return a.createElement("div",{className:"editor lottery-editor"},a.createElement("section",{className:"editor-content panel-block"},this.renderEditor()),a.createElement("section",{className:"editor-modal"},this.renderModal()))}}])&&K(n.prototype,i),l&&K(n,l),t}(),oe=ae=r.b([I.a.create(),Object(u.b)("common","crew"),u.c],ae),ie=n(1426),le=n(1383),ce=n.n(le),se=(n(586),n(1390)),ue=n.n(se),me=(n(1389),n(584)),pe=n.n(me),de=(n(583),n(356)),fe=n.n(de),he=(n(587),n(1385)),ye=n.n(he),ge=(n(1384),n(58));function ve(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var be=function(e){var t=[{width:80,title:"抽奖 ID",dataIndex:"id"},{width:200,title:"抽奖日期",dataIndex:"lotteryDate",render:function(e,t){return e}},{title:"奖品名称",dataIndex:"prizeName",render:function(e,t){return a.createElement(ce.a,{placement:"bottomLeft",content:t.prizeName},E.a.ellipsis(t.prizeName||" -- ",20))}},{title:"是否开奖",dataIndex:"prizeState",render:function(e,t){return a.createElement(ue.a,{status:1==e?"success":"default",text:ge.o[e]})}},{title:"收货地址",dataIndex:"hadUploadAddress",render:function(e,t){return 0==t.prizeState?"--":a.createElement(ue.a,{status:1==e?"success":"default",text:ge.w[e]})}},{title:"是否发货",dataIndex:"Delivery",render:function(e,t){var n=t&&t.Delivery&&t.Delivery.deliveryState||0;return 0==t.prizeState?"--":a.createElement(ue.a,{status:1==n?"success":"default",text:ge.m[n]})}},{width:300,title:"操作",render:function(t,n){var o=e.state,i=o.currentAddress,l=o.currentLottery;return a.createElement("div",{className:"common-list-table-operation"},a.createElement("span",{onClick:function(){return e.goToEditor(n)}},"修改"),0!=n.prizeState&&a.createElement(a.Fragment,null,"    ",a.createElement(ce.a,{onVisibleChange:function(t){return r.a(void 0,void 0,void 0,regeneratorRuntime.mark(function r(){var a;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!t){r.next=7;break}return r.next=3,e.$api.crew.getAddress({params:{id:n.id}});case 3:a=r.sent,setTimeout(function(){e.setState({currentAddress:a.data.data})},300),r.next=8;break;case 7:e.setState({currentAddress:null});case 8:case"end":return r.stop()}},r)}))},content:a.createElement("div",null,i?a.createElement("div",{className:"lottery-address"},a.createElement("div",null,a.createElement("span",null,"收货人姓名："),a.createElement("span",null,i.name)),a.createElement("div",null,a.createElement("span",null,"收货人手机号："),a.createElement("span",null,i.phone)),a.createElement("div",null,a.createElement("span",null,"收货人详细地址："),a.createElement("span",null,i.address)),a.createElement("div",{className:"lottery-address-btn"},a.createElement($.a,{type:"primary",onClick:e.copyAddress.bind(e,i)},"点击复制"))):a.createElement("div",{style:{textAlign:"center"}},a.createElement(pe.a,null))),title:"查看收货地址"},a.createElement("span",{onClick:function(){return r.a(void 0,void 0,void 0,regeneratorRuntime.mark(function t(){var r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$api.crew.getAddress({params:{id:n.id}});case 2:r=t.sent,setTimeout(function(){e.setState({currentAddress:r.data.data})},300);case 4:case"end":return t.stop()}},t)}))}},"查看收货信息"))),0!=n.prizeState&&a.createElement(a.Fragment,null,"    ",a.createElement(ce.a,{onVisibleChange:function(t){return r.a(void 0,void 0,void 0,regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:t?setTimeout(function(){e.setState({currentLottery:n})},300):e.setState({currentLottery:null});case 1:case"end":return r.stop()}},r)}))},content:a.createElement("div",null,l?a.createElement("div",{className:"lottery-address"},a.createElement("div",null,a.createElement("span",null,"是否发货："),a.createElement("span",null,a.createElement(fe.a.Group,{onChange:function(t){e.setDeliveryInfo("deliveryState",t.target.value)},value:l&&l.Delivery&&l.Delivery.deliveryState},a.createElement(fe.a,{value:0},"未发货"),a.createElement(fe.a,{value:1},"已发货")))),a.createElement("div",null,a.createElement("span",null,"运单号："),a.createElement("span",null,a.createElement(T.a,{value:l&&l.Delivery&&l.Delivery.orderNumber,placeholder:"请输入运单号",onChange:function(t){e.setDeliveryInfo("orderNumber",t.target.value)}}))),a.createElement("div",{className:"lottery-address-btn"},a.createElement($.a,{type:"primary",onClick:e.saveDeliveryInfo},"保存"))):a.createElement("div",{style:{textAlign:"center"}},a.createElement(pe.a,null))),title:"修改发货状态"},a.createElement("span",{onClick:function(){return r.a(void 0,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}))}},"修改发货状态"))),"    ",a.createElement(ye.a,{title:"请问是否确定删除当前抽奖记录",onConfirm:function(){return r.a(void 0,void 0,void 0,regeneratorRuntime.mark(function t(){var r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$api.crew.deleteLottery({params:{id:n.id}});case 2:200===(r=t.sent).data.code?e.getDataList(e.state.filter):e.$msg.error(r.data.message);case 4:case"end":return t.stop()}},t)}))},onCancel:function(){}},a.createElement("span",null,"删除")))}}],n=Object.assign({},e.props.common.paginationConfig,{current:e.state.currentPage,total:e.props.crew.lotteryList.total,onChange:function(e,t){},onShowSizeChange:function(t,n){e.resetPagination(n,t)}});return{addBtn:{title:function(){return a.createElement($.a,{type:"primary",onClick:function(){return e.goToEditor({})}},a.createElement(k.a,{type:"plus"})," 新建抽奖")}},searcher:{batchControl:{showMoreBtn:!1},widgets:[[{type:"Select",label:"发货状态",placeholder:"请选择发货状态",value:e.state.deliver_state,option:{key:"id",value:"id",title:"value",data:ge.l},onChange:function(t,n){e.onDeliverySelect(t,n)}},{type:"Select",label:"开奖状态",placeholder:"请选择开奖状态",width:300,value:e.state.prize_state,option:{key:"id",value:"id",title:"value",data:ge.n},onChange:function(t,n){e.onLotterySelect(t,n)}}],[{type:"Select",label:"收货地址",placeholder:"请选择收货地址",value:e.state.had_upload_address,option:{key:"id",value:"id",title:"value",data:ge.d},onChange:function(t,n){e.onAddressSelect(t,n)}},{type:"Input",label:"奖品名称",placeholder:"请输入奖品名称",value:e.state.prize_name||void 0,onChange:function(t){e.setNameInputValue(t.target.value)}}],{type:"RangePicker",label:"选择日期",placeholder:["开始日期","结束日期"],alias:[1,7,30],format:"YYYY-MM-DD",value:e.state.dateRange||null,onChange:function(t){e.onDateRangeChange(t)}}],onSearch:function(){e.onSearch()},onReset:function(){e.onReset()}},table:{rowKey:"id",columns:t,loading:e.state.tableLoading,dataSource:e.props.crew.lotteryList,pagination:n,current:e.state.currentPage,onChange:function(t,n,r){var a={page:t.current,perpage:t.pageSize};if(!E.a.isEmpty(n))for(var o=0,i=Object.entries(n);o<i.length;o++){var l=ve(i[o],2),c=l[0],s=l[1];a[c]=s?s[0]:void 0}e.setState({filter:Object.assign({},e.state.filter,a),currentPage:t.current},function(){e.getDataList(e.state.filter)})}}}},Ee=n(588),we=n.n(Ee);function Ce(e){return(Ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Se(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ke(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ne(e){return(Ne=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Oe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xe(e,t){return(xe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}s.a.confirm;var _e=[],je=function(e){function t(){var e,n,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,a=Ne(t).apply(this,arguments),(e=!a||"object"!==Ce(a)&&"function"!=typeof a?Oe(n):a).state={filter:{},deliver_state:void 0,prize_state:void 0,had_upload_address:void 0,prize_name:void 0,dateRange:[],tableLoading:!1,currentGallery:[],currentGalleryIndex:0,galleryVisible:!1,currentPage:1,currentAddress:null,currentLottery:null,deliveryInfo:{}},e.getDataList=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setState({tableLoading:!0,filter:Object.assign({},e.state.filter,t)},function(){return r.a(Oe(e),void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$store.crew.getLotteryList({params:Object.assign({},this.state.filter,t)});case 2:this.setState({tableLoading:!1});case 3:case"end":return e.stop()}},e,this)}))})},e.setDeliveryInfo=function(t,n){e.setState({currentLottery:Object.assign({},e.state.currentLottery,{Delivery:Object.assign({},e.state.currentLottery.Delivery,Se({},t,n))})})},e.saveDeliveryInfo=function(){return r.a(Oe(e),void 0,void 0,regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.currentLottery,n={deliverState:t.Delivery.deliveryState,id:t.id,orderNumber:t.Delivery.orderNumber},e.next=4,this.$api.crew.updateDeliver(n);case 4:this.getDataList(this.state.filter);case 5:case"end":return e.stop()}},e,this)}))},e.resetPagination=function(t,n){return r.a(Oe(e),void 0,void 0,regeneratorRuntime.mark(function e(){var a=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({filter:Object.assign({},this.state.filter,{perpage:t,page:n})},function(){return r.a(a,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=this.state.filter,this.getDataList(t);case 2:case"end":return e.stop()}},e,this)}))});case 1:case"end":return e.stop()}},e,this)}))},e.copyAddress=function(t){var n="".concat(t.name," ").concat(t.phone," ").concat(t.address);we()(n),e.$msg.success("复制成功")},e.onSearch=function(){return r.a(Oe(e),void 0,void 0,regeneratorRuntime.mark(function e(){var t,n=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=this.state.filter,this.setState({filter:Object.assign({},t,{page:1}),currentPage:1},function(){n.getDataList(n.state.filter)});case 2:case"end":return e.stop()}},e,this)}))},e.onReset=function(){return r.a(Oe(e),void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,r=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t={page:1,perpage:this.state.filter.perpage},n=this.props.location.pathname,this.props.history.replace(n),this.setState({deliver_state:void 0,prize_state:void 0,had_upload_address:void 0,prize_name:void 0,dateRange:[],filter:t,currentPage:1},function(){r.getDataList(r.state.filter)});case 4:case"end":return e.stop()}},e,this)}))},e.goToEditor=function(t){var n="/admin/crew-mp/lottery/editor?id=".concat(p()(t)?0:t.id);e.props.history.push(n),e.props.crew.setCurrentLottery(t,!0,!1)},e.onDeliverySelect=function(t,n){e.setState({deliver_state:t,filter:Object.assign({},e.state.filter,{deliver_state:t})},function(){e.onSearch()})},e.onLotterySelect=function(t,n){e.setState({prize_state:t,filter:Object.assign({},e.state.filter,{prize_state:t})},function(){e.onSearch()})},e.onAddressSelect=function(t,n){e.setState({had_upload_address:t,filter:Object.assign({},e.state.filter,{had_upload_address:t})},function(){e.onSearch()})},e.onDateRangeChange=function(t){var n=Object.assign({},e.state.filter);E.a.isEmpty(t)?(delete n.start_time,delete n.end_time):(n.start_time=t[0].startOf("day").format("YYYY-MM-DD"),n.end_time=t[1].startOf("day").format("YYYY-MM-DD")),e.setState({dateRange:t,filter:n},function(){e.onSearch()})},e.setNameInputValue=function(t){e.setState({prize_name:t,filter:Object.assign({},e.state.filter,{prize_name:t||void 0})})},e.changeGalleryIndex=function(t){e.setState({currentGalleryIndex:t})},e.onGalleryModalOk=function(){e.setState({currentGallery:[],currentGalleryIndex:0,galleryVisible:!1})},e.onGalleryModalCancel=function(){e.setState({currentGallery:[],currentGalleryIndex:0,galleryVisible:!1})},e}var n,i,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xe(e,t)}(t,o["a"]),n=t,(i=[{key:"componentDidMount",value:function(){return r.a(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=this.props.common.paginationConfig,n=t.defaultPageSize,r=t.defaultCurrent,this.resetPagination(n,r);case 2:case"end":return e.stop()}},e,this)}))}},{key:"componentDidUpdate",value:function(){"/admin/crew-mp/lottery"===this.props.location.pathname&&this.props.history.replace("/admin/crew-mp/lottery/list")}},{key:"render",value:function(){var e=this,t=this.props,n=t.location,r=t.match,o=t.crew.currentLottery,i=this.state,c=i.currentGallery,u=i.currentGalleryIndex,m=i.galleryVisible,p="/admin/crew-mp/lottery/editor"===n.pathname?!E.a.isEmpty(o)&&o.id?"修改抽奖":"新建抽奖":"每日抽奖管理";return a.createElement("div",{className:"lottery"},a.createElement(d.a,Object.assign({},this.props,{links:_e,title:p})),a.createElement(l.a,{path:"".concat(r.url,"/list"),render:function(t){return a.createElement(f.a,Object.assign({},t,{config:be(e)}))}}),a.createElement(l.a,{path:"".concat(r.url,"/editor"),render:function(e){return a.createElement(oe,Object.assign({},e))}}),a.createElement(s.a,{title:"查看图片",visible:m,onOk:this.onGalleryModalOk,onCancel:this.onGalleryModalCancel},a.createElement(ie.a,{source:c,activeIndex:u,changeGalleryIndex:this.changeGalleryIndex})))}}])&&ke(n.prototype,i),c&&ke(n,c),t}();je=r.b([Object(i.a)("/admin/crew-mp/lottery",{exact:!1}),Object(u.b)("common","crew"),u.c],je);t.default=je}}]);