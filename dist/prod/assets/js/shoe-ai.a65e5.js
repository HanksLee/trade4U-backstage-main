(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{1419:function(e,t,n){"use strict";n.d(t,"a",function(){return z});var r=n(1),a=n(109),o=(n(1422),n(146)),i=n.n(o),s=(n(167),n(353)),c=n.n(s),l=(n(578),n(352)),u=n.n(l),m=(n(248),n(1377)),p=n.n(m),d=(n(1376),n(1371)),f=n.n(d),h=(n(1370),n(168)),g=n.n(h),b=(n(354),n(23)),v=n.n(b),y=(n(351),n(582)),S=n.n(y),E=(n(581),n(584)),w=n.n(E),k=(n(583),n(580)),N=n.n(k),C=(n(579),n(11)),O=n(16),I=n.n(O);function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function R(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function j(e,t){return!t||"object"!==x(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function T(e,t){return(T=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var A=c.a.Option,$=u.a.Group,B=f.a.RangePicker,_=N.a.CheckableTag,L={SelectInput:function(e){var t=e.selectValue,n=e.inputValue,a=e.placeholder,o=e.options,i=e.onSelectChange,s=e.onInputChange,l=e.onPressEnter,m=e.selectStyle;return r.createElement($,{compact:!0},r.createElement(c.a,{style:m?Object.assign({width:110},m):{width:110},value:t,onChange:i},o&&o.map(function(e,t){return r.createElement(A,{key:t,value:e.value},e.title)})),r.createElement(u.a,{style:{width:238},value:n,onChange:s,placeholder:a,onPressEnter:l}))},Select:function(e){var t=e.option,n=e.label,a=e.mode,o=e.onSearch,i=e.onSelect,s=e.onBlur,l=e.onFocus,u=e.value,m=e.placeholder,p=e.showSearch,d=e.width,f=e.filterOption,h=e.onChange,g=e.allowClear,b=e.onPopupScroll;return r.createElement(r.Fragment,null,n&&r.createElement("span",{className:"common-list-label"},"".concat(n,"：")),r.createElement("span",{className:"common-list-control"},r.createElement(c.a,{allowClear:g,value:u,mode:a||!1,style:{minWidth:d||258,width:d},showSearch:p,placeholder:m,filterOption:f,onSearch:o,onSelect:i,onChange:h,onBlur:s,onPopupScroll:b,onFocus:l},t.data.map(function(e){return r.createElement(A,{key:e[t.key]||e.id,value:e[t.value]||e.id,$data:e},e[t.title])}))))},DatePicker:function(e){var t=e.label,n=e.placeholder,a=e.onChange,o=e.value,i=e.style,s=e.format,c=e.showTime;return r.createElement(r.Fragment,null,t&&r.createElement("span",{className:"common-list-label"},"".concat(t,"：")),r.createElement("span",{className:"common-list-control"},r.createElement(f.a,{format:s||!1,style:i,showTime:c,placeholder:n,value:o,onChange:a})))},RangePicker:function(e){var t=e.label,n=e.alias,a=e.placeholder,o=e.onChange,s=e.value,c=e.showTime,l=e.format;return r.createElement(r.Fragment,null,t&&r.createElement("span",{className:"common-list-label"},"".concat(t,"：")),r.createElement("span",{className:"common-list-control"},r.createElement(B,{style:{width:400},showTime:c,format:l,placeholder:a,value:s,onChange:o}),r.createElement("span",{className:"common-list-control-date-alias"},!C.a.isEmpty(n)&&n.map(function(e,t){return r.createElement(i.a,{key:t,onClick:function(){return o([I()(Date.now()-864e5*e).startOf("day"),I()()])}},e," 天内")}))))},Input:function(e){var t=e.label,n=e.value,a=e.placeholder,o=e.onChange,i=e.width,s=e.onPressEnter;return r.createElement(r.Fragment,null,t&&r.createElement("span",{className:"common-list-label"},"".concat(t,"：")),r.createElement("span",{className:"common-list-control"},r.createElement(u.a,{style:{minWidth:i||258},value:n,onChange:o,placeholder:a,onPressEnter:s})))},Checkbox:function(e){var t=e.label,n=e.value,a=e.onChange;return r.createElement(g.a,{checked:n,onChange:a},t)},CheckableTag:function(e){var t=e.label,n=e.option,a=e.value,o=e.onChange;return r.createElement(r.Fragment,null,t&&r.createElement("span",{className:"common-list-label"},"".concat(t,"：")),r.createElement("span",{className:"common-list-control"},!C.a.isEmpty(n)&&n.map(function(e){return r.createElement(_,{key:e.value,checked:e.value===a,onChange:function(){o(e)}},e.title)})))},Label:function(e,t){var n=e.label;return r.createElement(r.Fragment,null,n&&r.createElement("span",{className:"common-list-label"},"".concat(n,"：")),r.createElement("span",{className:"common-list-control"},t))},Custom:function(e){return r.createElement("div",null,(void 0).props.children)}},z=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=j(this,P(t).apply(this,arguments))).state={collapse:!0},e.toggleCollapse=function(t){e.setState({collapse:!e.state.collapse})},e.renderSearcher=function(){var t=e.props.config,n=t.searcher,a=t.table,o=e.state.collapse;return n&&r.createElement("section",{className:"common-list-search"},e.renderWidgets(n.widgets),a&&a.tableHeader&&a.tableHeader(),r.createElement("div",{className:"common-list-search-right"},!n.hideSearcher&&r.createElement(r.Fragment,null,r.createElement(i.a,{type:"primary",onClick:n.onSearch},"查询"),r.createElement(i.a,{onClick:n.onReset},"重置")),n.collapseControl&&n.collapseControl.showMoreBtn&&r.createElement("span",{className:"common-list-serach-more"},r.createElement("a",{onClick:e.toggleCollapse},o?"更多":"收起"," ",r.createElement(v.a,{type:o?"down":"up"})))))},e.renderWidgets=function(t){var n=e.state.collapse,a=e.props.config.searcher;return t&&r.createElement("div",{className:"common-list-search-left"},t.map(function(t,o){return Array.isArray(t)?r.createElement("div",{key:o,className:"common-list-search-row",style:{display:a.collapseControl&&a.collapseControl.showMoreBtn&&n&&o>0?"none":"flex"}},t.map(function(t){return r.createElement("div",{key:t.label,className:"common-list-search-col",style:Object.assign({},t.style)},L[t.type]&&L[t.type](t,t.children?e.renderWidgets(t.children):null))})):r.createElement("div",{key:t.label,className:"common-list-search-row ".concat(t.className)},L[t.type]&&L[t.type](t,t.children?e.renderWidgets(t.children):null))}))},e.renderAddBtn=function(){var t=e.props.config,n=t.addBtn,a=t.searcher;return n&&r.createElement("section",{className:"common-list-addbtn",style:n.style},"function"==typeof n.title?r.createElement(n.title,null):n.title,r.createElement("div",{className:"common-list-search-batch"},a.batchControl.showBatchControl&&r.createElement(c.a,{placeholder:a.batchControl.placeholder,style:{minWidth:120},defaultValue:void 0,onChange:a.batchControl.onBatch},a.batchControl.options.map(function(e){return r.createElement(A,{key:e.value,value:e.value},e.title)}))))},e.renderTableHeader=function(){var t=e.props.config.tableHeader;return r.createElement("section",{className:"common-list-table-header"},t&&t())},e.renderTable=function(){var t=e.props.config.table,n=t.rowKey,a=t.rowSelection,o=t.columns,i=t.dataSource,s=t.pagination,c=t.onChange,l=t.loading,u=t.locale;return r.createElement("section",{className:"common-list-table"},r.createElement(p.a,{locale:u,rowKey:n||"id",rowSelection:a,columns:o,dataSource:i,loading:l,pagination:s,onChange:c}))},e.renderCards=function(){var t=e.props.config.cards,n=t.dataSource,a=t.loading,o=t.pagination,i=t.renderCard,s=t.addBtn;return r.createElement("div",{className:"common-list-cards-wrapper"},r.createElement("ul",{className:"common-list-cards"},a?r.createElement("div",{className:"common-list-cards-loading"},r.createElement(w.a,null)):r.createElement(r.Fragment,null,r.createElement("li",{className:"common-list-card add-btn"},r.createElement("div",{className:"common-list-card-item",onClick:s.onAddBtnClick},s.icon?r.createElement("img",{src:s.icon,alt:""}):r.createElement(v.a,{type:"plus-circle"}),r.createElement("p",null,s.title))),n.map(function(e){return r.createElement("li",{className:"common-list-card"},r.createElement("div",{className:"common-list-card-item"},i(e)))}))),r.createElement("section",{className:"common-list-cards-pagination"},r.createElement(S.a,Object.assign({},o))))},e}var n,o,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&T(e,t)}(t,a["a"]),n=t,(o=[{key:"render",value:function(){var e=this.props.config;return r.createElement("div",{className:"common-list"},this.renderSearcher(),this.renderAddBtn(),this.renderTableHeader(),e.table&&this.renderTable(),e.cards&&this.renderCards())}}])&&R(n.prototype,o),s&&R(n,s),t}()},1420:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(1),a=n(1375),o=n.n(a),i=(n(1374),n(11));n(1421);function s(e){var t=i.a.getPageBreadcrumb(e.location.pathname),n=e.title,a=e.links,s=e.tabs,c=e.currentTab;return r.createElement("div",{className:"common-header"},r.createElement("section",{className:"common-header-breadcrumb"},t&&r.createElement(o.a,null,t.map(function(e,t){return r.createElement(o.a.Item,{key:t},e.title)}))),r.createElement("section",{className:"common-header-title"},r.createElement("h2",null,n),r.createElement("div",{className:"common-header-links"},a&&a.map(function(t,n){return r.createElement("a",{key:n,onClick:function(){e.history.push(t.path)}},t.title)}))),r.createElement("section",{className:"common-header-tabs"},s&&s.map(function(t,n){return r.createElement("a",{onClick:function(){e.onTabClick(t.id)},className:"".concat(c===t.id?"tab-active":""," ")},r.createElement("span",null,t.title),t.tipComponent&&t.tipComponent())})))}},1421:function(e,t,n){},1422:function(e,t,n){},1423:function(e,t,n){"use strict";var r=function(e){var t=e;return 15===e.length&&(t=function(e){if(/^\d{15}$/.test(e)){e=e.substr(0,6)+"19"+e.substr(6,e.length-6);for(var t=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2],n=0,r=0;r<e.length;r++)n+=parseInt(e.substr(r,1))*t[r];return e+["1","0","X","9","8","7","6","5","4","3","2"][n%11]}return e}(e)),function(e){if(!/^\d{17}(\d|x)$/i.test(e))return!1;return null!=={11:"北京",12:"天津",13:"河北",14:"山西",15:"内蒙",21:"辽宁",22:"吉林",23:"黑龙",31:"上海",32:"江苏",33:"浙江",34:"安徽",35:"福建",36:"江西",37:"山东",41:"河南",42:"湖北",43:"湖南",44:"广东",45:"广西",46:"海南",50:"重庆",51:"四川",52:"贵州",53:"云南",54:"西藏",61:"陕西",62:"甘肃",63:"青海",64:"宁夏",65:"新疆",71:"台湾",81:"香港",82:"澳门",83:"台湾",91:"国外"}[parseInt(e.substr(0,2))]}(t)},a=function(e){return/^[HMhm]{1}([0-9]{8})$/.test(e)},o=function(e){return/^[0-9]{8}$/.test(e)||/^[0-9]{10}$/.test(e)},i=function(e){return/^[a-zA-Z]{5, 17}$/.test(e)||/^[a-zA-Z0-9]$/.test(e)},s=n(11);function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.d(t,"a",function(){return u});var l={isNonEmpty:function(e,t,n){if(0!==e&&s.a.isEmpty(e))return n&&n(),t},maxLength:function(e,t,n,r){if(e.length>t)return r&&r(),n},minLength:function(e,t,n,r){if(e.length<t)return r&&r(),n},isEmail:function(e,t,n){if(!/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(e))return n&&n(),t},isMobile:function(e,t,n){if(!/^(13[0-9]|14[57]|15[012356789]|16[0-9]|18[0-9]|17[0-9]|19[0-9])\d{8}$/.test(e))return n&&n(),t},isID:function(e,t,n,s){var c=null;if("id"===t?c=r:"HKMC"===t?c=a:"TW"===t?c=o:"PSPort"===t&&(c=i),!c(e))return s&&s(),n},isNumber:function(e,t,n){if(e&&Number.isNaN(Number(e)))return n&&n(),t},isHexColor:function(e,t,n){var r=e.toString();if(!r||!function(e){if("#"!==e[0])return!1;var t=e.slice(1);return 6===t.length&&/^[0-9a-fA-f]{6}$/.test(t)}(r))return n&&n(),t},customReg:function(e,t,n,r){var a=e.toString();if(!a||!new RegExp(t).test(a))return r&&r(),n}},u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.cache=[]}var t,n,r;return t=e,(n=[{key:"add",value:function(e,t){var n=this,r=!0,a=!1,o=void 0;try{for(var i,s=function(){var t=i.value,r=t.strategy.split(":");n.cache.push(function(){var n=r.shift();return r.unshift(e),r.push(t.errMsg),r.push(t.cb),l[n].apply(null,r)})},c=t[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)s()}catch(e){a=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}}},{key:"start",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,a=this.cache[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){var o=(0,r.value)();if(o)return o}}catch(e){t=!0,n=e}finally{try{e||null==a.return||a.return()}finally{if(t)throw n}}}}])&&c(t.prototype,n),r&&c(t,r),e}()},1426:function(e,t,n){"use strict";n.d(t,"a",function(){return d});var r=n(1),a=n(582),o=n.n(a),i=(n(581),n(1387)),s=n.n(i);n(1386),n(1427);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=u(this,m(t).apply(this,arguments))).$carousel=null,e.changeGalleryIndex=function(t,n){e.props.changeGalleryIndex&&e.props.changeGalleryIndex(t-1)},e}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,r["Component"]),n=t,(a=[{key:"componentDidMount",value:function(){var e=this.props.activeIndex;this.$carousel.goTo(e)}},{key:"componentDidUpdate",value:function(){var e=this.props.activeIndex;this.$carousel.goTo(e)}},{key:"render",value:function(){var e=this,t=this.props,n=t.source,a=t.activeIndex;return r.createElement("div",{className:"gallery"},r.createElement("section",{className:"gallery-carousel"},r.createElement(s.a,{ref:function(t){return e.$carousel=t},dots:!1},n&&n.map(function(e){return r.createElement("div",{className:"gallery-item"},r.createElement("h3",{className:"gallery-item-img",style:{backgroundImage:"url(".concat(e.src||e.url||e.imgUrl||e.colorImgUrl,")")}}))}))),r.createElement("section",{className:"gallery-pagination"},r.createElement(o.a,{pageSize:1,current:a+1,total:n.length,onChange:this.changeGalleryIndex})))}}])&&l(n.prototype,a),i&&l(n,i),t}();d.defaultProps={activeIndex:0,source:[]}},1427:function(e,t,n){},1434:function(e,t,n){"use strict";n.d(t,"a",function(){return g});var r=n(2),a=n(1),o=n(1400),i=n.n(o),s=(n(1398),n(23)),c=n.n(s),l=(n(351),n(1399)),u=n.n(l);n(1435);function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return!t||"object"!==m(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var g=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=d(this,f(t).apply(this,arguments))).state={top:10,scrollText:a.createElement("span",null,"快速",a.createElement("br",null),"到底"),scrollDirection:"bottom",isHovering:!1},e}var n,o,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(t,a["Component"]),n=t,(o=[{key:"componentDidMount",value:function(){return r.a(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=this,document.querySelector(".content").onscroll=function(e){(this.offsetHeight+this.scrollTop)/this.scrollHeight>.7?t.setState({scrollText:a.createElement("span",null,"回到",a.createElement("br",null),"顶部"),scrollDirection:"top"}):t.setState({scrollText:a.createElement("span",null,"快速",a.createElement("br",null),"到底"),scrollDirection:"bottom"})};case 3:case"end":return e.stop()}},e,this)}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.scrollText,r=t.scrollDirection,o=t.isHovering,s=this.props,l=s.scrollToTop,m=s.scrollToBottom,p=s.elementToScroll,d=o?n:"bottom"==r?a.createElement(c.a,{type:"vertical-align-bottom",style:{fontSize:26}}):a.createElement(c.a,{type:"vertical-align-top",style:{fontSize:26}});return a.createElement("div",{className:"affix-position",onMouseEnter:function(){e.setState({isHovering:!0})},onMouseLeave:function(){e.setState({isHovering:!1})}},a.createElement(i.a,{offsetTop:this.state.top},a.createElement("div",{className:"affix-btn",onClick:function(){var t="bottom"===r?m:l;e.setState({hasScrolledToPosition:!1}),u()(t||null,{minDuration:100,speed:3e3,elementToScroll:p||null}).then(function(t){e.setState({hasScrolledToPosition:t})})}},d)))}}])&&p(n.prototype,o),s&&p(n,s),t}()},1435:function(e,t,n){},1470:function(e,t,n){},1471:function(e,t,n){},1530:function(e,t,n){"use strict";n.r(t);var r=n(2),a=n(109),o=n(1),i=n(200),s=n(120),c=(n(1470),n(110)),l=n(251),u=n.n(l),m=n(1420),p=n(1419),d=n(1373),f=n.n(d),h=(n(1372),n(352)),g=n.n(h),b=(n(248),n(146)),v=n.n(b),y=(n(167),n(1381)),S=n.n(y),E=(n(1380),n(1369)),w=n.n(E),k=(n(1368),n(23)),N=n.n(k),C=(n(351),n(580)),O=n.n(C),I=(n(579),n(202)),x=n.n(I),R=(n(355),n(353)),j=n.n(R),P=(n(578),n(356)),T=n.n(P),A=(n(587),n(1370),n(354),n(1394),n(1391),n(1378),n(1471),n(1423)),$=n(11),B=n(147),_=n.n(B),L=n(87),z=n.n(L),F=n(585),M=n.n(F),V=n(1382),D=n.n(V),G=n(163);function H(e){return(H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function U(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function W(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function K(e){return(K=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Z(e,t){return(Z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var J=f.a.Item,X=j.a.Option,Q=(T.a.Group,w.a.confirm),ee=(g.a.TextArea,0),te=!1,ne=void 0,re=o.createElement("div",null,o.createElement(N.a,{type:"plus"}),o.createElement("div",{className:"ant-upload-text"},"上传图片")),ae=function(e,t,n){return{labelCol:{span:e,offset:n},wrapperCol:{span:t}}},oe=function(e){function t(){var e,n,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,a=K(t).apply(this,arguments),(e=!a||"object"!==H(a)&&"function"!=typeof a?Y(n):a).$selectRef=null,e.state={toUploadFiles:[],toUpload:!1,breadcrumbs:[],mode:"add",previewImage:"",previewVisible:!1,fileList:[],selectVisible:!1,currentCover:"",btnLoading:!1,shoeOptions:[],shoeOptionsMeta:{total:0,pageNum:1,pageSize:20},bgFlag:!1},e.init=function(){return r.a(Y(e),void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,a=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=$.a.getPageBreadcrumb(this.props.location.pathname),n=this.$qs.parse(this.props.location.search),this.setState({breadcrumbs:t,mode:0==n.id?"add":"edit"},function(){return r.a(a,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,r,a=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=$.a.getLStorage("currentAI"))){e.next=5;break}Q({title:"AI 跑鞋记录恢复操作",content:"检测到您存在未提交 AI 跑鞋记录信息，请问是否从上次编辑的 AI 跑鞋记录中恢复状态？",onOk:function(){a.props.shoe.setCurrentAI(t)},onCancel:function(){a.init(),$.a.rmLStorage("currentAI")}}),e.next=14;break;case 5:if("edit"!==this.state.mode){e.next=13;break}return n=this.props.shoe.currentShowAI.brandName,e.next=9,this.$api.shoe.getBrandList({pageNum:1,pageSize:10,brandName:n});case 9:r=e.sent,this.setState({brandOptions:r.data.data.list}),e.next=14;break;case 13:this.props.shoe.setCurrentSku({},!0,!1);case 14:case"end":return e.stop()}},e,this)}))});case 3:case"end":return e.stop()}},e,this)}))},e.onShoeBlur=function(){e.setState({selectVisible:!1})},e.onShoeSearch=_()(function(t){return r.a(Y(e),void 0,void 0,regeneratorRuntime.mark(function e(){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$api.shoe.getSkuList({shoeName:t,pageNum:1,pageSize:10});case 2:n=e.sent,this.setState({shoeOptions:n.data.data.list||[]});case 4:case"end":return e.stop()}},e,this)}))},500),e.onShoeSelect=function(t,n){var r=n.props.$data;e.props.shoe.setCurrentAI({shoeId:t,brandName:r.brandName,shoeName:r.shoeName},!1),e.setState({selectVisible:!1})},e.renderSpecificShoe=function(){var t=e.props.shoe.currentAI,n=t.shoeId,a=t.shoeName,i=t.brandName,s=e.state,c=s.selectVisible,l=s.shoeOptions,u="".concat(i,"-").concat(a),m=u&&u.length>20,p=o.createElement(O.a,{key:n,closable:!0,onClose:function(){return e.handleClose(n)}},m?"".concat(u.slice(0,20),"..."):u);return o.createElement(J,Object.assign({label:"选择跑鞋"},ae(2,6),{required:!0}),o.createElement("div",{className:"editor-specific-shoe"},n&&(m?o.createElement(x.a,{title:a,key:n},p):p),c&&o.createElement(j.a,{ref:function(t){return e.$selectRef=t},showSearch:!0,placeholder:"请输入跑鞋型号",filterOption:!1,onFocus:function(){return r.a(Y(e),void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$api.shoe.getSkuList({pageNum:1,pageSize:20});case 2:t=e.sent,this.setState({shoeOptions:t.data.data.list,shoeOptionsMeta:{total:t.data.data.total,pageNum:t.data.data.pageNum,pageSize:t.data.data.pageSize}});case 4:case"end":return e.stop()}},e,this)}))},onPopupScroll:M()(function(t){return r.a(Y(e),void 0,void 0,regeneratorRuntime.mark(function e(){var n,r,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.state,r=n.shoeOptions,a=n.shoeOptionsMeta,!(!(!t||!t.target)&&t.target.scrollHeight-(t.target.scrollTop+t.target.clientHeight)<=10&&a.total>r.length)){e.next=7;break}return e.next=5,this.$api.shoe.getSkuList({pageNum:a.pageNum+1,pageSize:20});case 5:o=e.sent,this.setState({shoeOptions:D()(this.state.shoeOptions,o.data.data.list,"shoeId"),shoeOptionsMeta:{total:o.data.data.total,pageNum:o.data.data.pageNum,pageSize:o.data.data.pageSize}});case 7:case"end":return e.stop()}},e,this)}))},300),onSearch:e.onShoeSearch,onSelect:e.onShoeSelect,onBlur:e.onShoeBlur},l.map(function(e){return o.createElement(X,{key:e.shoeId,value:e.shoeId,$data:e},e.shoeName)})),!c&&!n&&o.createElement(O.a,{style:{background:"#fff",borderStyle:"dashed"},onClick:function(){e.setState({selectVisible:!0},function(){return e.$selectRef.focus()})}},o.createElement(N.a,{type:"plus"}),"添加"),n&&o.createElement("div",{className:"editor-specific-shoe-panel"},o.createElement("p",{className:"editor-specific-shoe-field"},o.createElement("span",{className:"editor-specific-shoe-label"},"跑鞋品牌："),o.createElement("span",{className:"editor-specific-shoe-value"},i)),o.createElement("p",{className:"editor-specific-shoe-field"},o.createElement("span",{className:"editor-specific-shoe-label"},"跑鞋型号："),o.createElement("span",{className:"editor-specific-shoe-value"},a)))))},e.handleClose=function(t){e.props.shoe.setCurrentAI({shoeId:void 0,brandId:void 0,brandName:void 0,shoeName:void 0},!1),"add"==e.state.mode||ne||(ne=t)},e.renderEditor=function(){var t=e.props.shoe;t.setCurrentSku,t.currentShowAI,e.props.form.getFieldDecorator,e.state.brandOptions;return o.createElement(f.a,{className:"editor-form"},o.createElement(J,null,o.createElement("h2",{className:"editor-form-title form-title"},"基本信息")),e.renderSpecificShoe(),o.createElement(J,null,o.createElement("h2",{className:"editor-form-title form-title"},"识别图片")),e.renderUploadComponent({label:"上传配色",field:"images",className:"upload-transparent-bg",limit:2097152,required:!0,tip:"*点击可批量上传，一次性最多上传 10 张，2M以内/张",multiple:!0,wrapperCol:16}),o.createElement(J,{className:"editor-form-btns"},o.createElement(v.a,{type:"primary",onClick:e.handleSubmit,loading:e.state.btnLoading},"保存"),o.createElement(v.a,{onClick:e.goBack},"取消")))},e.renderUploadComponent=function(t){var n=e.props.form.getFieldDecorator,r=e.props.shoe,a=r.currentShowAI,i=r.setCurrentAI,s=r.currentAI;return o.createElement(f.a.Item,{className:"form-upload",label:o.createElement("span",null,o.createElement("span",null,t.label)),labelCol:{span:t.labelCol||2},wrapperCol:{span:t.wrapperCol||18},required:t.required||!1},n(t.field,{initialValue:a&&a[t.field]})(o.createElement(S.a,{multiple:t.multiple,key:t.field,className:"logo-square",accept:t.format||"image/*",action:"",listType:"picture-card",onPreview:function(n){return e.handlePreview(n,t.bgFlag)},beforeUpload:function(n,r){if(r.length>10)return(ee+=1)==r.length&&(e.$msg.error("图片一次性上传不得超过 10 张"),ee=0),!1;if(t.format){for(var a,o=!0,i=0,s=r.length;i<s;++i){if(r[i].type!=t.format){o=!1,a=i;break}}return o||e.$msg.error("第".concat(a+1,"图片，请上传正确格式")),o}return e.setState({toUploadFiles:r,toUpload:!0}),!0},onRemove:function(n){var r=z()(s.images);r="add"==e.state.mode?r.filter(function(e){return e.id!=n.uid}):r.map(function(e){return e.id==n.uid&&(e.status=1),e}),i(q({},t.field,r),!1),e.setState({bgFlag:!1})},customRequest:function(n){return e.customRequest(t,n)},fileList:a&&a[t.field]},re)),o.createElement("span",{className:"form-upload-tip"},t.tip))},e.customRequest=function(t,n){return r.a(Y(e),void 0,void 0,regeneratorRuntime.mark(function e(){var a,o,i,s,c,l,u,m,p;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(p=function(e){return r.a(this,void 0,void 0,regeneratorRuntime.mark(function n(){var r,a,s,c,l,u,m,p,d,f,h,g,b,v,y,S,E,w,k,N;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:r=[],a=!0,s=!1,c=void 0,n.prev=4,l=e[Symbol.iterator]();case 6:if(a=(u=l.next()).done){n.next=27;break}for(m=u.value,p=new FormData,d=0,f=Object.entries({file:m,fileNmae:m.name,ypModel:"run_shoe"});d<f.length;d++)h=U(f[d],2),g=h[0],b=h[1],p.append(g,b);return n.prev=10,n.next=13,G.a.uploadFile(p);case 13:if(0!=(v=n.sent).data.ret){n.next=18;break}r.push(Promise.resolve(v.data.data.file)),n.next=19;break;case 18:return n.abrupt("return",this.$msg.error(v.data.msg));case 19:n.next=24;break;case 21:n.prev=21,n.t0=n.catch(10),this.$msg.error(n.t0);case 24:a=!0,n.next=6;break;case 27:n.next=33;break;case 29:n.prev=29,n.t1=n.catch(4),s=!0,c=n.t1;case 33:n.prev=33,n.prev=34,a||null==l.return||l.return();case 36:if(n.prev=36,!s){n.next=39;break}throw c;case 39:return n.finish(36);case 40:return n.finish(33);case 41:y=[],S=0,E=r;case 43:if(!(S<E.length)){n.next=53;break}return w=E[S],n.next=47,w;case 47:k=n.sent,N={id:"add-"+$.a.randomNum(1,1e5),imgUrl:k,shoeId:i.shoeId,status:0},y.push(N);case 50:S++,n.next=43;break;case 53:o(q({},t.field,$.a.isEmpty(i[t.field])?y:i[t.field].concat(y)),!1);case 54:case"end":return n.stop()}},n,this,[[4,29,33,41],[10,21],[34,,36,40]])}))},a=this.props.shoe,o=a.setCurrentAI,i=a.currentAI,s=this.state,s.toUpload,c=s.toUploadFiles,!(t.limit&&n.file.size/1024>t.limit)){e.next=6;break}return this.$msg.error("图片大小不得超过 ".concat(t.limit,"kb")),e.abrupt("return",Promise.reject(0));case 6:l=0,u=c.length;case 7:if(!(l<u)){e.next=15;break}if(m=c[l],!(t.limit&&m.size/1024>t.limit)){e.next=12;break}return this.$msg.error("第 ".concat(l+1," 张图片大小不得超过 ").concat(t.limit,"kb")),e.abrupt("return",Promise.reject(0));case 12:l++,e.next=7;break;case 15:if(e.prev=15,!this.state.toUpload){e.next=20;break}return e.next=19,p(this.state.toUploadFiles);case 19:this.setState({toUpload:!1,toUploadFiles:[]});case 20:e.next=25;break;case 22:e.prev=22,e.t0=e.catch(15),this.$msg.error(e.t0);case 25:case"end":return e.stop()}},e,this,[[15,22]])}))},e.handlePreview=function(t,n){e.setState({previewImage:t.url||t.thumbUrl,previewVisible:!0,bgFlag:n})},e.handleSubmit=function(t){return r.a(Y(e),void 0,void 0,regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.props.form.validateFields(function(e,n){return r.a(t,void 0,void 0,regeneratorRuntime.mark(function t(){var n,r,a,o,i,s=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=8;break}if(n=this.props.shoe,n.currentShowAI,r=n.currentAI,a=this.state.mode,o={shoeId:r.shoeId,images:z()(r.images).map(function(e){return e.id&&e.id.toString().indexOf("add")>=0&&delete e.id,e})},!(i=this.getValidation(o))){t.next=7;break}return t.abrupt("return",this.$msg.warn(i));case 7:te||("add"===a?(this.setState({btnLoading:!0}),this.$api.shoe.updateAI(o).then(function(e){0==e.data.ret?(s.$msg.success("AI 跑鞋记录添加成功"),setTimeout(function(){te=!1,s.setState({btnLoading:!1}),s.goBack();var e=s.props.shoe.aiListMeta,t=e.pageNum,n=e.pageSize;s.$store.shoe.getAIList({pageNum:t,pageSize:n,orderBy:"shoeId",sort:"desc"})},1500)):s.$msg.error(e.data.msg)}).catch(function(e){te=!1,s.setState({btnLoading:!1})})):this.$api.shoe.updateAI(o).then(function(e){0==e.data.ret?(s.$msg.success("AI 跑鞋记录编辑成功"),s.setState({btnLoading:!0}),setTimeout(function(){te=!1,s.setState({btnLoading:!1}),s.goBack();var e=s.props.shoe.aiListMeta,t=e.pageNum,n=e.pageSize;s.$store.shoe.getAIList({pageNum:t,pageSize:n,orderBy:"shoeId",sort:"desc"})},1500)):s.$msg.error(e.data.msg)}).catch(function(e){te=!1,s.setState({btnLoading:!1})}));case 8:case"end":return t.stop()}},t,this)}))});case 1:case"end":return e.stop()}},e,this)}))},e.getValidation=function(t){e.state.mode;var n=new A.a;return n.add(t.shoeId,[{strategy:"isNonEmpty",errMsg:"请选择跑鞋"}]),n.add(t.images,[{strategy:"isNonEmpty",errMsg:"跑鞋配色不能为空"}]),n.start()},e.goBack=function(){setTimeout(function(){e.props.history.goBack(),e.props.shoe.setCurrentSku({}),$.a.rmLStorage("currentAI")},300)},e.renderModal=function(){var t=e.state,n=t.previewImage,r=t.previewVisible,a=t.bgFlag,i=a?{backgroundColor:"#666",minWidth:80,maxWidth:320,margin:"0 auto"}:{};return o.createElement(w.a,{visible:r,className:"".concat(a?"blank-transparent-bg":""),bodyStyle:i,footer:null,onCancel:e.handleCancel},o.createElement("img",{alt:"example",style:{width:"100%",objectFit:"contain"},src:n}))},e.handleCancel=function(){e.setState({previewVisible:!1})},e}var n,i,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Z(e,t)}(t,a["a"]),n=t,(i=[{key:"componentDidMount",value:function(){return r.a(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.init();case 1:case"end":return e.stop()}},e,this)}))}},{key:"componentWillUnmount",value:function(){this.props.shoe.setCurrentAI({},!0,!1)}},{key:"render",value:function(){return o.createElement("div",{className:"editor shoe-sku"},o.createElement("section",{className:"editor-content panel-block"},this.renderEditor()),o.createElement("section",{className:"editor-modal"},this.renderModal()))}}])&&W(n.prototype,i),s&&W(n,s),t}(),ie=oe=r.b([f.a.create(),Object(c.b)("common","shoe"),c.c],oe);n(250);function se(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var ce=function(e){var t={selectedRowKeys:e.state.selectedRowKeys,onChange:function(t,n){e.setState({selectedRowKeys:t})}},n=[{title:"跑鞋 ID",width:100,dataIndex:"shoeId",sorter:!0},{title:"跑鞋详情",width:420,render:function(t,n){return o.createElement("div",{className:"shoe-sku-detail"},o.createElement("div",{className:"shoe-sku-detail-name"},o.createElement("div",{className:"shoe-sku-detail-brandname"},o.createElement("a",{onClick:function(){e.props.history.push("/admin/shoe/racing/brand/list?brandName=".concat(n.brandName))}},n.brandName),o.createElement("strong",null,n.shoeName)),o.createElement("span",{className:"shoe-sku-detail-price"},"￥ ",n.price/100)),!$.a.isEmpty(n.images)&&o.createElement("ul",{className:"shoe-sku-detail-imgs"},n.images.map(function(t,r){return o.createElement("li",null,o.createElement("a",{onClick:function(){e.setState({currentGallery:n.images,currentGalleryIndex:r,visible:!0})}},o.createElement("img",{src:t.imgUrl,alt:"",style:{objectFit:"contain"}})))})))}},{title:"识别次数",dataIndex:"recognizeTimes",sorter:!0,render:function(e){return e||"--"}},{title:"反馈人数",dataIndex:"feedbackNum",render:function(e){return e||"--"}},{title:"准确率",dataIndex:"accuracyRate",sorter:!0,render:function(e){return 100*e+"%"}},{width:180,title:"操作",render:function(t,n){return o.createElement("div",{className:"common-list-table-operation"},o.createElement("span",{onClick:function(){return e.goToEditor(n)}},"编辑"),o.createElement("span",{className:"common-list-table-operation-spliter"}),o.createElement("span",{onClick:function(){return e.deleteAI(n.shoeId)}},"删除"))}}],r=Object.assign({},e.props.common.paginationConfig,{current:e.state.currentPage,onChange:function(e,t){},total:e.props.shoe.aiListMeta.total,onShowSizeChange:function(t,n){e.resetPagination(n,t)}});return{addBtn:{title:function(){return o.createElement(v.a,{type:"primary",onClick:function(){return e.goToEditor({})}},o.createElement(N.a,{type:"plus"})," 添加")}},tableHeader:function(){return null},searcher:{collapseControl:{onChange:function(t){e.toggleCollapse(t)}},batchControl:{placeholder:"请选择",showBatchControl:!$.a.isEmpty(e.state.selectedRowKeys),options:[{title:"删除",value:"delete"}],onBatch:function(t){e.onBatch(t)}},widgets:[[{type:"SelectInput",label:"跑鞋",placeholder:"请输入跑鞋 ID 或型号",options:[{title:"跑鞋 ID",value:"shoeId"},{title:"跑鞋型号",value:"shoeName"}],inputValue:e.state.shoeValue,selectValue:e.state.shoeField,onSelectChange:function(t){e.setShoeField(t)},onInputChange:function(t){e.setShoeValue(t.target.value)},onPressEnter:function(t){e.onSearch()}},{type:"Select",label:"选择品牌",showSearch:!0,placeholder:"请输入品牌名称",value:e.state.brandValue,option:{key:"brandId",value:"brandName",title:"brandName",data:e.state.brandOptions||[]},onFocus:function(){e.onBrandFocus()},onSearch:function(t){e.onBrandSearch(t)},onChange:function(t,n){e.onBrandSelect(t,n)},onSelect:function(e,t){},onBlur:function(){},onPopupScroll:function(t){e.onBrandPopupScroll(t)}}]],onSearch:function(){e.onSearch()},onReset:function(){e.onReset()}},table:{rowKey:"shoeId",rowSelection:t,columns:n,dataSource:e.props.shoe.aiList,pagination:r,loading:e.state.tableLoading,onChange:function(t,n,r){var a={pageNum:t.current,pageSize:t.pageSize};if(!$.a.isEmpty(n))for(var o=0,i=Object.entries(n);o<i.length;o++){var s=se(i[o],2),c=s[0],l=s[1];a[c]=l?l[0]:void 0}$.a.isEmpty(r)?(a.orderBy="shoeId",a.sort="desc"):(a.orderBy="".concat(r.field),a.sort="".concat("descend"===r.order?"desc":"asc")),e.setState({filter:Object.assign({},e.state.filter,a),currentPage:t.current},function(){e.getDataList(e.state.filter)})}}}},le=(n(249),n(1426)),ue=n(1434);function me(e){return(me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function de(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fe(e){return(fe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function he(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ge(e,t){return(ge=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var be=w.a.confirm,ve=[],ye=function(e){function t(){var e,n,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,a=fe(t).apply(this,arguments),(e=!a||"object"!==me(a)&&"function"!=typeof a?he(n):a).state={selectedRowKeys:[],brandOptions:[],filter:{orderBy:"shoeId",sort:"desc"},brandValue:void 0,shoeField:"shoeName",shoeValue:void 0,tagValue:void 0,statisticsValue:void 0,date:void 0,currentGallery:[],currentGalleryIndex:0,visible:!1,tableLoading:!1,currentPage:1,brandOptionsMeta:{total:0,pageNum:1,pageSize:20},affixConfig:{}},e.getDataList=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setState({tableLoading:!0,filter:Object.assign({},e.state.filter,t)},function(){return r.a(he(e),void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$store.shoe.getAIList(Object.assign({},this.state.filter,t));case 2:this.setState({tableLoading:!1});case 3:case"end":return e.stop()}},e,this)}))})},e.resetPagination=function(t,n){return r.a(he(e),void 0,void 0,regeneratorRuntime.mark(function e(){var a=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({filter:Object.assign({},this.state.filter,{pageSize:t,pageNum:n})},function(){return r.a(a,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=this.state.filter,this.getDataList(t);case 2:case"end":return e.stop()}},e,this)}))});case 1:case"end":return e.stop()}},e,this)}))},e.onDateChange=function(t){e.setState({date:t,filter:Object.assign({},e.state.filter,{publishTimeStart:t?t.startOf("day").format("YYYY-MM-DD HH:mm:ss"):void 0,publishTimeEnd:t?t.endOf("day").format("YYYY-MM-DD HH:mm:ss"):void 0})})},e.onSearch=function(){return r.a(he(e),void 0,void 0,regeneratorRuntime.mark(function e(){var t,n=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this.state.filter).shoeId||!Number.isNaN(Number(t.shoeId))){e.next=3;break}return e.abrupt("return",this.$msg.error("请输入正确 shoeId"));case 3:this.setState({filter:Object.assign({},t,{pageNum:1}),currentPage:1},function(){n.getDataList(n.state.filter)});case 4:case"end":return e.stop()}},e,this)}))},e.onReset=function(){return r.a(he(e),void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,r=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t={pageNum:1,pageSize:this.state.filter.pageSize,orderBy:"shoeId",sort:"desc"},n=this.props.location.pathname,this.props.history.replace(n),this.setState({shoeValue:void 0,brandValue:void 0,tagValue:void 0,date:void 0,filter:t,currentPage:1},function(){r.getDataList(r.state.filter)});case 4:case"end":return e.stop()}},e,this)}))},e.goToEditor=function(t){e.props.shoe.setCurrentAI(t,!0,!1);var n="/admin/shoe/racing/ai/editor?id=".concat(u()(t)?0:t.shoeId);e.props.history.push(n)},e.setShoeField=function(t){var n=e.state.filter;"shoeId"!==t?delete n.shoeId:"shoeName"!==t&&delete n.shoeName,e.setState({shoeField:t,shoeValue:void 0,filter:Object.assign({},n,pe({},t,void 0))})},e.setShoeValue=function(t){e.setState({shoeValue:t,filter:Object.assign({},e.state.filter,pe({},e.state.shoeField,t||void 0))})},e.onBrandFocus=function(){return r.a(he(e),void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$api.shoe.getBrandList({pageNum:1,pageSize:20});case 2:t=e.sent,this.setState({brandOptions:t.data.data.list,brandOptionsMeta:{total:t.data.data.total,pageNum:t.data.data.pageNum,pageSize:t.data.data.pageSize}});case 4:case"end":return e.stop()}},e,this)}))},e.onBrandPopupScroll=M()(function(t){return r.a(he(e),void 0,void 0,regeneratorRuntime.mark(function e(){var n,r,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.state,r=n.brandOptions,a=n.brandOptionsMeta,!(!(!t||!t.target)&&t.target.scrollHeight-(t.target.scrollTop+t.target.clientHeight)<=10&&a.total>r.length)){e.next=7;break}return e.next=5,this.$api.shoe.getBrandList({pageNum:a.pageNum+1,pageSize:20});case 5:o=e.sent,this.setState({brandOptions:D()(this.state.brandOptions,o.data.data.list,"brandId"),brandOptionsMeta:{total:o.data.data.total,pageNum:o.data.data.pageNum,pageSize:o.data.data.pageSize}});case 7:case"end":return e.stop()}},e,this)}))},300),e.onBrandSearch=_()(function(t){return r.a(he(e),void 0,void 0,regeneratorRuntime.mark(function e(){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$api.shoe.getBrandList({brandName:t,pageSize:10,pageNum:1});case 2:n=e.sent,this.setState({brandOptions:n.data.data.list});case 4:case"end":return e.stop()}},e,this)}))},500),e.onBrandSelect=function(t,n){var r=n.props.$data.brandName;e.setState({brandValue:t,filter:Object.assign({},e.state.filter,{brandName:r||void 0})},function(){e.onSearch()})},e.onTagChange=function(t){e.setState({tagValue:t,filter:Object.assign({},e.state.filter,{tagName:t||void 0})})},e.onStatisticsSelect=function(t,n){e.setState({statisticsValue:t,filter:Object.assign({},e.state.filter,{statistics:t||void 0})})},e.onBatch=function(t){var n=e.state.selectedRowKeys;if(t&&$.a.isEmpty(n))return e.$msg.warning("请选择至少一条记录");"delete"===t&&e.deleteAI(n)},e.deleteAI=function(t){return r.a(he(e),void 0,void 0,regeneratorRuntime.mark(function e(){var n=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:be({title:"AI 跑鞋记录删除操作",content:"请问是否确定删除当前选中的 AI 跑鞋记录？",onOk:function(){return r.a(n,void 0,void 0,regeneratorRuntime.mark(function e(){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,t instanceof Array||(t=[t]),e.next=4,this.$api.shoe.deleteAI({ids:t});case 4:0==(n=e.sent).data.ret?(this.$msg.success("AI 跑鞋记录删除成功"),this.getDataList(this.state.filter)):this.$msg.error(n.data.msg);case 6:case"end":return e.stop()}},e,this)}))},onCancel:function(){return r.a(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}))}});case 1:case"end":return e.stop()}},e)}))},e.changeGalleryIndex=function(t){e.setState({currentGalleryIndex:t})},e.onGalleryModalOk=function(){e.setState({currentGallery:[],currentGalleryIndex:0,visible:!1})},e.onGalleryModalCancel=function(){e.setState({currentGallery:[],currentGalleryIndex:0,visible:!1})},e}var n,i,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ge(e,t)}(t,a["a"]),n=t,(i=[{key:"componentDidMount",value:function(){return r.a(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,r,a,o,i,s=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=this.props.common.paginationConfig,n=t.defaultPageSize,r=t.defaultCurrent,a=this.props.location,(o=this.$qs.parse(a.search)).shoeId?this.setState({shoeField:"shoeId",shoeValue:o.shoeId,filter:{shoeId:o.shoeId}},function(){s.resetPagination(n,r)}):this.resetPagination(n,r),i={scrollToTop:document.querySelector(".shoe-sku"),scrollToBottom:1e5,elementToScroll:document.querySelector(".content")},this.setState({affixConfig:i});case 6:case"end":return e.stop()}},e,this)}))}},{key:"componentDidUpdate",value:function(){"/admin/shoe/racing/ai"===this.props.location.pathname&&this.props.history.replace("/admin/shoe/racing/ai/list")}},{key:"render",value:function(){var e=this,t=this.props,n=t.match,r=t.location,a=this.props.shoe.currentSku,i="/admin/shoe/racing/ai/editor"===r.pathname?$.a.isEmpty(a)?"添加跑鞋":"编辑跑鞋":"AI 识别爬虫后台",c=this.state,l=c.currentGallery,u=c.currentGalleryIndex,d=c.visible,f=c.affixConfig;return o.createElement("div",{className:"shoe-sku"},o.createElement(m.a,Object.assign({},this.props,{links:ve,title:i})),o.createElement(s.a,{path:"".concat(n.url,"/list"),render:function(t){return o.createElement(p.a,Object.assign({},t,{config:ce(e)}))}}),o.createElement(s.a,{path:"".concat(n.url,"/editor"),render:function(e){return o.createElement(ie,Object.assign({},e))}}),o.createElement(ue.a,Object.assign({},f)),o.createElement(w.a,{title:"跑鞋 AI",visible:d,onOk:this.onGalleryModalOk,onCancel:this.onGalleryModalCancel},o.createElement(le.a,{source:l,activeIndex:u,changeGalleryIndex:this.changeGalleryIndex})))}}])&&de(n.prototype,i),c&&de(n,c),t}();ye=r.b([Object(i.a)("/admin/shoe/racing/ai",{exact:!1}),Object(c.b)("common","shoe"),c.c],ye);t.default=ye}}]);