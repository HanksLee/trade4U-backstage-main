(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{1419:function(e,t,n){"use strict";n.d(t,"a",function(){return M});var r=n(1),a=n(109),o=(n(1422),n(146)),i=n.n(o),s=(n(167),n(353)),c=n.n(s),l=(n(578),n(352)),u=n.n(l),f=(n(248),n(1377)),p=n.n(f),d=(n(1376),n(1371)),m=n.n(d),h=(n(1370),n(168)),g=n.n(h),v=(n(354),n(23)),b=n.n(v),y=(n(351),n(582)),w=n.n(y),E=(n(581),n(584)),S=n.n(E),O=(n(583),n(580)),k=n.n(O),C=(n(579),n(11)),j=n(16),R=n.n(j);function N(e){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function T(e,t){return!t||"object"!==N(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var D=c.a.Option,_=u.a.Group,L=m.a.RangePicker,V=k.a.CheckableTag,$={SelectInput:function(e){var t=e.selectValue,n=e.inputValue,a=e.placeholder,o=e.options,i=e.onSelectChange,s=e.onInputChange,l=e.onPressEnter,f=e.selectStyle;return r.createElement(_,{compact:!0},r.createElement(c.a,{style:f?Object.assign({width:110},f):{width:110},value:t,onChange:i},o&&o.map(function(e,t){return r.createElement(D,{key:t,value:e.value},e.title)})),r.createElement(u.a,{style:{width:238},value:n,onChange:s,placeholder:a,onPressEnter:l}))},Select:function(e){var t=e.option,n=e.label,a=e.mode,o=e.onSearch,i=e.onSelect,s=e.onBlur,l=e.onFocus,u=e.value,f=e.placeholder,p=e.showSearch,d=e.width,m=e.filterOption,h=e.onChange,g=e.allowClear,v=e.onPopupScroll;return r.createElement(r.Fragment,null,n&&r.createElement("span",{className:"common-list-label"},"".concat(n,"：")),r.createElement("span",{className:"common-list-control"},r.createElement(c.a,{allowClear:g,value:u,mode:a||!1,style:{minWidth:d||258,width:d},showSearch:p,placeholder:f,filterOption:m,onSearch:o,onSelect:i,onChange:h,onBlur:s,onPopupScroll:v,onFocus:l},t.data.map(function(e){return r.createElement(D,{key:e[t.key]||e.id,value:e[t.value]||e.id,$data:e},e[t.title])}))))},DatePicker:function(e){var t=e.label,n=e.placeholder,a=e.onChange,o=e.value,i=e.style,s=e.format,c=e.showTime;return r.createElement(r.Fragment,null,t&&r.createElement("span",{className:"common-list-label"},"".concat(t,"：")),r.createElement("span",{className:"common-list-control"},r.createElement(m.a,{format:s||!1,style:i,showTime:c,placeholder:n,value:o,onChange:a})))},RangePicker:function(e){var t=e.label,n=e.alias,a=e.placeholder,o=e.onChange,s=e.value,c=e.showTime,l=e.format;return r.createElement(r.Fragment,null,t&&r.createElement("span",{className:"common-list-label"},"".concat(t,"：")),r.createElement("span",{className:"common-list-control"},r.createElement(L,{style:{width:400},showTime:c,format:l,placeholder:a,value:s,onChange:o}),r.createElement("span",{className:"common-list-control-date-alias"},!C.a.isEmpty(n)&&n.map(function(e,t){return r.createElement(i.a,{key:t,onClick:function(){return o([R()(Date.now()-864e5*e).startOf("day"),R()()])}},e," 天内")}))))},Input:function(e){var t=e.label,n=e.value,a=e.placeholder,o=e.onChange,i=e.width,s=e.onPressEnter;return r.createElement(r.Fragment,null,t&&r.createElement("span",{className:"common-list-label"},"".concat(t,"：")),r.createElement("span",{className:"common-list-control"},r.createElement(u.a,{style:{minWidth:i||258},value:n,onChange:o,placeholder:a,onPressEnter:s})))},Checkbox:function(e){var t=e.label,n=e.value,a=e.onChange;return r.createElement(g.a,{checked:n,onChange:a},t)},CheckableTag:function(e){var t=e.label,n=e.option,a=e.value,o=e.onChange;return r.createElement(r.Fragment,null,t&&r.createElement("span",{className:"common-list-label"},"".concat(t,"：")),r.createElement("span",{className:"common-list-control"},!C.a.isEmpty(n)&&n.map(function(e){return r.createElement(V,{key:e.value,checked:e.value===a,onChange:function(){o(e)}},e.title)})))},Label:function(e,t){var n=e.label;return r.createElement(r.Fragment,null,n&&r.createElement("span",{className:"common-list-label"},"".concat(n,"：")),r.createElement("span",{className:"common-list-control"},t))},Custom:function(e){return r.createElement("div",null,(void 0).props.children)}},M=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=T(this,x(t).apply(this,arguments))).state={collapse:!0},e.toggleCollapse=function(t){e.setState({collapse:!e.state.collapse})},e.renderSearcher=function(){var t=e.props.config,n=t.searcher,a=t.table,o=e.state.collapse;return n&&r.createElement("section",{className:"common-list-search"},e.renderWidgets(n.widgets),a&&a.tableHeader&&a.tableHeader(),r.createElement("div",{className:"common-list-search-right"},!n.hideSearcher&&r.createElement(r.Fragment,null,r.createElement(i.a,{type:"primary",onClick:n.onSearch},"查询"),r.createElement(i.a,{onClick:n.onReset},"重置")),n.collapseControl&&n.collapseControl.showMoreBtn&&r.createElement("span",{className:"common-list-serach-more"},r.createElement("a",{onClick:e.toggleCollapse},o?"更多":"收起"," ",r.createElement(b.a,{type:o?"down":"up"})))))},e.renderWidgets=function(t){var n=e.state.collapse,a=e.props.config.searcher;return t&&r.createElement("div",{className:"common-list-search-left"},t.map(function(t,o){return Array.isArray(t)?r.createElement("div",{key:o,className:"common-list-search-row",style:{display:a.collapseControl&&a.collapseControl.showMoreBtn&&n&&o>0?"none":"flex"}},t.map(function(t){return r.createElement("div",{key:t.label,className:"common-list-search-col",style:Object.assign({},t.style)},$[t.type]&&$[t.type](t,t.children?e.renderWidgets(t.children):null))})):r.createElement("div",{key:t.label,className:"common-list-search-row ".concat(t.className)},$[t.type]&&$[t.type](t,t.children?e.renderWidgets(t.children):null))}))},e.renderAddBtn=function(){var t=e.props.config,n=t.addBtn,a=t.searcher;return n&&r.createElement("section",{className:"common-list-addbtn",style:n.style},"function"==typeof n.title?r.createElement(n.title,null):n.title,r.createElement("div",{className:"common-list-search-batch"},a.batchControl.showBatchControl&&r.createElement(c.a,{placeholder:a.batchControl.placeholder,style:{minWidth:120},defaultValue:void 0,onChange:a.batchControl.onBatch},a.batchControl.options.map(function(e){return r.createElement(D,{key:e.value,value:e.value},e.title)}))))},e.renderTableHeader=function(){var t=e.props.config.tableHeader;return r.createElement("section",{className:"common-list-table-header"},t&&t())},e.renderTable=function(){var t=e.props.config.table,n=t.rowKey,a=t.rowSelection,o=t.columns,i=t.dataSource,s=t.pagination,c=t.onChange,l=t.loading,u=t.locale;return r.createElement("section",{className:"common-list-table"},r.createElement(p.a,{locale:u,rowKey:n||"id",rowSelection:a,columns:o,dataSource:i,loading:l,pagination:s,onChange:c}))},e.renderCards=function(){var t=e.props.config.cards,n=t.dataSource,a=t.loading,o=t.pagination,i=t.renderCard,s=t.addBtn;return r.createElement("div",{className:"common-list-cards-wrapper"},r.createElement("ul",{className:"common-list-cards"},a?r.createElement("div",{className:"common-list-cards-loading"},r.createElement(S.a,null)):r.createElement(r.Fragment,null,r.createElement("li",{className:"common-list-card add-btn"},r.createElement("div",{className:"common-list-card-item",onClick:s.onAddBtnClick},s.icon?r.createElement("img",{src:s.icon,alt:""}):r.createElement(b.a,{type:"plus-circle"}),r.createElement("p",null,s.title))),n.map(function(e){return r.createElement("li",{className:"common-list-card"},r.createElement("div",{className:"common-list-card-item"},i(e)))}))),r.createElement("section",{className:"common-list-cards-pagination"},r.createElement(w.a,Object.assign({},o))))},e}var n,o,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(t,a["a"]),n=t,(o=[{key:"render",value:function(){var e=this.props.config;return r.createElement("div",{className:"common-list"},this.renderSearcher(),this.renderAddBtn(),this.renderTableHeader(),e.table&&this.renderTable(),e.cards&&this.renderCards())}}])&&I(n.prototype,o),s&&I(n,s),t}()},1420:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(1),a=n(1375),o=n.n(a),i=(n(1374),n(11));n(1421);function s(e){var t=i.a.getPageBreadcrumb(e.location.pathname),n=e.title,a=e.links,s=e.tabs,c=e.currentTab;return r.createElement("div",{className:"common-header"},r.createElement("section",{className:"common-header-breadcrumb"},t&&r.createElement(o.a,null,t.map(function(e,t){return r.createElement(o.a.Item,{key:t},e.title)}))),r.createElement("section",{className:"common-header-title"},r.createElement("h2",null,n),r.createElement("div",{className:"common-header-links"},a&&a.map(function(t,n){return r.createElement("a",{key:n,onClick:function(){e.history.push(t.path)}},t.title)}))),r.createElement("section",{className:"common-header-tabs"},s&&s.map(function(t,n){return r.createElement("a",{onClick:function(){e.onTabClick(t.id)},className:"".concat(c===t.id?"tab-active":""," ")},r.createElement("span",null,t.title),t.tipComponent&&t.tipComponent())})))}},1421:function(e,t,n){},1422:function(e,t,n){},1423:function(e,t,n){"use strict";var r=function(e){var t=e;return 15===e.length&&(t=function(e){if(/^\d{15}$/.test(e)){e=e.substr(0,6)+"19"+e.substr(6,e.length-6);for(var t=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2],n=0,r=0;r<e.length;r++)n+=parseInt(e.substr(r,1))*t[r];return e+["1","0","X","9","8","7","6","5","4","3","2"][n%11]}return e}(e)),function(e){if(!/^\d{17}(\d|x)$/i.test(e))return!1;return null!=={11:"北京",12:"天津",13:"河北",14:"山西",15:"内蒙",21:"辽宁",22:"吉林",23:"黑龙",31:"上海",32:"江苏",33:"浙江",34:"安徽",35:"福建",36:"江西",37:"山东",41:"河南",42:"湖北",43:"湖南",44:"广东",45:"广西",46:"海南",50:"重庆",51:"四川",52:"贵州",53:"云南",54:"西藏",61:"陕西",62:"甘肃",63:"青海",64:"宁夏",65:"新疆",71:"台湾",81:"香港",82:"澳门",83:"台湾",91:"国外"}[parseInt(e.substr(0,2))]}(t)},a=function(e){return/^[HMhm]{1}([0-9]{8})$/.test(e)},o=function(e){return/^[0-9]{8}$/.test(e)||/^[0-9]{10}$/.test(e)},i=function(e){return/^[a-zA-Z]{5, 17}$/.test(e)||/^[a-zA-Z0-9]$/.test(e)},s=n(11);function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.d(t,"a",function(){return u});var l={isNonEmpty:function(e,t,n){if(0!==e&&s.a.isEmpty(e))return n&&n(),t},maxLength:function(e,t,n,r){if(e.length>t)return r&&r(),n},minLength:function(e,t,n,r){if(e.length<t)return r&&r(),n},isEmail:function(e,t,n){if(!/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(e))return n&&n(),t},isMobile:function(e,t,n){if(!/^(13[0-9]|14[57]|15[012356789]|16[0-9]|18[0-9]|17[0-9]|19[0-9])\d{8}$/.test(e))return n&&n(),t},isID:function(e,t,n,s){var c=null;if("id"===t?c=r:"HKMC"===t?c=a:"TW"===t?c=o:"PSPort"===t&&(c=i),!c(e))return s&&s(),n},isNumber:function(e,t,n){if(e&&Number.isNaN(Number(e)))return n&&n(),t},isHexColor:function(e,t,n){var r=e.toString();if(!r||!function(e){if("#"!==e[0])return!1;var t=e.slice(1);return 6===t.length&&/^[0-9a-fA-f]{6}$/.test(t)}(r))return n&&n(),t},customReg:function(e,t,n,r){var a=e.toString();if(!a||!new RegExp(t).test(a))return r&&r(),n}},u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.cache=[]}var t,n,r;return t=e,(n=[{key:"add",value:function(e,t){var n=this,r=!0,a=!1,o=void 0;try{for(var i,s=function(){var t=i.value,r=t.strategy.split(":");n.cache.push(function(){var n=r.shift();return r.unshift(e),r.push(t.errMsg),r.push(t.cb),l[n].apply(null,r)})},c=t[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)s()}catch(e){a=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}}},{key:"start",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,a=this.cache[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){var o=(0,r.value)();if(o)return o}}catch(e){t=!0,n=e}finally{try{e||null==a.return||a.return()}finally{if(t)throw n}}}}])&&c(t.prototype,n),r&&c(t,r),e}()},1424:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n(1);n(1425);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var l={hot:"hot",normal:"normal",wait:"wait",block:"block"},u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i(this,s(t).apply(this,arguments))}var n,a,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,r["Component"]),n=t,(a=[{key:"render",value:function(){var e=this.props,t=e.text,n=e.type;return r.createElement("span",{className:"status-text ".concat(l[n])},r.createElement("span",{className:"status-text-dot ".concat(l[n])}),r.createElement("span",null,t))}}])&&o(n.prototype,a),u&&o(n,u),t}()},1425:function(e,t,n){},1428:function(e,t,n){"use strict";var r=n(1),a=n.n(r),o=n(1388),i=(n(1429),n(23)),s=n.n(i);n(351);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=u(this,f(t).apply(this,arguments))).state={expanded:!1,truncated:!1},e.handleTruncate=function(t){e.state.truncated!==t&&e.setState({truncated:t})},e.toggleLines=function(t){t.preventDefault(),e.setState({expanded:!e.state.expanded})},e}var n,i,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,r["Component"]),n=t,(i=[{key:"render",value:function(){var e=this.props,t=e.children,n=e.more,r=e.less,i=e.lines,c=e.width,l=this.state,u=l.expanded,f=l.truncated;return a.a.createElement("div",{className:"ellipsis-text"},a.a.createElement(o.a,{width:c,lines:!u&&i,ellipsis:a.a.createElement("span",null,"...",a.a.createElement("a",{href:"#",onClick:this.toggleLines,className:"expand-text"},n," ",a.a.createElement(s.a,{type:"down"}))),onTruncate:this.handleTruncate},a.a.createElement("div",{style:{width:c}},t)),!f&&u&&a.a.createElement("span",null," ",a.a.createElement("a",{href:"#",className:"expand-text",onClick:this.toggleLines},r)))}}])&&l(n.prototype,i),c&&l(n,c),t}();d.defaultProps={lines:3,more:"更多",less:"收起 >"},t.a=d},1429:function(e,t,n){},1430:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n(1);n(1431);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var l={hot:"hot",normal:"normal",wait:"wait",block:"block"},u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i(this,s(t).apply(this,arguments))}var n,a,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,r["Component"]),n=t,(a=[{key:"render",value:function(){var e=this.props,t=e.onTagClick,n=e.active,a=e.text,o=e.type;return r.createElement("span",{className:"status-tag ".concat(n?"active":""," ").concat(l[o]),onClick:t},a)}}])&&o(n.prototype,a),u&&o(n,u),t}()},1431:function(e,t,n){},1472:function(e,t,n){},1473:function(e,t,n){},1474:function(e,t,n){},1475:function(e,t,n){},1476:function(e,t,n){},1477:function(e,t,n){},1478:function(e,t,n){},1479:function(e,t,n){},1480:function(e,t,n){},1481:function(e,t,n){},1508:function(e,t,n){"use strict";n.r(t);var r=n(2),a=n(1),o=n(109),i=n(120),s=n(110),c=n(1420),l=n(200),u=(n(1472),n(11)),f=(n(1473),n(146)),p=n.n(f),d=(n(167),n(23)),m=n.n(d),h=(n(351),n(355),n(586),n(1385)),g=n.n(h),v=(n(1384),n(16)),b=n.n(v),y=n(588),w=n.n(y);function E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var S=function(e){var t={selectedRowKeys:e.state.selectedRowKeys,onChange:function(t,n){e.setState({selectedRowKeys:t})}},n=e.state.showPopconfirmId,r=[{title:"排序",width:120,render:function(t,r){return a.createElement("div",{className:"article-order-".concat(r.id)},a.createElement("p",null,r.ranking," ",a.createElement(g.a,{visible:r.id===n,icon:null,title:e.renderOrderElem(r),getPopupContainer:function(){return document.getElementsByClassName("article-order-".concat(r.id))[0]},onConfirm:e.confirmOrder.bind(void 0,r),onCancel:e.cancelOrder,okText:"确定",cancelText:"取消"},a.createElement(m.a,{type:"edit",onClick:function(){return e.setState({showPopconfirmId:r.id,order:{key:r.id,value:r.rank}})}}))," "))}},{title:"文章 ID",width:120,dataIndex:"articleId"},{title:"封面图",dataIndex:"coverImg",render:function(e){return e&&a.createElement("a",{href:e,target:"_blank"},a.createElement("img",{src:e,style:{width:60,height:60,objectFit:"contain"}}))}},{title:"文章",width:300,render:function(e,t){return a.createElement("div",null,a.createElement("h4",null,t.subjectName),a.createElement("p",null,t.title))}},{title:"发布者",width:80,dataIndex:"sourceName"},{title:"创建时间",dataIndex:"createTime",render:function(e,t){return e?b()(e).format("YYYY.MM.DD HH:mm:ss"):"---"}},{title:"数据",width:200,render:function(e,t){return a.createElement("div",null,a.createElement("p",null,a.createElement("span",null,"真实值："),a.createElement("span",null,t.viewCnt)),a.createElement("p",null,a.createElement("span",null,"优化值："),a.createElement("span",null,t.v1)),a.createElement("p",null,a.createElement("span",null,"评论数："),a.createElement("span",null,t.commentCnt)),a.createElement("p",null,a.createElement("span",null,"收藏数："),a.createElement("span",null,t.favorCnt)))}},{width:300,title:"操作",render:function(t,n){return a.createElement("div",{className:"common-list-table-operation"},a.createElement(g.a,{title:"请问是否确认移除文章？",onConfirm:e.deleteArticle.bind(e,n.id)},"移除"),a.createElement("span",{className:"common-list-table-operation-spliter"}),a.createElement("span",{onClick:function(){w()(n.link),e.$msg.success("复制成功")}},"复制链接"))}}],o={batchControl:{placeholder:"请选择",showBatchControl:!u.a.isEmpty(e.state.selectedRowKeys),options:[{title:"移除",value:"delete"}],onBatch:function(t){e.onBatch(t)}},widgets:[[{type:"Input",label:"文章 ID",placeholder:"请输入文章 ID",value:e.state.articleId||void 0,onChange:function(t){e.onArticleIDChange(t.target.value)}},{type:"Input",label:"文章标题",placeholder:"请输入文章标题",value:e.state.keyWord||void 0,onChange:function(t){e.onArticleTitleChange(t.target.value)}}],{type:"Select",label:"文章栏目",showSearch:!1,placeholder:"请选择文章栏目",value:e.state.subjectValue,option:{key:"subjectId",value:"subjectId",title:"subjectName",data:e.state.subjectOptions||[]},onFocus:function(){e.onSubjectFocus()},onSearch:function(t){e.onSubjectSearch(t)},onChange:function(t,n){e.onSubjectSelect(t,n)},onSelect:function(e,t){},onBlur:function(){},onPopupScroll:function(t){e.onSubjectPopupScroll(t)}},{type:"RangePicker",label:"创建时间",placeholder:["开始日期","结束日期"],showTime:{format:"HH:mm:ss"},format:"YYYY-MM-DD HH:mm:ss",alias:[1,7,30],value:e.state.dateRange||[],onChange:function(t){e.onDateRangeChange(t)}}],onSearch:function(){e.onSearch()},onReset:function(){e.onReset()}},i=Object.assign({},e.props.common.paginationConfig,{current:e.state.currentPage,total:e.props.shoe.articleListMeta.total,onChange:function(e,t){},onShowSizeChange:function(t,n){e.resetPagination(n,t)}});return{addBtn:{title:function(){return a.createElement(p.a,{type:"primary",onClick:function(){return e.goToEditor({})}},a.createElement(m.a,{type:"plus"})," 添加")}},searcher:o,table:{rowKey:"id",rowSelection:t,columns:r,loading:e.state.tableLoading,dataSource:e.props.shoe.articleList,pagination:i,onChange:function(t,n,r){var a={pageNum:t.current,pageSize:t.pageSize};if(!u.a.isEmpty(n))for(var o=0,i=Object.entries(n);o<i.length;o++){var s=E(i[o],2),c=s[0],l=s[1];a[c]=l?l[0]:void 0}e.setState({filter:Object.assign({},e.state.filter,a),currentPage:t.current},function(){e.getDataList(e.state.filter)})}}}},O=n(1419),k=n(1379),C=n.n(k),j=(n(1378),n(1369)),R=n.n(j),N=(n(1368),n(352)),I=n.n(N),T=(n(248),n(1373)),x=n.n(T),P=(n(1372),n(353)),D=n.n(P),_=(n(578),n(1474),n(1423));function L(e){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function V(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $(e){return($=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function M(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A(e,t){return(A=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var z=x.a.Item,F=(I.a.Group,D.a.Option,function(e,t,n){return{labelCol:{span:e,offset:n},wrapperCol:{span:t}}}),B=function(e){function t(e){var n,o,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,i=$(t).call(this,e),(n=!i||"object"!==L(i)&&"function"!=typeof i?M(o):i).state={articleId:void 0},n.renderEditor=function(){return a.createElement(x.a,{className:"editor-form"},a.createElement(z,Object.assign({},F(4,18),{style:{textAlign:"center"},label:"文章 ID",className:"video-select"}),a.createElement(I.a,{placeholder:"请输入文章 ID",value:n.state.articleId,onChange:function(e){n.setState({articleId:e.target.value})}})))},n.getValidation=function(e){var t=new _.a;return t.add(e.articleId,[{strategy:"isNonEmpty",errMsg:"请输入文章 ID"}]),t.start()},n.onSubmit=function(){return r.a(M(n),void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,r=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t={articleId:this.state.articleId,articleType:this.props.articleType},!(n=this.getValidation(t))){e.next=4;break}return e.abrupt("return",this.$msg.warn(n));case 4:this.$api.shoe.addArticle(t).then(function(e){0==e.data.ret?(r.$msg.success("文章添加成功"),setTimeout(function(){r.props.getDataList(),r.onCancel()},300)):r.$msg.error(e.data.msg)});case 5:case"end":return e.stop()}},e,this)}))},n.onCancel=function(){n.props.form.resetFields(),n.props.shoe.toggleArticleVisible(),n.setState({articleId:void 0})},n}var n,i,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&A(e,t)}(t,o["a"]),n=t,(i=[{key:"render",value:function(){var e=this.props.shoe.articleVisible;return a.createElement(R.a,{visible:e,title:"添加文章",onOk:this.onSubmit,onCancel:this.onCancel},this.renderEditor())}}])&&V(n.prototype,i),s&&V(n,s),t}(),Y=B=r.b([x.a.create(),Object(s.b)("common","community","shoe"),s.c],B),H=n(147),K=n.n(H),W=n(1382),U=n.n(W),q=n(585),G=n.n(q);function Z(e){return(Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function J(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function X(e){return(X=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Q(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ee(e,t){return(ee=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var te=function(e){function t(){var e,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,o=X(t).apply(this,arguments),(e=!o||"object"!==Z(o)&&"function"!=typeof o?Q(n):o).state={filter:{articleType:1},selectedRowKeys:[],dateRange:[],tableLoading:!1,currentPage:1,articleId:void 0,subjectValue:void 0,subjectOptions:[],order:{key:void 0,value:void 0},showPopconfirmId:0},e.resetPagination=function(t,n){return r.a(Q(e),void 0,void 0,regeneratorRuntime.mark(function e(){var a=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({filter:Object.assign({},this.state.filter,{pageSize:t,pageNum:n})},function(){return r.a(a,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=this.state.filter,this.getDataList(t);case 2:case"end":return e.stop()}},e,this)}))});case 1:case"end":return e.stop()}},e,this)}))},e.getDataList=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setState({tableLoading:!0,filter:Object.assign({},e.state.filter,t)},function(){return r.a(Q(e),void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$store.shoe.getArticleList(Object.assign({},this.state.filter,t));case 2:this.setState({tableLoading:!1});case 3:case"end":return e.stop()}},e,this)}))})},e.onSearch=function(){return r.a(Q(e),void 0,void 0,regeneratorRuntime.mark(function e(){var t,n=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this.state.filter).articleId||!Number.isNaN(Number(t.articleId))){e.next=3;break}return e.abrupt("return",this.$msg.error("请输入正确文章 ID"));case 3:this.setState({filter:Object.assign({},t,{pageNum:1}),currentPage:1},function(){n.getDataList(n.state.filter)});case 4:case"end":return e.stop()}},e,this)}))},e.goToEditor=function(t){e.props.shoe.setCurrentArticle(t),e.props.shoe.toggleArticleVisible()},e.onReset=function(){return r.a(Q(e),void 0,void 0,regeneratorRuntime.mark(function e(){var t,n=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t={pageNum:1,pageSize:this.state.filter.pageSize,articleType:1},this.setState({articleId:void 0,subjectValue:void 0,sortValue:void 0,keyWord:void 0,filterValue:void 0,dateRange:[],filter:t,currentPage:1},function(){n.getDataList(n.state.filter)});case 2:case"end":return e.stop()}},e,this)}))},e.onBatch=function(t){return r.a(Q(e),void 0,void 0,regeneratorRuntime.mark(function e(){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.state.selectedRowKeys,!t||!u.a.isEmpty(n)){e.next=3;break}return e.abrupt("return",this.$msg.warning("请选择至少一条记录"));case 3:"delete"===t&&this.deleteArticle(n);case 4:case"end":return e.stop()}},e,this)}))},e.onDateRangeChange=function(t){var n=Object.assign({},e.state.filter);u.a.isEmpty(t)?(n.startTime=void 0,n.endTime=void 0):(n.startTime=t[0].format("YYYY-MM-DD HH:mm:ss"),n.endTime=t[1].format("YYYY-MM-DD HH:mm:ss")),e.setState({dateRange:t,filter:n})},e.onArticleIDChange=function(t){e.setState({articleId:t,filter:Object.assign({},e.state.filter,{articleId:t||void 0})})},e.onArticleTitleChange=function(t){e.setState({keyWord:t,filter:Object.assign({},e.state.filter,{keyWord:t||void 0})})},e.onSortSelect=function(t,n){e.setState({sortValue:t,filter:Object.assign({},e.state.filter,{sort:t||void 0})})},e.onFilterSelect=function(t,n){e.setState({filterValue:t,filter:Object.assign({},e.state.filter,{subjectId:t||void 0})})},e.deleteArticle=function(t){return r.a(Q(e),void 0,void 0,regeneratorRuntime.mark(function e(){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,t instanceof Array||(t=[t]),e.next=4,this.$api.shoe.deleteArticle({ids:t});case 4:0==(n=e.sent).data.ret?(this.$msg.success("文章移除成功"),this.onSearch()):this.$msg.error(n.data.msg);case 6:case"end":return e.stop()}},e,this)}))},e.onSubjectFocus=function(){return r.a(Q(e),void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$api.shoe.getSubjectList({pageNum:1,pageSize:20});case 2:t=e.sent,this.setState({subjectOptions:t.data.data});case 4:case"end":return e.stop()}},e,this)}))},e.onSubjectPopupScroll=G()(function(t){return r.a(Q(e),void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return");case 6:t=e.sent,this.setState({keywordOptions:U()(this.state.subjectOptions,t.data.data.list,"wordId"),subjectOptionsMeta:{total:t.data.data.total,pageNum:t.data.data.pageNum,pageSize:t.data.data.pageSize}});case 8:case"end":return e.stop()}},e,this)}))},300),e.onSubjectSearch=K()(function(t){return r.a(Q(e),void 0,void 0,regeneratorRuntime.mark(function e(){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$api.shoe.getBrandList({word:t,pageSize:10,pageNum:1});case 2:n=e.sent,this.setState({subjectOptions:n.data.data});case 4:case"end":return e.stop()}},e,this)}))},500),e.onSubjectSelect=function(t,n){var r=n.props.$data.subjectId;e.setState({subjectValue:t,filter:Object.assign({},e.state.filter,{subjectId:r||void 0})},function(){e.onSearch()})},e.renderOrderElem=function(t){var n=e.state.order;return a.createElement("div",{key:t.id},a.createElement("span",null,"排序  "),a.createElement(C.a,{min:0,onChange:e.changeOrder.bind(Q(e),t.id),value:n.value}))},e.changeOrder=function(t,n){return n&&Number.isNaN(Number(n))?e.$msg.error("请输入正确排序值"):n&&n.toString().length>3?e.$msg.error("排序值不得超过 3 位"):void e.setState({order:{key:t,value:n}})},e.confirmOrder=function(t){return r.a(Q(e),void 0,void 0,regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.order,e.next=3,this.$api.shoe.updateArticleRank({id:t.key,ranking:t.value});case 3:0==(n=e.sent).data.ret?(this.$msg.success("修改排序成功"),this.getDataList(this.state.filter),this.cancelOrder()):this.$msg.error(n.data.msg);case 5:case"end":return e.stop()}},e,this)}))},e.cancelOrder=function(){e.setState({showPopconfirmId:0,order:{key:void 0,value:void 0}})},e}var n,i,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ee(e,t)}(t,o["a"]),n=t,(i=[{key:"componentDidMount",value:function(){return r.a(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,r,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=this.props.common.paginationConfig,n=t.defaultPageSize,r=t.defaultCurrent,a=this.props.location,this.$qs.parse(a.search),this.resetPagination(n,r);case 4:case"end":return e.stop()}},e,this)}))}},{key:"render",value:function(){var e=this;return a.createElement("div",{className:"recommend-article"},a.createElement(O.a,Object.assign({},this.props,{config:S(this)})),a.createElement(Y,{getDataList:function(){e.getDataList()},articleType:1}))}}])&&J(n.prototype,i),s&&J(n,s),t}(),ne=te=r.b([Object(s.b)("common","shoe","community","feed","comment"),s.c],te),re=(n(1475),n(1428));function ae(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var oe=function(e){var t={selectedRowKeys:e.state.selectedRowKeys,onChange:function(t,n){e.setState({selectedRowKeys:t})}},n=e.state.showPopconfirmId,r=[{title:"排序",width:120,render:function(t,r){return a.createElement("div",{className:"article-order-".concat(r.id)},a.createElement("p",null,r.ranking," ",a.createElement(g.a,{visible:r.id===n,icon:null,title:e.renderOrderElem(r),getPopupContainer:function(){return document.getElementsByClassName("article-order-".concat(r.id))[0]},onConfirm:e.confirmOrder.bind(void 0,r),onCancel:e.cancelOrder,okText:"确定",cancelText:"取消"},a.createElement(m.a,{type:"edit",onClick:function(){return e.setState({showPopconfirmId:r.id,order:{key:r.id,value:r.ranking}})}}))," "))}},{title:"FID",dataIndex:"fid"},{title:"视频图",dataIndex:"imgUrl",render:function(e,t){return e&&a.createElement("div",{style:{backgroundColor:"#e8e8e8",border:"1px solid rgba(232, 232, 232, 1)",width:60,height:60}},a.createElement("a",{href:t.imgUrl,target:"_blank"},a.createElement("img",{src:t.imgUrl,style:{objectFit:"contain"}})))}},{title:"标题",render:function(e,t){return a.createElement("div",{style:{marginLeft:20}},a.createElement("h4",null,"".concat(t.title)),a.createElement(re.a,{width:420},a.createElement("p",{className:"shoe-list-table-detail-content",dangerouslySetInnerHTML:{__html:t.content}})))}},{title:"发布者",width:80,dataIndex:"publisher",render:function(e,t){return a.createElement("div",{style:{textAlign:"center"}},a.createElement("p",null,t.nick),a.createElement("p",null,"(ID：",t.uid,")"))}},{title:"发布时间",dataIndex:"createTime",render:function(e,t){return e?b()(e).format("YYYY.MM.DD HH:mm:ss"):"---"}},{title:"数据",render:function(e,t){return a.createElement("div",null,a.createElement("p",null,a.createElement("span",null,"点赞："),a.createElement("span",null,t.pointsNum)),a.createElement("p",null,a.createElement("span",null,"评论："),a.createElement("span",null,t.cmtNum)),a.createElement("p",null,a.createElement("span",null,"播放："),a.createElement("span",null,t.clickNum)))}},{width:300,title:"操作",render:function(t,n){return a.createElement("div",{className:"common-list-table-operation"},a.createElement(g.a,{title:"请问是否确认移除文章？",onConfirm:e.deleteVideo.bind(e,n.id)},"移除"))}}],o={batchControl:{placeholder:"请选择",showBatchControl:!u.a.isEmpty(e.state.selectedRowKeys),options:[{title:"移除",value:"delete"}],onBatch:function(t){e.onBatch(t)}},widgets:[[{type:"Input",label:"动态 ID",placeholder:"请输入动态 ID",value:e.state.fid||void 0,onChange:function(t){e.onArticleIDChange(t.target.value)}},{type:"SelectInput",label:"用户",placeholder:"请输入用户 ID 或昵称",options:[{title:"用户 ID",value:"uid"},{title:"用户昵称",value:"nick"}],inputValue:e.state.userValue,selectValue:e.state.userField,onSelectChange:function(t){e.setUserField(t)},onInputChange:function(t){e.setUserValue(t.target.value)},onPressEnter:function(){e.onSearch()}}],{type:"RangePicker",label:"发布时间",placeholder:["开始日期","结束日期"],showTime:{format:"HH:mm:ss"},format:"YYYY-MM-DD HH:mm:ss",alias:[1,7,30],value:e.state.dateRange||[],onChange:function(t){e.onDateRangeChange(t)}}],onSearch:function(){e.onSearch()},onReset:function(){e.onReset()}},i=Object.assign({},e.props.common.paginationConfig,{current:e.state.currentPage,total:e.props.shoe.videoListMeta.total,onChange:function(e,t){},onShowSizeChange:function(t,n){e.resetPagination(n,t)}});return{addBtn:{title:function(){return a.createElement(p.a,{type:"primary",onClick:function(){return e.goToEditor({})}},a.createElement(m.a,{type:"plus"})," 添加")}},searcher:o,table:{rowKey:"id",rowSelection:t,columns:r,loading:e.state.tableLoading,dataSource:e.props.shoe.videoList,pagination:i,onChange:function(t,n,r){var a={pageNum:t.current,pageSize:t.pageSize};if(!u.a.isEmpty(n))for(var o=0,i=Object.entries(n);o<i.length;o++){var s=ae(i[o],2),c=s[0],l=s[1];a[c]=l?l[0]:void 0}e.setState({filter:Object.assign({},e.state.filter,a),currentPage:t.current},function(){e.getDataList(e.state.filter)})}}}};n(1476);function ie(e){return(ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function se(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ce(e){return(ce=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function le(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ue(e,t){return(ue=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var fe=x.a.Item,pe=(I.a.Group,D.a.Option,function(e,t,n){return{labelCol:{span:e,offset:n},wrapperCol:{span:t}}}),de=function(e){function t(e){var n,o,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,i=ce(t).call(this,e),(n=!i||"object"!==ie(i)&&"function"!=typeof i?le(o):i).state={options:[],fid:void 0},n.renderEditor=function(){return a.createElement(x.a,{className:"editor-form"},a.createElement(fe,Object.assign({},pe(4,18),{style:{textAlign:"center"},label:"FID",className:"video-select"}),a.createElement(I.a,{placeholder:"请输入视频动态 ID",value:n.state.fid,onChange:function(e){n.setState({fid:e.target.value})}})))},n.getValidation=function(e){var t=new _.a;return t.add(e.fid,[{strategy:"isNonEmpty",errMsg:"请输入视频动态 ID"}]),t.start()},n.onSubmit=function(){return r.a(le(n),void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,r=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t={fid:Number(this.state.fid)},!(n=this.getValidation(t))){e.next=4;break}return e.abrupt("return",this.$msg.warn(n));case 4:this.$api.shoe.addVideo(t).then(function(e){0==e.data.ret?(r.$msg.success("视频动态添加成功"),setTimeout(function(){r.props.getDataList(),r.onCancel()},300)):r.$msg.error(e.data.msg)});case 5:case"end":return e.stop()}},e,this)}))},n.onCancel=function(){n.props.form.resetFields(),n.props.shoe.toggleVideoVisible(),n.setState({fid:void 0})},n}var n,i,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ue(e,t)}(t,o["a"]),n=t,(i=[{key:"render",value:function(){var e=this.props.shoe.videoVisible;return a.createElement(R.a,{visible:e,title:"添加视频",onOk:this.onSubmit,onCancel:this.onCancel},this.renderEditor())}}])&&se(n.prototype,i),s&&se(n,s),t}(),me=de=r.b([x.a.create(),Object(s.b)("common","community","shoe"),s.c],de);function he(e){return(he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ge(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ve(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function be(e){return(be=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ye(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function we(e,t){return(we=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ee=function(e){function t(){var e,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,o=be(t).apply(this,arguments),(e=!o||"object"!==he(o)&&"function"!=typeof o?ye(n):o).state={filter:{},selectedRowKeys:[],dateRange:[],userField:"uid",userValue:void 0,tableLoading:!1,currentPage:1,order:{key:void 0,value:void 0},showPopconfirmId:0},e.resetPagination=function(t,n){return r.a(ye(e),void 0,void 0,regeneratorRuntime.mark(function e(){var a=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({filter:Object.assign({},this.state.filter,{pageSize:t,pageNum:n})},function(){return r.a(a,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=this.state.filter,this.getDataList(t);case 2:case"end":return e.stop()}},e,this)}))});case 1:case"end":return e.stop()}},e,this)}))},e.getDataList=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setState({tableLoading:!0,filter:Object.assign({},e.state.filter,t)},function(){return r.a(ye(e),void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$store.shoe.getVideoList(Object.assign({},this.state.filter,t));case 2:this.setState({tableLoading:!1});case 3:case"end":return e.stop()}},e,this)}))})},e.onSearch=function(){return r.a(ye(e),void 0,void 0,regeneratorRuntime.mark(function e(){var t,n=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this.state.filter).fid||!Number.isNaN(Number(t.fid))){e.next=3;break}return e.abrupt("return",this.$msg.error("请输入正确 fid"));case 3:if(!t.uid||!Number.isNaN(Number(t.uid))){e.next=5;break}return e.abrupt("return",this.$msg.error("请输入正确 uid"));case 5:this.setState({filter:Object.assign({},t,{pageNum:1}),currentPage:1},function(){n.getDataList(n.state.filter)});case 6:case"end":return e.stop()}},e,this)}))},e.setUserField=function(t){var n=e.state.filter;"uid"!==t?delete n[t]:"nick"!==t&&delete n[t],e.setState({userField:t,userValue:void 0,filter:Object.assign({},n,ge({},t,void 0))})},e.setUserValue=function(t){e.setState({userValue:t,filter:Object.assign({},e.state.filter,ge({},e.state.userField,t||void 0))})},e.onUserChange=function(t){e.setState({userValue:t,filter:Object.assign({},e.state.filter,{nick:t||void 0})})},e.goToEditor=function(){e.props.shoe.toggleVideoVisible()},e.onReset=function(){return r.a(ye(e),void 0,void 0,regeneratorRuntime.mark(function e(){var t,n=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t={pageNum:1,pageSize:this.state.filter.pageSize},this.setState({fid:void 0,keyWord:void 0,sortValue:void 0,filterValue:void 0,userValue:void 0,dateRange:[],filter:t,currentPage:1},function(){n.getDataList(n.state.filter)});case 2:case"end":return e.stop()}},e,this)}))},e.onBatch=function(t){return r.a(ye(e),void 0,void 0,regeneratorRuntime.mark(function e(){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.state.selectedRowKeys,!t||!u.a.isEmpty(n)){e.next=3;break}return e.abrupt("return",this.$msg.warning("请选择至少一条记录"));case 3:"delete"===t&&this.deleteVideo(n);case 4:case"end":return e.stop()}},e,this)}))},e.onDateRangeChange=function(t){var n=Object.assign({},e.state.filter);u.a.isEmpty(t)?(n.startTime=void 0,n.endTime=void 0):(n.startTime=t[0].format("YYYY-MM-DD HH:mm:ss"),n.endTime=t[1].format("YYYY-MM-DD HH:mm:ss")),e.setState({dateRange:t,filter:n})},e.onArticleIDChange=function(t){e.setState({fid:t,filter:Object.assign({},e.state.filter,{fid:t||void 0})})},e.onArticleTitleChange=function(t){e.setState({articleTitle:t,filter:Object.assign({},e.state.filter,{articleTitle:t||void 0})})},e.onSortSelect=function(t,n){e.setState({sortValue:t,filter:Object.assign({},e.state.filter,{sort:t||void 0})})},e.onFilterSelect=function(t,n){e.setState({filterValue:t,filter:Object.assign({},e.state.filter,{filter:t||void 0})})},e.deleteVideo=function(t){return r.a(ye(e),void 0,void 0,regeneratorRuntime.mark(function e(){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,t instanceof Array||(t=[t]),e.next=4,this.$api.shoe.deleteVideo({ids:t});case 4:0==(n=e.sent).data.ret?(this.$msg.success("视频移除成功"),this.onSearch()):this.$msg.error(n.data.msg);case 6:case"end":return e.stop()}},e,this)}))},e.renderOrderElem=function(t){var n=e.state.order;return a.createElement("div",{key:t.id},a.createElement("span",null,"排序  "),a.createElement(C.a,{min:0,onChange:e.changeOrder.bind(ye(e),t.id),value:n.value}))},e.changeOrder=function(t,n){return n&&Number.isNaN(Number(n))?e.$msg.error("请输入正确排序值"):n&&n.toString().length>3?e.$msg.error("排序值不得超过 3 位"):void e.setState({order:{key:t,value:n}})},e.confirmOrder=function(t){return r.a(ye(e),void 0,void 0,regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.order,e.next=3,this.$api.shoe.updateVideoRank({id:t.key,ranking:t.value});case 3:0==(n=e.sent).data.ret?(this.$msg.success("修改排序成功"),this.getDataList(this.state.filter),this.cancelOrder()):this.$msg.error(n.data.msg);case 5:case"end":return e.stop()}},e,this)}))},e.cancelOrder=function(){e.setState({showPopconfirmId:0,order:{key:void 0,value:void 0}})},e}var n,i,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&we(e,t)}(t,o["a"]),n=t,(i=[{key:"componentDidMount",value:function(){return r.a(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,r,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=this.props.common.paginationConfig,n=t.defaultPageSize,r=t.defaultCurrent,a=this.props.location,this.$qs.parse(a.search),this.resetPagination(n,r);case 4:case"end":return e.stop()}},e,this)}))}},{key:"render",value:function(){var e=this;return a.createElement("div",{className:"recommend-article"},a.createElement(O.a,Object.assign({},this.props,{config:oe(this)})),a.createElement(me,{getDataList:function(){e.getDataList()}}))}}])&&ve(n.prototype,i),s&&ve(n,s),t}(),Se=Ee=r.b([Object(s.b)("common","shoe","community","feed","comment"),s.c],Ee),Oe=(n(1477),n(58));function ke(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Ce=function(e){var t={selectedRowKeys:e.state.selectedRowKeys,onChange:function(t,n){e.setState({selectedRowKeys:t})}},n=e.state.showPopconfirmId,r=[{title:"排序",width:120,render:function(t,r){return a.createElement("div",{className:"article-order-".concat(r.id)},a.createElement("p",null,r.ranking," ",a.createElement(g.a,{visible:r.id===n,icon:null,title:e.renderOrderElem(r),getPopupContainer:function(){return document.getElementsByClassName("article-order-".concat(r.id))[0]},onConfirm:e.confirmOrder.bind(void 0,r),onCancel:e.cancelOrder,okText:"确定",cancelText:"取消"},a.createElement(m.a,{type:"edit",onClick:function(){return e.setState({showPopconfirmId:r.id,order:{key:r.id,value:r.rank}})}}))," "))}},{title:"跑鞋 ID",dataIndex:"shoeId",width:120},{title:"类别",width:80,dataIndex:"shoeType",render:function(t,n){var r=e.props.shoe.shoeTypeList.find(function(e){return e.shoeTypeId==t});return r?r.shoeTypeName:"--"}},{title:"介绍",render:function(e,t){return a.createElement("div",{style:{display:"flex"}},e&&a.createElement("div",{style:{backgroundColor:"#e8e8e8",border:"1px solid rgba(232, 232, 232, 1)",width:60,height:60}},a.createElement("a",{href:t.coverImg,target:"_blank"},a.createElement("img",{src:t.coverImg,style:{objectFit:"contain"}}))),a.createElement("div",{style:{marginLeft:20}},a.createElement("h4",null,t.model),a.createElement(re.a,{width:420},a.createElement("p",{className:"shoe-list-table-detail-content",dangerouslySetInnerHTML:{__html:t.recmWord}}))))}},{title:"跑鞋评分",sorter:!0,dataIndex:"avgScore",width:200,render:function(e,t){return e}},{title:"推荐者",width:100,dataIndex:"recmType",render:function(e){return Oe.i.shoeTypeMap[e]||"--"}},{width:300,title:"操作",render:function(t,n){return a.createElement("div",{className:"common-list-table-operation"},a.createElement("span",{onClick:function(){e.goToEditor(n)}},"编辑"),a.createElement("span",{className:"common-list-table-operation-spliter"}),a.createElement(g.a,{title:"请问是否确认从排行榜中移除跑鞋？",onConfirm:e.deleteRank.bind(e,n.id)},"删除"))}}],o={batchControl:{placeholder:"请选择",showBatchControl:!u.a.isEmpty(e.state.selectedRowKeys),options:[{title:"移除",value:"delete"}],onBatch:function(t){e.onBatch(t)}},widgets:[[{type:"SelectInput",label:"跑鞋",placeholder:"请输入跑鞋 ID 或型号",options:[{title:"跑鞋 ID",value:"shoeId"},{title:"跑鞋型号",value:"shoeName"}],inputValue:e.state.shoeValue,selectValue:e.state.shoeField,onSelectChange:function(t){e.setShoeField(t)},onInputChange:function(t){e.setShoeValue(t.target.value)},onPressEnter:function(t){e.onSearch()}},{type:"Select",label:"选择类别",showSearch:!0,placeholder:"按类别筛选",value:e.state.typeValue,option:{key:"shoeTypeId",value:"shoeTypeName",title:"shoeTypeName",data:e.props.shoe.shoeTypeList||[]},onFocus:function(){},onSearch:function(e){},onChange:function(t,n){e.onTypeSelect(t,n)},onSelect:function(e,t){},onBlur:function(){},onPopupScroll:function(e){}}]],onSearch:function(){e.onSearch()},onReset:function(){e.onReset()}},i=Object.assign({},e.props.common.paginationConfig,{current:e.state.currentPage,total:e.props.shoe.rankListMeta.total,onChange:function(e,t){},onShowSizeChange:function(t,n){e.resetPagination(n,t)}});return{addBtn:{title:function(){return a.createElement(p.a,{type:"primary",onClick:function(){return e.goToEditor({})}},a.createElement(m.a,{type:"plus"})," 添加")}},searcher:o,table:{rowKey:"id",rowSelection:t,columns:r,loading:e.state.tableLoading,dataSource:e.props.shoe.rankList,pagination:i,onChange:function(t,n,r){var a={pageNum:t.current,pageSize:t.pageSize};if(!u.a.isEmpty(n))for(var o=0,i=Object.entries(n);o<i.length;o++){var s=ke(i[o],2),c=s[0],l=s[1];a[c]=l?l[0]:void 0}u.a.isEmpty(r)?(delete a.orderBy,delete a.sort):(a.orderBy="".concat(r.field),a.sort="".concat("descend"===r.order?"desc":"asc")),e.setState({filter:Object.assign({},e.state.filter,a),currentPage:t.current},function(){e.getDataList(e.state.filter)})}}}},je=n(356),Re=n.n(je);n(587),n(1478);function Ne(e){return(Ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ie(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Te(e){return(Te=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Pe(e,t){return(Pe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var De=x.a.Item,_e=D.a.Option,Le=function(e,t,n){return{labelCol:{span:e,offset:n},wrapperCol:{span:t}}},Ve=function(e){function t(){var e,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,o=Te(t).apply(this,arguments),(e=!o||"object"!==Ne(o)&&"function"!=typeof o?xe(n):o).state={},e.renderEditor=function(){var t=e.props.form.getFieldDecorator,n=e.props.shoe,o=n.setCurrentRank,i=n.currentRank,s=e.props.shoe.shoeTypeList;return a.createElement(x.a,{className:"editor-form"},a.createElement(De,Object.assign({label:"跑鞋 ID"},Le(6,14),{required:!0}),t("shoeId",{initialValue:i&&i.shoeId})(a.createElement(I.a,{disabled:!(!i||!i.id),placeholder:"请输入跑鞋 ID",onChange:function(e){o({shoeId:e.target.value},!1)}}))),a.createElement(De,Object.assign({label:"选择加入的分类",className:"type-select"},Le(6,14),{required:!0}),t("shoeType",{initialValue:i&&i.shoeType&&i.shoeType.toString()})(a.createElement(D.a,{allowClear:!0,style:{minWidth:258},getPopupContainer:function(){return document.getElementsByClassName("type-select")[0]},showSearch:!0,placeholder:"请选择排行榜分类",filterOption:!1,onFocus:function(){return r.a(xe(e),void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}))},onPopupScroll:function(){},onSearch:function(){},onChange:function(e,t){var n=u.a.isEmpty(t)?null:t.props.$data;o({shoeType:n.shoeTypeId},!1)}},(s||[]).map(function(e){return a.createElement(_e,{key:e.shoeTypeId,$data:e},e.shoeTypeName)})))),a.createElement(De,Object.assign({label:"输入推荐词"},Le(6,14)),t("recmWord",{initialValue:i&&i.recmWord})(a.createElement(I.a,{placeholder:"请输入 0-30 个字",onChange:function(e){o({recmWord:e.target.value},!1)}}))),a.createElement(De,Object.assign({label:"推荐者"},Le(6,14),{required:!0}),t("recommender",{initialValue:i&&i.recmType})(a.createElement(Re.a.Group,{onChange:function(e){o({recmType:e.target.value},!1)}},a.createElement(Re.a,{value:1},"官方"),a.createElement(Re.a,{value:2},"跑友")))))},e.getValidation=function(e){var t=new _.a;return t.add(e.shoeId,[{strategy:"isNonEmpty",errMsg:"请输入跑鞋 ID"}]),t.add(e.shoeType,[{strategy:"isNonEmpty",errMsg:"请选择分类"}]),e.recmWord&&t.add(e.recmWord,[{strategy:"maxLength:30",errMsg:"请输入 30 字内的推荐词"}]),t.add(e.recmType,[{strategy:"isNonEmpty",errMsg:"请选择推荐者"}]),t.start()},e.onSubmit=function(){return r.a(xe(e),void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,r,a,o,i,s=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props.shoe,n=t.currentRank,r=t.setCurrentRank,a=!(u.a.isEmpty(n)||!n.id),o={shoeId:n.shoeId,shoeType:n.shoeType,recmWord:n.recmWord,recmType:n.recmType},!(i=this.getValidation(o))){e.next=6;break}return e.abrupt("return",this.$msg.warn(i));case 6:a&&(o.id=n.id),this.$api.shoe.updateRank(o).then(function(e){0==e.data.ret?(a?s.$msg.success("跑鞋编辑成功"):s.$msg.success("跑鞋添加成功"),r({},!0),setTimeout(function(){s.props.getDataList(),s.onCancel()},300)):s.$msg.error(e.data.msg)});case 8:case"end":return e.stop()}},e,this)}))},e.onCancel=function(){e.props.shoe.setCurrentRank({},!0),e.props.form.resetFields(),e.props.shoe.toggleRankVisible()},e}var n,i,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Pe(e,t)}(t,o["a"]),n=t,(i=[{key:"render",value:function(){var e=this.props.shoe,t=e.rankVisible,n=e.currentRank;return a.createElement(R.a,{className:"rank-list-modal",visible:t,title:u.a.isEmpty(n.id)?"添加排行榜单品":"编辑排行榜单品",onOk:this.onSubmit,onCancel:this.onCancel},this.renderEditor())}}])&&Ie(n.prototype,i),s&&Ie(n,s),t}(),$e=Ve=r.b([x.a.create(),Object(s.b)("common","community","shoe"),s.c],Ve);function Me(e){return(Me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ae(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ze(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Fe(e){return(Fe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Be(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ye(e,t){return(Ye=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var He=function(e){function t(){var e,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,o=Fe(t).apply(this,arguments),(e=!o||"object"!==Me(o)&&"function"!=typeof o?Be(n):o).state={filter:{},selectedRowKeys:[],shoeField:"shoeId",shoeValue:void 0,tableLoading:!1,currentPage:1,order:{key:void 0,value:void 0},showPopconfirmId:0,typeOptionsMeta:{total:0,pageNum:1,pageSize:20},typeOptions:[]},e.resetPagination=function(t,n){return r.a(Be(e),void 0,void 0,regeneratorRuntime.mark(function e(){var a=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({filter:Object.assign({},this.state.filter,{pageSize:t,pageNum:n})},function(){return r.a(a,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=this.state.filter,this.getDataList(t);case 2:case"end":return e.stop()}},e,this)}))});case 1:case"end":return e.stop()}},e,this)}))},e.getDataList=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setState({tableLoading:!0,filter:Object.assign({},e.state.filter,t)},function(){return r.a(Be(e),void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$store.shoe.getRankList(Object.assign({},this.state.filter,t));case 2:this.setState({tableLoading:!1});case 3:case"end":return e.stop()}},e,this)}))})},e.onSearch=function(){return r.a(Be(e),void 0,void 0,regeneratorRuntime.mark(function e(){var t,n=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this.state.filter).shoeId||!Number.isNaN(Number(t.shoeId))){e.next=3;break}return e.abrupt("return",this.$msg.error("请输入正确 shoeId"));case 3:this.setState({filter:Object.assign({},t,{pageNum:1}),currentPage:1},function(){n.getDataList(n.state.filter)});case 4:case"end":return e.stop()}},e,this)}))},e.goToEditor=function(t){e.props.shoe.setCurrentRank(t,!0),e.props.shoe.toggleRankVisible()},e.setShoeField=function(t){var n=e.state.filter;"shoeId"!==t?delete n.shoeId:"shoeName"!==t&&delete n.shoeName,e.setState({shoeField:t,shoeValue:void 0,filter:Object.assign({},n,Ae({},t,void 0))})},e.setShoeValue=function(t){e.setState({shoeValue:t,filter:Object.assign({},e.state.filter,Ae({},e.state.shoeField,t||void 0))})},e.onReset=function(){return r.a(Be(e),void 0,void 0,regeneratorRuntime.mark(function e(){var t,n=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t={pageNum:1,pageSize:this.state.filter.pageSize},this.setState({shoeValue:void 0,sortValue:void 0,typeValue:void 0,filter:t,currentPage:1},function(){n.getDataList(n.state.filter)});case 2:case"end":return e.stop()}},e,this)}))},e.onBatch=function(t){return r.a(Be(e),void 0,void 0,regeneratorRuntime.mark(function e(){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.state.selectedRowKeys,!t||!u.a.isEmpty(n)){e.next=3;break}return e.abrupt("return",this.$msg.warning("请选择至少一条记录"));case 3:"delete"===t&&this.deleteRank(n);case 4:case"end":return e.stop()}},e,this)}))},e.deleteRank=function(t){return r.a(Be(e),void 0,void 0,regeneratorRuntime.mark(function e(){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,t instanceof Array||(t=[t]),e.next=4,this.$api.shoe.deleteRank({ids:t});case 4:0==(n=e.sent).data.ret?(this.$msg.success("跑鞋从排行榜移除成功"),this.onSearch()):this.$msg.error(n.data.msg);case 6:case"end":return e.stop()}},e,this)}))},e.renderOrderElem=function(t){var n=e.state.order;return a.createElement("div",{key:t.id},a.createElement("span",null,"排序  "),a.createElement(C.a,{min:0,onChange:e.changeOrder.bind(Be(e),t.id),value:n.value}))},e.changeOrder=function(t,n){return n&&Number.isNaN(Number(n))?e.$msg.error("请输入正确排序值"):n&&n.toString().length>3?e.$msg.error("排序值不得超过 3 位"):void e.setState({order:{key:t,value:n}})},e.onTypeFocus=function(){return r.a(Be(e),void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$api.shoe.getTypeList({pageNum:1,pageSize:20});case 2:t=e.sent,this.setState({typeOptions:t.data.data.list,typeOptionsMeta:{total:t.data.data.total,pageNum:t.data.data.pageNum,pageSize:t.data.data.pageSize}});case 4:case"end":return e.stop()}},e,this)}))},e.onTypePopupScroll=G()(function(t){return r.a(Be(e),void 0,void 0,regeneratorRuntime.mark(function e(){var n,r,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.state,r=n.typeOptions,a=n.typeOptionsMeta,!(!(!t||!t.target)&&t.target.scrollHeight-(t.target.scrollTop+t.target.clientHeight)<=10&&a.total>r.length)){e.next=7;break}return e.next=5,this.$api.shoe.getBrandList({pageNum:a.pageNum+1,pageSize:20});case 5:o=e.sent,this.setState({typeOptions:U()(this.state.typeOptions,o.data.data.list,"brandId"),typeOptionsMeta:{total:o.data.data.total,pageNum:o.data.data.pageNum,pageSize:o.data.data.pageSize}});case 7:case"end":return e.stop()}},e,this)}))},300),e.onTypeSearch=K()(function(t){return r.a(Be(e),void 0,void 0,regeneratorRuntime.mark(function e(){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$api.shoe.getTypeList({brandName:t,pageSize:10,pageNum:1});case 2:n=e.sent,this.setState({typeOptions:n.data.data.list});case 4:case"end":return e.stop()}},e,this)}))},500),e.onTypeSelect=function(t,n){var r=n.props.$data.shoeTypeId;e.setState({typeValue:t,filter:Object.assign({},e.state.filter,{shoeType:r||void 0})},function(){e.onSearch()})},e.confirmOrder=function(t){return r.a(Be(e),void 0,void 0,regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.order,e.next=3,this.$api.shoe.updateRankRank({id:t.key,ranking:t.value});case 3:0==(n=e.sent).data.ret?(this.$msg.success("修改排序成功"),this.getDataList(this.state.filter),this.cancelOrder()):this.$msg.error(n.data.msg);case 5:case"end":return e.stop()}},e,this)}))},e.cancelOrder=function(){e.setState({showPopconfirmId:0,order:{key:void 0,value:void 0}})},e}var n,i,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ye(e,t)}(t,o["a"]),n=t,(i=[{key:"componentDidMount",value:function(){return r.a(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,r,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.common.paginationConfig,n=t.defaultPageSize,r=t.defaultCurrent,a=this.props.location,this.$qs.parse(a.search),e.next=5,this.$store.shoe.getShoeTypeList({});case 5:this.resetPagination(n,r);case 6:case"end":return e.stop()}},e,this)}))}},{key:"render",value:function(){var e=this;return a.createElement("div",{className:"rank-list"},a.createElement(O.a,Object.assign({},this.props,{config:Ce(this)})),a.createElement($e,{getDataList:function(){e.getDataList()}}))}}])&&ze(n.prototype,i),s&&ze(n,s),t}(),Ke=He=r.b([Object(s.b)("common","shoe","community","feed","comment"),s.c],He),We=(n(1479),n(1424)),Ue=n(1430);function qe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Ge=function(e){var t={selectedRowKeys:e.state.selectedRowKeys,onChange:function(t,n){e.setState({selectedRowKeys:t})}},n=(e.state.showPopconfirmId,[{title:"排序",width:200,render:function(t,n){return a.createElement("div",{className:"praise-order-".concat(n.id)},a.createElement("p",null,n.rank," ",a.createElement(g.a,{visible:n.id,icon:null,title:e.renderOrderElem(n),getPopupContainer:function(){return document.getElementsByClassName("praise-order-".concat(n.id))[0]},onConfirm:e.confirmOrder.bind(void 0,n),onCancel:e.cancelOrder,okText:"确定",cancelText:"取消"},a.createElement(m.a,{type:"edit",onClick:function(){return e.setState({showPopconfirmId:n.id,order:{key:n.id,value:n.rank}})}}))," "))}},{title:"口碑 ID",dataIndex:"id"},{title:"口碑详情",width:800,render:function(t,n){var r=u.a.parseEmoji(n.content),o=[];return o=u.a.isEmpty(n.imgs)?[]:n.imgs.filter(function(e){return!!e}).map(function(e){return{url:e}}),a.createElement("div",{className:"shoe-list-table-detail"},a.createElement("div",{className:"shoe-list-table-detail-left"},a.createElement("h4",null,n.title),n.content&&n.content.length>200?a.createElement(re.a,{width:600},a.createElement("p",{className:"shoe-list-table-detail-content",dangerouslySetInnerHTML:{__html:r}})):a.createElement("p",{className:"shoe-list-table-detail-content",dangerouslySetInnerHTML:{__html:r}}),a.createElement("div",{className:"comment-imgs"},o.map(function(t,n){return a.createElement("a",{key:n,onClick:function(){e.setState({currentGallery:o,currentGalleryIndex:n,galleryVisible:!0})}},a.createElement("img",{src:t.url,alt:"",style:{objectFit:"contain"}}))})),a.createElement("div",{className:"shoe-list-table-detail-shoelink"},a.createElement("span",null,"跑鞋"),a.createElement("span",null,n.brandName),a.createElement("a",{onClick:function(){var t="/admin/shoe/sku/list?shoeId=".concat(n.shoeId);e.props.history.push(t)}},n.shoeName)),a.createElement("div",{className:"shoe-list-table-detail-profile"},a.createElement("p",null,a.createElement("img",{src:n.faceUrl,alt:""}),a.createElement("span",{className:"shoe-list-table-detail-profile-name"},n.nick),a.createElement("span",{className:"shoe-list-table-detail-profile-fans"},"（ID：",n.uid)),a.createElement("p",{className:"shoe-list-table-detail-profile-site"},a.createElement("span",null,"发布于 ")),a.createElement("p",{className:"shoe-list-table-detail-profile-time"},b()(n.createTime).format("YYYY.MM.DD HH:mm:ss")))))}},{title:"点赞数",dataIndex:"rate",width:100,render:function(e,t){return e}},{title:"状态",width:100,filters:[{text:"正常",value:1},{text:"屏蔽",value:2}],dataIndex:"status",filterMultiple:!1,render:function(e,t){var n={1:"normal",2:"block",3:"block",0:"hot"}[t.status],r={1:"正常",2:"屏蔽",3:"删除",0:"热门"}[t.status];return t.luSum>7&&t.luRatio>.75&&(n="hot",r="热门"),a.createElement(We.a,{type:n,text:r})}},{width:300,title:"操作",render:function(t,n){var r={1:[a.createElement(Ue.a,{type:"block",onTagClick:function(){return e.toggleStatus(2,n.commentId)},text:"蔽"})],2:[a.createElement(Ue.a,{type:"block",active:!0,text:"蔽",onTagClick:function(){return e.toggleStatus(1,n.commentId)}})],3:[],0:[a.createElement(Ue.a,{type:"block",onTagClick:function(){return e.toggleStatus(2,n.commentId)},text:"蔽"})]};return a.createElement("div",{className:"shoe-list-table-operation"},r[n.status]&&r[n.status].map(function(e){return e}))}}]),r={batchControl:{placeholder:"请选择",showBatchControl:!u.a.isEmpty(e.state.selectedRowKeys),options:[{title:"移除",value:"normal"}],onBatch:function(t){e.onBatch(t)}},widgets:[[{type:"SelectInput",label:"跑鞋",placeholder:"请输入跑鞋 ID 或型号",options:[{title:"跑鞋 ID",value:"shoeId"},{title:"跑鞋型号",value:"shoeName"}],inputValue:e.state.shoeValue,selectValue:e.state.shoeField,onSelectChange:function(t){e.setShoeField(t)},onInputChange:function(t){e.setShoeValue(t.target.value)},onPressEnter:function(t){e.onSearch()}},{type:"Select",label:"状态",showSearch:!1,placeholder:"请选择状态选项",style:{marginLeft:30},value:e.state.sortValue,option:{key:"id",value:"id",title:"title",data:[{id:void 0,title:"全部"},{id:"1",title:"正常"},{id:"2",title:"屏蔽"},{id:"3",title:"热门"}]},onSelect:function(t,n){e.onFilterSelect(t,n)},onBlur:function(){}}]],onSearch:function(){e.onSearch()},onReset:function(){e.onReset()}},o=Object.assign({},e.props.common.paginationConfig,{current:e.state.currentPage,total:e.props.comment.shoeListMeta.total,onChange:function(e,t){},onShowSizeChange:function(t,n){e.resetPagination(n,t)}});return{addBtn:{title:function(){return a.createElement(p.a,{type:"primary",onClick:function(){return e.goToEditor({})}},a.createElement(m.a,{type:"plus"})," 添加")}},searcher:r,table:{rowKey:"id",rowSelection:t,columns:n,loading:e.state.tableLoading,dataSource:e.props.comment.shoeList,pagination:o,onChange:function(t,n,r){var a={pageNum:t.current,pageSize:t.pageSize};if(!u.a.isEmpty(n))for(var o=0,i=Object.entries(n);o<i.length;o++){var s=qe(i[o],2),c=s[0],l=s[1];a[c]=l?l[0]:void 0}e.setState({filter:Object.assign({},e.state.filter,a),currentPage:t.current},function(){e.getDataList(e.state.filter)})}}}};n(1480);function Ze(e){return(Ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Je(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Xe(e){return(Xe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Qe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function et(e,t){return(et=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var tt=x.a.Item,nt=I.a.Group,rt=D.a.Option,at=function(e,t,n){return{labelCol:{span:e,offset:n},wrapperCol:{span:t}}},ot=function(e){function t(e){var n,o,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,i=Xe(t).call(this,e),(n=!i||"object"!==Ze(i)&&"function"!=typeof i?Qe(o):i).state={options:[{value:"id",title:"口碑 ID"},{value:"uid",title:"用户 ID"}],selectedValue:"id",inputValue:void 0},n.onSelectChange=function(e){n.setState({selectedValue:e})},n.searchArticle=function(e){return r.a(Qe(n),void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.state.selectedValue;case 2:case"end":return e.stop()}},e,this)}))},n.onInputChange=function(e){n.setState({inputValue:e.target.value}),n.searchArticle(e.target.value)},n.renderEditor=function(){n.props.form.getFieldDecorator;var e=n.props.shoe,t=(e.setCurrentKeyword,e.currentKeyword,n.state),r=t.options,o=t.inputValue,i=t.selectedValue,s="id"===i?"请输入口碑 ID":"请输入用户 ID";return a.createElement(x.a,{className:"editor-form"},a.createElement(tt,Object.assign({},at(6,18)),a.createElement(nt,{compact:!0},a.createElement(D.a,{value:i,onChange:n.onSelectChange},r&&r.map(function(e,t){return a.createElement(rt,{key:t,value:e.value},e.title)})),a.createElement(I.a,{style:{width:238},value:o,onChange:n.onInputChange,placeholder:s}))))},n.getValidation=function(e){return(new _.a).start()},n.onSubmit=function(){return r.a(Qe(n),void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,r=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t={id:1},!(n=this.getValidation(t))){e.next=4;break}return e.abrupt("return",this.$msg.warn(n));case 4:this.$api.shoe.addPraise(t).then(function(e){0===e.data.ret?(r.$msg.success("跑鞋口碑添加成功"),setTimeout(function(){var e=r.props.shoe.praiseListMeta,t=e.pageNum,n=e.pageSize;r.props.form.resetFields(),r.props.shoe.togglePraiseVisible(),r.$store.shoe.getPraiseList({pageNum:t,pageSize:n})},300)):r.$msg.error(e.data.msg)});case 5:case"end":return e.stop()}},e,this)}))},n.onCancel=function(){n.props.form.resetFields(),n.props.shoe.togglePraiseVisible()},n.searchArticle=K()(n.searchArticle,500),n}var n,i,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&et(e,t)}(t,o["a"]),n=t,(i=[{key:"render",value:function(){var e=this.props.shoe.praiseVisible;return a.createElement(R.a,{visible:e,title:"添加上榜口碑",onOk:this.onSubmit,onCancel:this.onCancel},this.renderEditor())}}])&&Je(n.prototype,i),s&&Je(n,s),t}(),it=ot=r.b([x.a.create(),Object(s.b)("common","community","shoe"),s.c],ot);function st(e){return(st="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ct(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ut(e){return(ut=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ft(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pt(e,t){return(pt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var dt=function(e){function t(){var e,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,o=ut(t).apply(this,arguments),(e=!o||"object"!==st(o)&&"function"!=typeof o?ft(n):o).state={filter:{},selectedRowKeys:[],tableLoading:!1,shoeField:"shoeName",shoeValue:void 0,filterValue:void 0,currentPage:1,order:{key:void 0,value:void 0},showPopconfirmId:0},e.resetPagination=function(t,n){return r.a(ft(e),void 0,void 0,regeneratorRuntime.mark(function e(){var a=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({filter:Object.assign({},this.state.filter,{pageSize:t,pageNum:n})},function(){return r.a(a,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=this.state.filter,this.getDataList(t);case 2:case"end":return e.stop()}},e,this)}))});case 1:case"end":return e.stop()}},e,this)}))},e.getDataList=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setState({tableLoading:!0,filter:Object.assign({},e.state.filter,t)},function(){return r.a(ft(e),void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$store.shoe.getPraiseList(Object.assign({},this.state.filter,t));case 2:this.setState({tableLoading:!1});case 3:case"end":return e.stop()}},e,this)}))})},e.onSearch=function(){return r.a(ft(e),void 0,void 0,regeneratorRuntime.mark(function e(){var t,n=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this.state.filter).shoeId||!Number.isNaN(Number(t.shoeId))){e.next=3;break}return e.abrupt("return",this.$msg.error("请输入正确 shoeId"));case 3:this.setState({filter:Object.assign({},t,{pageNum:1}),currentPage:1},function(){n.getDataList(n.state.filter)});case 4:case"end":return e.stop()}},e,this)}))},e.goToEditor=function(){e.props.shoe.togglePraiseVisible()},e.setShoeField=function(t){var n=e.state.filter;"shoeId"!==t?delete n.shoeId:"shoeName"!==t&&delete n.shoeName,e.setState({shoeField:t,shoeValue:void 0,filter:Object.assign({},n,ct({},t,void 0))})},e.setShoeValue=function(t){e.setState({shoeValue:t,filter:Object.assign({},e.state.filter,ct({},e.state.shoeField,t||void 0))})},e.onFilterSelect=function(t,n){e.setState({filterValue:t,filter:Object.assign({},e.state.filter,{filter:t||void 0})})},e.onReset=function(){return r.a(ft(e),void 0,void 0,regeneratorRuntime.mark(function e(){var t,n=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t={pageNum:1,pageSize:this.state.filter.pageSize},this.setState({articleId:void 0,articleTitle:void 0,sortValue:void 0,filterValue:void 0,filter:t,currentPage:1},function(){n.getDataList(n.state.filter)});case 2:case"end":return e.stop()}},e,this)}))},e.onBatch=function(t){return r.a(ft(e),void 0,void 0,regeneratorRuntime.mark(function e(){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.state.selectedRowKeys,!t||!u.a.isEmpty(n)){e.next=3;break}return e.abrupt("return",this.$msg.warning("请选择至少一条记录"));case 3:case"end":return e.stop()}},e,this)}))},e.renderOrderElem=function(t){var n=e.state.order;return a.createElement("div",{key:t.id},a.createElement("span",null,"排序  "),a.createElement(C.a,{min:0,onChange:e.changeOrder.bind(ft(e),t.id),value:n.value}))},e.changeOrder=function(t,n){return n&&Number.isNaN(Number(n))?e.$msg.error("请输入正确排序值"):n&&n.toString().length>3?e.$msg.error("排序值不得超过 3 位"):void e.setState({order:{key:t,value:n}})},e.confirmOrder=function(t){return r.a(ft(e),void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.order,n=this.props.common.userInfo,e.next=4,this.$api.community.updateOrder({params:{id:t.key,rank:t.value,updateUser:n.empName}});case 4:0==(r=e.sent).data.ret?(this.$msg.success("修改排序成功"),this.getDataList(this.state.filter),this.cancelOrder()):this.$msg.error(r.data.msg);case 6:case"end":return e.stop()}},e,this)}))},e.cancelOrder=function(){e.setState({showPopconfirmId:0,order:{key:void 0,value:void 0}})},e}var n,i,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pt(e,t)}(t,o["a"]),n=t,(i=[{key:"componentDidMount",value:function(){return r.a(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,r,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=this.props.common.paginationConfig,n=t.defaultPageSize,r=t.defaultCurrent,a=this.props.location,this.$qs.parse(a.search),this.resetPagination(n,r);case 4:case"end":return e.stop()}},e,this)}))}},{key:"render",value:function(){return a.createElement("div",{className:"praise-list"},a.createElement(O.a,Object.assign({},this.props,{config:Ge(this)})),a.createElement(it,null))}}])&&lt(n.prototype,i),s&&lt(n,s),t}(),mt=dt=r.b([Object(s.b)("common","shoe","community","feed","comment"),s.c],dt);n(1481);function ht(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var gt=function(e){var t={selectedRowKeys:e.state.selectedRowKeys,onChange:function(t,n){e.setState({selectedRowKeys:t})}},n=e.state.showPopconfirmId,r=[{title:"排序",width:120,render:function(t,r){return a.createElement("div",{className:"article-order-".concat(r.id)},a.createElement("p",null,r.ranking," ",a.createElement(g.a,{visible:r.id===n,icon:null,title:e.renderOrderElem(r),getPopupContainer:function(){return document.getElementsByClassName("article-order-".concat(r.id))[0]},onConfirm:e.confirmOrder.bind(void 0,r),onCancel:e.cancelOrder,okText:"确定",cancelText:"取消"},a.createElement(m.a,{type:"edit",onClick:function(){return e.setState({showPopconfirmId:r.id,order:{key:r.id,value:r.rank}})}}))," "))}},{title:"文章 ID",width:120,dataIndex:"articleId"},{title:"封面图",dataIndex:"coverImg",render:function(e){return e&&a.createElement("a",{href:e,target:"_blank"},a.createElement("img",{src:e,style:{width:60,height:60,objectFit:"contain"}}))}},{title:"文章",width:300,render:function(e,t){return a.createElement("div",null,a.createElement("h4",null,t.subjectName),a.createElement("p",null,t.title))}},{title:"发布者",width:80,dataIndex:"sourceName"},{title:"创建时间",dataIndex:"createTime",render:function(e,t){return e?b()(e).format("YYYY.MM.DD HH:mm:ss"):"---"}},{title:"数据",width:200,render:function(e,t){return a.createElement("div",null,a.createElement("p",null,a.createElement("span",null,"真实值："),a.createElement("span",null,t.viewCnt)),a.createElement("p",null,a.createElement("span",null,"优化值："),a.createElement("span",null,t.v1)),a.createElement("p",null,a.createElement("span",null,"评论数："),a.createElement("span",null,t.commentCnt)),a.createElement("p",null,a.createElement("span",null,"收藏数："),a.createElement("span",null,t.favorCnt)))}},{width:300,title:"操作",render:function(t,n){return a.createElement("div",{className:"common-list-table-operation"},a.createElement(g.a,{title:"请问是否确认移除文章？",onConfirm:e.deleteArticle.bind(e,n.id)},"移除"),a.createElement("span",{className:"common-list-table-operation-spliter"}),a.createElement("span",{onClick:function(){w()(n.link),e.$msg.success("复制成功")}},"复制链接"))}}],o={batchControl:{placeholder:"请选择",showBatchControl:!u.a.isEmpty(e.state.selectedRowKeys),options:[{title:"移除",value:"delete"}],onBatch:function(t){e.onBatch(t)}},widgets:[[{type:"Input",label:"文章 ID",placeholder:"请输入文章 ID",value:e.state.articleId||void 0,onChange:function(t){e.onArticleIDChange(t.target.value)}},{type:"Input",label:"文章标题",placeholder:"请输入文章标题",value:e.state.keyWord||void 0,onChange:function(t){e.onArticleTitleChange(t.target.value)}}],{type:"Select",label:"文章栏目",showSearch:!0,placeholder:"请选择文章栏目",value:e.state.subjectValue,option:{key:"subjectId",value:"subjectId",title:"subjectName",data:e.state.subjectOptions||[]},onFocus:function(){e.onSubjectFocus()},onSearch:function(t){e.onSubjectSearch(t)},onChange:function(t,n){e.onSubjectSelect(t,n)},onSelect:function(e,t){},onBlur:function(){},onPopupScroll:function(t){e.onSubjectPopupScroll(t)}},{type:"RangePicker",label:"创建时间",placeholder:["开始日期","结束日期"],showTime:{format:"HH:mm:ss"},format:"YYYY-MM-DD HH:mm:ss",alias:[1,7,30],value:e.state.dateRange||[],onChange:function(t){e.onDateRangeChange(t)}}],onSearch:function(){e.onSearch()},onReset:function(){e.onReset()}},i=Object.assign({},e.props.common.paginationConfig,{current:e.state.currentPage,total:e.props.shoe.articleListMeta.total,onChange:function(e,t){},onShowSizeChange:function(t,n){e.resetPagination(n,t)}});return{addBtn:{title:function(){return a.createElement(p.a,{type:"primary",onClick:function(){return e.goToEditor({})}},a.createElement(m.a,{type:"plus"})," 添加")}},searcher:o,table:{rowKey:"id",rowSelection:t,columns:r,loading:e.state.tableLoading,dataSource:e.props.shoe.articleList,pagination:i,onChange:function(t,n,r){var a={pageNum:t.current,pageSize:t.pageSize};if(!u.a.isEmpty(n))for(var o=0,i=Object.entries(n);o<i.length;o++){var s=ht(i[o],2),c=s[0],l=s[1];a[c]=l?l[0]:void 0}e.setState({filter:Object.assign({},e.state.filter,a),currentPage:t.current},function(){e.getDataList(e.state.filter)})}}}};function vt(e){return(vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function yt(e){return(yt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function wt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Et(e,t){return(Et=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var St=function(e){function t(){var e,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,o=yt(t).apply(this,arguments),(e=!o||"object"!==vt(o)&&"function"!=typeof o?wt(n):o).state={filter:{articleType:2},selectedRowKeys:[],subjectValue:void 0,subjectOptions:[],dateRange:[],tableLoading:!1,currentPage:1,articleId:void 0,keyWord:void 0,order:{key:void 0,value:void 0},showPopconfirmId:0},e.resetPagination=function(t,n){return r.a(wt(e),void 0,void 0,regeneratorRuntime.mark(function e(){var a=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({filter:Object.assign({},this.state.filter,{pageSize:t,pageNum:n})},function(){return r.a(a,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=this.state.filter,this.getDataList(t);case 2:case"end":return e.stop()}},e,this)}))});case 1:case"end":return e.stop()}},e,this)}))},e.getDataList=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setState({tableLoading:!0,filter:Object.assign({},e.state.filter,t)},function(){return r.a(wt(e),void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$store.shoe.getArticleList(Object.assign({},this.state.filter,t));case 2:this.setState({tableLoading:!1});case 3:case"end":return e.stop()}},e,this)}))})},e.onSearch=function(){return r.a(wt(e),void 0,void 0,regeneratorRuntime.mark(function e(){var t,n=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this.state.filter).articleId||!Number.isNaN(Number(t.articleId))){e.next=3;break}return e.abrupt("return",this.$msg.error("请输入正确文章 ID"));case 3:this.setState({filter:Object.assign({},t,{pageNum:1}),currentPage:1},function(){n.getDataList(n.state.filter)});case 4:case"end":return e.stop()}},e,this)}))},e.goToEditor=function(t){e.props.shoe.setCurrentArticle(t),e.props.shoe.toggleArticleVisible()},e.onReset=function(){return r.a(wt(e),void 0,void 0,regeneratorRuntime.mark(function e(){var t,n=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t={pageNum:1,pageSize:this.state.filter.pageSize,articleType:2},this.setState({articleId:void 0,keyWord:void 0,subjectValue:void 0,sortValue:void 0,filterValue:void 0,dateRange:[],filter:t,currentPage:1},function(){n.getDataList(n.state.filter)});case 2:case"end":return e.stop()}},e,this)}))},e.onBatch=function(t){return r.a(wt(e),void 0,void 0,regeneratorRuntime.mark(function e(){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.state.selectedRowKeys,!t||!u.a.isEmpty(n)){e.next=3;break}return e.abrupt("return",this.$msg.warning("请选择至少一条记录"));case 3:case"end":return e.stop()}},e,this)}))},e.onDateRangeChange=function(t){var n=Object.assign({},e.state.filter);u.a.isEmpty(t)?(n.startTime=void 0,n.endTime=void 0):(n.startTime=t[0].format("YYYY-MM-DD HH:mm:ss"),n.endTime=t[1].format("YYYY-MM-DD HH:mm:ss")),e.setState({dateRange:t,filter:n})},e.onArticleIDChange=function(t){e.setState({articleId:t,filter:Object.assign({},e.state.filter,{articleId:t||void 0})})},e.onSubjectFocus=function(){return r.a(wt(e),void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$api.shoe.getSubjectList({pageNum:1,pageSize:20});case 2:t=e.sent,this.setState({subjectOptions:t.data.data});case 4:case"end":return e.stop()}},e,this)}))},e.onSubjectPopupScroll=G()(function(t){return r.a(wt(e),void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return");case 6:t=e.sent,this.setState({keywordOptions:U()(this.state.subjectOptions,t.data.data.list,"wordId"),subjectOptionsMeta:{total:t.data.data.total,pageNum:t.data.data.pageNum,pageSize:t.data.data.pageSize}});case 8:case"end":return e.stop()}},e,this)}))},300),e.onSubjectSearch=K()(function(t){return r.a(wt(e),void 0,void 0,regeneratorRuntime.mark(function e(){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$api.shoe.getBrandList({word:t,pageSize:10,pageNum:1});case 2:n=e.sent,this.setState({subjectOptions:n.data.data});case 4:case"end":return e.stop()}},e,this)}))},500),e.onSubjectSelect=function(t,n){var r=n.props.$data.subjectId;e.setState({subjectValue:t,filter:Object.assign({},e.state.filter,{subjectId:r||void 0})},function(){e.onSearch()})},e.onSortSelect=function(t,n){e.setState({sortValue:t,filter:Object.assign({},e.state.filter,{sort:t||void 0})})},e.onArticleTitleChange=function(t){e.setState({keyWord:t,filter:Object.assign({},e.state.filter,{keyWord:t||void 0})})},e.onFilterSelect=function(t,n){e.setState({filterValue:t,filter:Object.assign({},e.state.filter,{subjectId:t||void 0})})},e.deleteArticle=function(t){return r.a(wt(e),void 0,void 0,regeneratorRuntime.mark(function e(){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,t instanceof Array||(t=[t]),e.next=4,this.$api.shoe.deleteArticle({ids:t});case 4:0==(n=e.sent).data.ret?(this.$msg.success("文章移除成功"),this.onSearch()):this.$msg.error(n.data.msg);case 6:case"end":return e.stop()}},e,this)}))},e.renderOrderElem=function(t){var n=e.state.order;return a.createElement("div",{key:t.id},a.createElement("span",null,"排序  "),a.createElement(C.a,{min:0,onChange:e.changeOrder.bind(wt(e),t.id),value:n.value}))},e.changeOrder=function(t,n){return n&&Number.isNaN(Number(n))?e.$msg.error("请输入正确排序值"):n&&n.toString().length>3?e.$msg.error("排序值不得超过 3 位"):void e.setState({order:{key:t,value:n}})},e.confirmOrder=function(t){return r.a(wt(e),void 0,void 0,regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.order,e.next=3,this.$api.shoe.updateArticleRank({id:t.key,ranking:t.value});case 3:0==(n=e.sent).data.ret?(this.$msg.success("修改排序成功"),this.getDataList(this.state.filter),this.cancelOrder()):this.$msg.error(n.data.msg);case 5:case"end":return e.stop()}},e,this)}))},e.cancelOrder=function(){e.setState({showPopconfirmId:0,order:{key:void 0,value:void 0}})},e}var n,i,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Et(e,t)}(t,o["a"]),n=t,(i=[{key:"componentDidMount",value:function(){return r.a(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,r,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=this.props.common.paginationConfig,n=t.defaultPageSize,r=t.defaultCurrent,a=this.props.location,this.$qs.parse(a.search),this.resetPagination(n,r);case 4:case"end":return e.stop()}},e,this)}))}},{key:"render",value:function(){var e=this;return a.createElement("div",{className:"recommend-article"},a.createElement(O.a,Object.assign({},this.props,{config:gt(this)})),a.createElement(Y,{getDataList:function(){e.getDataList()},articleType:2}))}}])&&bt(n.prototype,i),s&&bt(n,s),t}(),Ot=St=r.b([Object(s.b)("common","shoe","community","feed","comment"),s.c],St);function kt(e){return(kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ct(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function jt(e,t){return!t||"object"!==kt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Rt(e){return(Rt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Nt(e,t){return(Nt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var It=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=jt(this,Rt(t).apply(this,arguments))).state={currentTab:"article-list",filter:{}},e.onTabClick=function(t){e.setState({currentTab:t},function(){var n="/admin/shoe/repo/config/".concat(t);e.props.history.push(n)})},e.toggleTab=function(t){e.setState({currentTab:t})},e}var n,s,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Nt(e,t)}(t,o["a"]),n=t,l=[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.location.pathname.split("/"),r=n[n.length-1];return"config"===r?{currentTab:"article-list"}:"article-list"===r||"video-list"===r||"rank-list"===r||"praise-list"===r||"data-list"===r?{currentTab:r}:null}}],(s=[{key:"componentDidMount",value:function(){return r.a(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:"/admin/shoe/repo/config"===(t=this.props.location.pathname)?this.props.history.replace("/admin/shoe/repo/config/article-list"):"/admin/shoe/repo/config/article-list"===t?this.setState({currentTab:"article-list"}):"/admin/shoe/repo/config/video-list"===t?this.setState({currentTab:"video-list"}):"/admin/shoe/repo/config/rank-list"===t?this.setState({currentTab:"rank-list"}):"/admin/shoe/repo/config/praise-list"===t?this.setState({currentTab:"praise-list"}):"/admin/shoe/repo/config/data-list"===t&&this.setState({currentTab:"data-list"});case 2:case"end":return e.stop()}},e,this)}))}},{key:"componentDidUpdate",value:function(e,t){"/admin/shoe/repo/config"===this.props.location.pathname&&("article-list"!==t.currentTab&&this.setState({currentTab:"article-list"}),this.props.history.replace("/admin/shoe/repo/config/article-list"))}},{key:"render",value:function(){var e=this,t=this.state.currentTab;return a.createElement("div",{className:"shoe-repo"},a.createElement(c.a,Object.assign({},this.props,{currentTab:t,onTabClick:this.onTabClick,title:{"article-list":"推荐文章","video-list":"视频","rank-list":"排行榜","praise-list":"口碑","data-list":"大数据文章"}[t],tabs:[{id:"article-list",title:"推荐文章",path:"/admin/shoe/repo/config/article-list"},{id:"video-list",title:"视频",path:"/admin/shoe/repo/config/video-list"},{id:"rank-list",title:"排行榜",path:"/admin/shoe/repo/config/rank-list"},{id:"data-list",title:"大数据文章",path:"/admin/shoe/repo/config/data-list"}]})),a.createElement(i.a,{path:"/admin/shoe/repo/config/article-list",render:function(t){return a.createElement(ne,Object.assign({},t,{toggleTab:e.toggleTab}))}}),a.createElement(i.a,{path:"/admin/shoe/repo/config/video-list",render:function(t){return a.createElement(Se,Object.assign({},t,{toggleTab:e.toggleTab}))}}),a.createElement(i.a,{path:"/admin/shoe/repo/config/rank-list",render:function(t){return a.createElement(Ke,Object.assign({},t,{toggleTab:e.toggleTab}))}}),a.createElement(i.a,{path:"/admin/shoe/repo/config/praise-list",render:function(t){return a.createElement(mt,Object.assign({},t,{toggleTab:e.toggleTab}))}}),a.createElement(i.a,{path:"/admin/shoe/repo/config/data-list",render:function(t){return a.createElement(Ot,Object.assign({},t,{toggleTab:e.toggleTab}))}}))}}])&&Ct(n.prototype,s),l&&Ct(n,l),t}();It=r.b([Object(l.a)("/admin/shoe/repo/config",{exact:!1}),Object(s.b)("common","shoe","community","feed","comment"),s.c],It);t.default=It}}]);