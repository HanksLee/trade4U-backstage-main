(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{1419:function(e,t,n){"use strict";n.d(t,"a",function(){return B});var r=n(1),a=n(109),o=(n(1422),n(146)),s=n.n(o),i=(n(167),n(353)),l=n.n(i),c=(n(578),n(352)),u=n.n(c),m=(n(248),n(1377)),d=n.n(m),p=(n(1376),n(1371)),h=n.n(p),f=(n(1370),n(168)),g=n.n(f),y=(n(354),n(23)),b=n.n(y),v=(n(351),n(582)),S=n.n(v),E=(n(581),n(584)),k=n.n(E),w=(n(583),n(580)),I=n.n(w),N=(n(579),n(11)),C=n(16),O=n.n(C);function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function R(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function T(e,t){return!t||"object"!==x(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var M=l.a.Option,L=u.a.Group,V=h.a.RangePicker,$=I.a.CheckableTag,F={SelectInput:function(e){var t=e.selectValue,n=e.inputValue,a=e.placeholder,o=e.options,s=e.onSelectChange,i=e.onInputChange,c=e.onPressEnter,m=e.selectStyle;return r.createElement(L,{compact:!0},r.createElement(l.a,{style:m?Object.assign({width:110},m):{width:110},value:t,onChange:s},o&&o.map(function(e,t){return r.createElement(M,{key:t,value:e.value},e.title)})),r.createElement(u.a,{style:{width:238},value:n,onChange:i,placeholder:a,onPressEnter:c}))},Select:function(e){var t=e.option,n=e.label,a=e.mode,o=e.onSearch,s=e.onSelect,i=e.onBlur,c=e.onFocus,u=e.value,m=e.placeholder,d=e.showSearch,p=e.width,h=e.filterOption,f=e.onChange,g=e.allowClear,y=e.onPopupScroll;return r.createElement(r.Fragment,null,n&&r.createElement("span",{className:"common-list-label"},"".concat(n,"：")),r.createElement("span",{className:"common-list-control"},r.createElement(l.a,{allowClear:g,value:u,mode:a||!1,style:{minWidth:p||258,width:p},showSearch:d,placeholder:m,filterOption:h,onSearch:o,onSelect:s,onChange:f,onBlur:i,onPopupScroll:y,onFocus:c},t.data.map(function(e){return r.createElement(M,{key:e[t.key]||e.id,value:e[t.value]||e.id,$data:e},e[t.title])}))))},DatePicker:function(e){var t=e.label,n=e.placeholder,a=e.onChange,o=e.value,s=e.style,i=e.format,l=e.showTime;return r.createElement(r.Fragment,null,t&&r.createElement("span",{className:"common-list-label"},"".concat(t,"：")),r.createElement("span",{className:"common-list-control"},r.createElement(h.a,{format:i||!1,style:s,showTime:l,placeholder:n,value:o,onChange:a})))},RangePicker:function(e){var t=e.label,n=e.alias,a=e.placeholder,o=e.onChange,i=e.value,l=e.showTime,c=e.format;return r.createElement(r.Fragment,null,t&&r.createElement("span",{className:"common-list-label"},"".concat(t,"：")),r.createElement("span",{className:"common-list-control"},r.createElement(V,{style:{width:400},showTime:l,format:c,placeholder:a,value:i,onChange:o}),r.createElement("span",{className:"common-list-control-date-alias"},!N.a.isEmpty(n)&&n.map(function(e,t){return r.createElement(s.a,{key:t,onClick:function(){return o([O()(Date.now()-864e5*e).startOf("day"),O()()])}},e," 天内")}))))},Input:function(e){var t=e.label,n=e.value,a=e.placeholder,o=e.onChange,s=e.width,i=e.onPressEnter;return r.createElement(r.Fragment,null,t&&r.createElement("span",{className:"common-list-label"},"".concat(t,"：")),r.createElement("span",{className:"common-list-control"},r.createElement(u.a,{style:{minWidth:s||258},value:n,onChange:o,placeholder:a,onPressEnter:i})))},Checkbox:function(e){var t=e.label,n=e.value,a=e.onChange;return r.createElement(g.a,{checked:n,onChange:a},t)},CheckableTag:function(e){var t=e.label,n=e.option,a=e.value,o=e.onChange;return r.createElement(r.Fragment,null,t&&r.createElement("span",{className:"common-list-label"},"".concat(t,"：")),r.createElement("span",{className:"common-list-control"},!N.a.isEmpty(n)&&n.map(function(e){return r.createElement($,{key:e.value,checked:e.value===a,onChange:function(){o(e)}},e.title)})))},Label:function(e,t){var n=e.label;return r.createElement(r.Fragment,null,n&&r.createElement("span",{className:"common-list-label"},"".concat(n,"：")),r.createElement("span",{className:"common-list-control"},t))},Custom:function(e){return r.createElement("div",null,(void 0).props.children)}},B=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=T(this,j(t).apply(this,arguments))).state={collapse:!0},e.toggleCollapse=function(t){e.setState({collapse:!e.state.collapse})},e.renderSearcher=function(){var t=e.props.config,n=t.searcher,a=t.table,o=e.state.collapse;return n&&r.createElement("section",{className:"common-list-search"},e.renderWidgets(n.widgets),a&&a.tableHeader&&a.tableHeader(),r.createElement("div",{className:"common-list-search-right"},!n.hideSearcher&&r.createElement(r.Fragment,null,r.createElement(s.a,{type:"primary",onClick:n.onSearch},"查询"),r.createElement(s.a,{onClick:n.onReset},"重置")),n.collapseControl&&n.collapseControl.showMoreBtn&&r.createElement("span",{className:"common-list-serach-more"},r.createElement("a",{onClick:e.toggleCollapse},o?"更多":"收起"," ",r.createElement(b.a,{type:o?"down":"up"})))))},e.renderWidgets=function(t){var n=e.state.collapse,a=e.props.config.searcher;return t&&r.createElement("div",{className:"common-list-search-left"},t.map(function(t,o){return Array.isArray(t)?r.createElement("div",{key:o,className:"common-list-search-row",style:{display:a.collapseControl&&a.collapseControl.showMoreBtn&&n&&o>0?"none":"flex"}},t.map(function(t){return r.createElement("div",{key:t.label,className:"common-list-search-col",style:Object.assign({},t.style)},F[t.type]&&F[t.type](t,t.children?e.renderWidgets(t.children):null))})):r.createElement("div",{key:t.label,className:"common-list-search-row ".concat(t.className)},F[t.type]&&F[t.type](t,t.children?e.renderWidgets(t.children):null))}))},e.renderAddBtn=function(){var t=e.props.config,n=t.addBtn,a=t.searcher;return n&&r.createElement("section",{className:"common-list-addbtn",style:n.style},"function"==typeof n.title?r.createElement(n.title,null):n.title,r.createElement("div",{className:"common-list-search-batch"},a.batchControl.showBatchControl&&r.createElement(l.a,{placeholder:a.batchControl.placeholder,style:{minWidth:120},defaultValue:void 0,onChange:a.batchControl.onBatch},a.batchControl.options.map(function(e){return r.createElement(M,{key:e.value,value:e.value},e.title)}))))},e.renderTableHeader=function(){var t=e.props.config.tableHeader;return r.createElement("section",{className:"common-list-table-header"},t&&t())},e.renderTable=function(){var t=e.props.config.table,n=t.rowKey,a=t.rowSelection,o=t.columns,s=t.dataSource,i=t.pagination,l=t.onChange,c=t.loading,u=t.locale;return r.createElement("section",{className:"common-list-table"},r.createElement(d.a,{locale:u,rowKey:n||"id",rowSelection:a,columns:o,dataSource:s,loading:c,pagination:i,onChange:l}))},e.renderCards=function(){var t=e.props.config.cards,n=t.dataSource,a=t.loading,o=t.pagination,s=t.renderCard,i=t.addBtn;return r.createElement("div",{className:"common-list-cards-wrapper"},r.createElement("ul",{className:"common-list-cards"},a?r.createElement("div",{className:"common-list-cards-loading"},r.createElement(k.a,null)):r.createElement(r.Fragment,null,r.createElement("li",{className:"common-list-card add-btn"},r.createElement("div",{className:"common-list-card-item",onClick:i.onAddBtnClick},i.icon?r.createElement("img",{src:i.icon,alt:""}):r.createElement(b.a,{type:"plus-circle"}),r.createElement("p",null,i.title))),n.map(function(e){return r.createElement("li",{className:"common-list-card"},r.createElement("div",{className:"common-list-card-item"},s(e)))}))),r.createElement("section",{className:"common-list-cards-pagination"},r.createElement(S.a,Object.assign({},o))))},e}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(t,a["a"]),n=t,(o=[{key:"render",value:function(){var e=this.props.config;return r.createElement("div",{className:"common-list"},this.renderSearcher(),this.renderAddBtn(),this.renderTableHeader(),e.table&&this.renderTable(),e.cards&&this.renderCards())}}])&&R(n.prototype,o),i&&R(n,i),t}()},1420:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(1),a=n(1375),o=n.n(a),s=(n(1374),n(11));n(1421);function i(e){var t=s.a.getPageBreadcrumb(e.location.pathname),n=e.title,a=e.links,i=e.tabs,l=e.currentTab;return r.createElement("div",{className:"common-header"},r.createElement("section",{className:"common-header-breadcrumb"},t&&r.createElement(o.a,null,t.map(function(e,t){return r.createElement(o.a.Item,{key:t},e.title)}))),r.createElement("section",{className:"common-header-title"},r.createElement("h2",null,n),r.createElement("div",{className:"common-header-links"},a&&a.map(function(t,n){return r.createElement("a",{key:n,onClick:function(){e.history.push(t.path)}},t.title)}))),r.createElement("section",{className:"common-header-tabs"},i&&i.map(function(t,n){return r.createElement("a",{onClick:function(){e.onTabClick(t.id)},className:"".concat(l===t.id?"tab-active":""," ")},r.createElement("span",null,t.title),t.tipComponent&&t.tipComponent())})))}},1421:function(e,t,n){},1422:function(e,t,n){},1423:function(e,t,n){"use strict";var r=function(e){var t=e;return 15===e.length&&(t=function(e){if(/^\d{15}$/.test(e)){e=e.substr(0,6)+"19"+e.substr(6,e.length-6);for(var t=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2],n=0,r=0;r<e.length;r++)n+=parseInt(e.substr(r,1))*t[r];return e+["1","0","X","9","8","7","6","5","4","3","2"][n%11]}return e}(e)),function(e){if(!/^\d{17}(\d|x)$/i.test(e))return!1;return null!=={11:"北京",12:"天津",13:"河北",14:"山西",15:"内蒙",21:"辽宁",22:"吉林",23:"黑龙",31:"上海",32:"江苏",33:"浙江",34:"安徽",35:"福建",36:"江西",37:"山东",41:"河南",42:"湖北",43:"湖南",44:"广东",45:"广西",46:"海南",50:"重庆",51:"四川",52:"贵州",53:"云南",54:"西藏",61:"陕西",62:"甘肃",63:"青海",64:"宁夏",65:"新疆",71:"台湾",81:"香港",82:"澳门",83:"台湾",91:"国外"}[parseInt(e.substr(0,2))]}(t)},a=function(e){return/^[HMhm]{1}([0-9]{8})$/.test(e)},o=function(e){return/^[0-9]{8}$/.test(e)||/^[0-9]{10}$/.test(e)},s=function(e){return/^[a-zA-Z]{5, 17}$/.test(e)||/^[a-zA-Z0-9]$/.test(e)},i=n(11);function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.d(t,"a",function(){return u});var c={isNonEmpty:function(e,t,n){if(0!==e&&i.a.isEmpty(e))return n&&n(),t},maxLength:function(e,t,n,r){if(e.length>t)return r&&r(),n},minLength:function(e,t,n,r){if(e.length<t)return r&&r(),n},isEmail:function(e,t,n){if(!/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(e))return n&&n(),t},isMobile:function(e,t,n){if(!/^(13[0-9]|14[57]|15[012356789]|16[0-9]|18[0-9]|17[0-9]|19[0-9])\d{8}$/.test(e))return n&&n(),t},isID:function(e,t,n,i){var l=null;if("id"===t?l=r:"HKMC"===t?l=a:"TW"===t?l=o:"PSPort"===t&&(l=s),!l(e))return i&&i(),n},isNumber:function(e,t,n){if(e&&Number.isNaN(Number(e)))return n&&n(),t},isHexColor:function(e,t,n){var r=e.toString();if(!r||!function(e){if("#"!==e[0])return!1;var t=e.slice(1);return 6===t.length&&/^[0-9a-fA-f]{6}$/.test(t)}(r))return n&&n(),t},customReg:function(e,t,n,r){var a=e.toString();if(!a||!new RegExp(t).test(a))return r&&r(),n}},u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.cache=[]}var t,n,r;return t=e,(n=[{key:"add",value:function(e,t){var n=this,r=!0,a=!1,o=void 0;try{for(var s,i=function(){var t=s.value,r=t.strategy.split(":");n.cache.push(function(){var n=r.shift();return r.unshift(e),r.push(t.errMsg),r.push(t.cb),c[n].apply(null,r)})},l=t[Symbol.iterator]();!(r=(s=l.next()).done);r=!0)i()}catch(e){a=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw o}}}},{key:"start",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,a=this.cache[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){var o=(0,r.value)();if(o)return o}}catch(e){t=!0,n=e}finally{try{e||null==a.return||a.return()}finally{if(t)throw n}}}}])&&l(t.prototype,n),r&&l(t,r),e}()},1424:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n(1);n(1425);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c={hot:"hot",normal:"normal",wait:"wait",block:"block"},u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),s(this,i(t).apply(this,arguments))}var n,a,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(t,r["Component"]),n=t,(a=[{key:"render",value:function(){var e=this.props,t=e.text,n=e.type;return r.createElement("span",{className:"status-text ".concat(c[n])},r.createElement("span",{className:"status-text-dot ".concat(c[n])}),r.createElement("span",null,t))}}])&&o(n.prototype,a),u&&o(n,u),t}()},1425:function(e,t,n){},1426:function(e,t,n){"use strict";n.d(t,"a",function(){return p});var r=n(1),a=n(582),o=n.n(a),s=(n(581),n(1387)),i=n.n(s);n(1386),n(1427);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=u(this,m(t).apply(this,arguments))).$carousel=null,e.changeGalleryIndex=function(t,n){e.props.changeGalleryIndex&&e.props.changeGalleryIndex(t-1)},e}var n,a,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,r["Component"]),n=t,(a=[{key:"componentDidMount",value:function(){var e=this.props.activeIndex;this.$carousel.goTo(e)}},{key:"componentDidUpdate",value:function(){var e=this.props.activeIndex;this.$carousel.goTo(e)}},{key:"render",value:function(){var e=this,t=this.props,n=t.source,a=t.activeIndex;return r.createElement("div",{className:"gallery"},r.createElement("section",{className:"gallery-carousel"},r.createElement(i.a,{ref:function(t){return e.$carousel=t},dots:!1},n&&n.map(function(e){return r.createElement("div",{className:"gallery-item"},r.createElement("h3",{className:"gallery-item-img",style:{backgroundImage:"url(".concat(e.src||e.url||e.imgUrl||e.colorImgUrl,")")}}))}))),r.createElement("section",{className:"gallery-pagination"},r.createElement(o.a,{pageSize:1,current:a+1,total:n.length,onChange:this.changeGalleryIndex})))}}])&&c(n.prototype,a),s&&c(n,s),t}();p.defaultProps={activeIndex:0,source:[]}},1427:function(e,t,n){},1428:function(e,t,n){"use strict";var r=n(1),a=n.n(r),o=n(1388),s=(n(1429),n(23)),i=n.n(s);n(351);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=u(this,m(t).apply(this,arguments))).state={expanded:!1,truncated:!1},e.handleTruncate=function(t){e.state.truncated!==t&&e.setState({truncated:t})},e.toggleLines=function(t){t.preventDefault(),e.setState({expanded:!e.state.expanded})},e}var n,s,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,r["Component"]),n=t,(s=[{key:"render",value:function(){var e=this.props,t=e.children,n=e.more,r=e.less,s=e.lines,l=e.width,c=this.state,u=c.expanded,m=c.truncated;return a.a.createElement("div",{className:"ellipsis-text"},a.a.createElement(o.a,{width:l,lines:!u&&s,ellipsis:a.a.createElement("span",null,"...",a.a.createElement("a",{href:"#",onClick:this.toggleLines,className:"expand-text"},n," ",a.a.createElement(i.a,{type:"down"}))),onTruncate:this.handleTruncate},a.a.createElement("div",{style:{width:l}},t)),!m&&u&&a.a.createElement("span",null," ",a.a.createElement("a",{href:"#",className:"expand-text",onClick:this.toggleLines},r)))}}])&&c(n.prototype,s),l&&c(n,l),t}();p.defaultProps={lines:3,more:"更多",less:"收起 >"},t.a=p},1429:function(e,t,n){},1434:function(e,t,n){"use strict";n.d(t,"a",function(){return g});var r=n(2),a=n(1),o=n(1400),s=n.n(o),i=(n(1398),n(23)),l=n.n(i),c=(n(351),n(1399)),u=n.n(c);n(1435);function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return!t||"object"!==m(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var g=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=p(this,h(t).apply(this,arguments))).state={top:10,scrollText:a.createElement("span",null,"快速",a.createElement("br",null),"到底"),scrollDirection:"bottom",isHovering:!1},e}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,a["Component"]),n=t,(o=[{key:"componentDidMount",value:function(){return r.a(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=this,document.querySelector(".content").onscroll=function(e){(this.offsetHeight+this.scrollTop)/this.scrollHeight>.7?t.setState({scrollText:a.createElement("span",null,"回到",a.createElement("br",null),"顶部"),scrollDirection:"top"}):t.setState({scrollText:a.createElement("span",null,"快速",a.createElement("br",null),"到底"),scrollDirection:"bottom"})};case 3:case"end":return e.stop()}},e,this)}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.scrollText,r=t.scrollDirection,o=t.isHovering,i=this.props,c=i.scrollToTop,m=i.scrollToBottom,d=i.elementToScroll,p=o?n:"bottom"==r?a.createElement(l.a,{type:"vertical-align-bottom",style:{fontSize:26}}):a.createElement(l.a,{type:"vertical-align-top",style:{fontSize:26}});return a.createElement("div",{className:"affix-position",onMouseEnter:function(){e.setState({isHovering:!0})},onMouseLeave:function(){e.setState({isHovering:!1})}},a.createElement(s.a,{offsetTop:this.state.top},a.createElement("div",{className:"affix-btn",onClick:function(){var t="bottom"===r?m:c;e.setState({hasScrolledToPosition:!1}),u()(t||null,{minDuration:100,speed:3e3,elementToScroll:d||null}).then(function(t){e.setState({hasScrolledToPosition:t})})}},p)))}}])&&d(n.prototype,o),i&&d(n,i),t}()},1435:function(e,t,n){},1451:function(e,t,n){},1452:function(e,t,n){},1521:function(e,t,n){"use strict";n.r(t);var r=n(2),a=n(109),o=n(1),s=n(200),i=n(120),l=(n(1451),n(110)),c=n(251),u=n.n(c),m=n(1420),d=n(1419),p=n(1373),h=n.n(p),f=(n(1372),n(352)),g=n.n(f),y=(n(248),n(146)),b=n.n(y),v=(n(167),n(1381)),S=n.n(v),E=(n(1380),n(1369)),k=n.n(E),w=(n(1368),n(23)),I=n.n(w),N=(n(351),n(580)),C=n.n(N),O=(n(579),n(202)),x=n.n(O),R=(n(355),n(353)),T=n.n(R),j=(n(578),n(356)),P=n.n(j),M=(n(587),n(1371)),L=n.n(M),V=(n(1370),n(168)),$=n.n(V),F=(n(354),n(1395)),B=n.n(F),_=(n(1394),n(1392)),z=n.n(_),D=(n(1391),n(1379)),H=n.n(D),U=(n(1378),n(1452),n(3)),A=n(1423),G=n(11),K=n(147),Y=n.n(K),q=n(87),W=n.n(q),Z=n(589),J=n.n(Z),X=n(16),Q=n.n(X),ee=n(585),te=n.n(ee),ne=n(1382),re=n.n(ne);function ae(e){return(ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oe(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function se(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ie(e){return(ie=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function le(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ce(e,t){return(ce=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ue=h.a.Item,me=T.a.Option,de=P.a.Group,pe=k.a.confirm,he=g.a.TextArea,fe=!1,ge=o.createElement("div",null,o.createElement(I.a,{type:"plus"}),o.createElement("div",{className:"ant-upload-text"},"上传图片")),ye=function(e,t,n){return{labelCol:{span:e,offset:n},wrapperCol:{span:t}}},be=function(e){function t(){var e,n,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,a=ie(t).apply(this,arguments),(e=!a||"object"!==ae(a)&&"function"!=typeof a?le(n):a).$selectRef=null,e.state={breadcrumbs:[],mode:"add",previewImage:"",previewVisible:!1,fileList:[],brandOptionsMeta:{total:0,pageNum:1,pageSize:20},selectVisible:!1,selectTagVisible:!1,selectRecommendVisible:!1,selectKeywordVisible:!1,keywordInputValue:void 0,recommendInputValue:void 0,tagInputValue:void 0,keywordOptions:[],recommendOptions:[],recommendOptionsMeta:{total:0,pageNum:1,pageSize:20},tagOptions:[],tagOptionsMeta:{total:0,pageNum:1,pageSize:20},showColorPicker:!1,recommending:!1,currentCover:"",brandOptions:[],btnLoading:!1},e.init=function(){return r.a(le(e),void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,a=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=G.a.getPageBreadcrumb(this.props.location.pathname),n=this.$qs.parse(this.props.location.search),this.setState({breadcrumbs:t,mode:0==n.id?"add":"edit"},function(){return r.a(a,void 0,void 0,regeneratorRuntime.mark(function e(){var t,r,a,o=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=G.a.getLStorage("currentSku"))){e.next=5;break}pe({title:"跑鞋单品恢复操作",content:"检测到您存在未提交跑鞋单品信息，请问是否从上次编辑的跑鞋品牌中恢复状态？",onOk:function(){o.props.shoe.setCurrentSku(t)},onCancel:function(){o.init(),G.a.rmLStorage("currentSku")}}),e.next=16;break;case 5:if("edit"!==this.state.mode){e.next=15;break}return e.next=8,this.$store.shoe.getCurrentSku({params:{shoeId:n.id}});case 8:return r=this.props.shoe.currentShowSku.brandName,e.next=11,this.$api.shoe.getBrandList({pageNum:1,pageSize:10,brandName:r});case 11:a=e.sent,this.setState({brandOptions:a.data.data.list}),e.next=16;break;case 15:this.props.shoe.setCurrentSku({},!0,!1);case 16:case"end":return e.stop()}},e,this)}))});case 3:case"end":return e.stop()}},e,this)}))},e.renderEditor=function(){var t=e.props.shoe,n=t.setCurrentSku,a=t.currentShowSku,s=e.props.form.getFieldDecorator,i=e.state.brandOptions;return o.createElement(h.a,{className:"editor-form"},o.createElement(ue,null,o.createElement("h2",{className:"editor-form-title form-title"},"基本信息")),o.createElement(ue,Object.assign({label:"选择品牌",className:"brand-select"},ye(2,6),{required:!0}),s("brandName",{initialValue:a&&a.brandName})(o.createElement(T.a,{allowClear:!0,style:{minWidth:258},getPopupContainer:function(){return document.getElementsByClassName("brand-select")[0]},showSearch:!0,placeholder:"请选择品牌",filterOption:!1,onFocus:function(){return r.a(le(e),void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$api.shoe.getBrandList({pageNum:1,pageSize:20});case 2:t=e.sent,this.setState({brandOptions:t.data.data.list,brandOptionsMeta:{total:t.data.data.total,pageNum:t.data.data.pageNum,pageSize:t.data.data.pageSize}});case 4:case"end":return e.stop()}},e,this)}))},onPopupScroll:te()(function(t){return r.a(le(e),void 0,void 0,regeneratorRuntime.mark(function e(){var n,r,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.state,r=n.brandOptions,a=n.brandOptionsMeta,!(!(!t||!t.target)&&t.target.scrollHeight-(t.target.scrollTop+t.target.clientHeight)<=10&&a.total>r.length)){e.next=7;break}return e.next=5,this.$api.shoe.getBrandList({pageNum:a.pageNum+1,pageSize:20});case 5:o=e.sent,this.setState({brandOptions:re()(this.state.brandOptions,o.data.data.list,"brandId"),brandOptionsMeta:{total:o.data.data.total,pageNum:o.data.data.pageNum,pageSize:o.data.data.pageSize}});case 7:case"end":return e.stop()}},e,this)}))},300),onSearch:Y()(function(t){return r.a(le(e),void 0,void 0,regeneratorRuntime.mark(function e(){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$api.shoe.getBrandList({pageNum:0,pageSize:10,brandName:t});case 2:n=e.sent,this.setState({brandOptions:n.data.data.list});case 4:case"end":return e.stop()}},e,this)}))},500),onChange:function(e,t){var r=G.a.isEmpty(t)?null:t.props.$data;n({brandId:r.brandId,brandName:r.brandName},!1)}},i.map(function(e){return o.createElement(me,{key:e.brandId,$data:e},e.brandName)})))),o.createElement(ue,Object.assign({label:"跑鞋型号"},ye(2,18),{required:!0}),s("shoeName",{initialValue:a&&a.shoeName})(o.createElement(g.a,{style:{width:300},placeholder:"请输入跑鞋型号",onChange:function(e){n({shoeName:e.target.value},!1)}})),12==a.brandId&&o.createElement($.a,{style:{marginLeft:20},checked:a&&a.extrasInfo&&!!a.extrasInfo.hovr,onChange:function(e){n({extrasInfo:JSON.stringify({hovr:e.target.checked?1:0})},!1)}},"Hovr 蓝牙芯片")),o.createElement(ue,Object.assign({label:"官方售价"},ye(2,6)),o.createElement(o.Fragment,null,s("price",{initialValue:a&&a.price,rules:[]})(o.createElement(g.a,{addonBefore:"￥",placeholder:"请输入官方售价",onChange:function(t){var r=t.target.value;if(Number.isNaN(Number(r)))return e.$msg.error("请输入正确价格");n({price:r?100*Number(r):void 0},!1)}}))),o.createElement("p",{style:{color:"#999999",fontSize:12}},"*售价暂不显示在前端，v5.2 版本")),o.createElement(ue,Object.assign({label:"跑鞋详情"},ye(2,8)),s("shoeIntro",{initialValue:a&&a.shoeIntro,rules:[]})(o.createElement(he,{rows:6,onChange:function(e){n({shoeIntro:e.target.value},!1)},placeholder:"请输入跑鞋的介绍、参数，回车换行。"}))),e.renderUploadComponent(),o.createElement(ue,null,o.createElement("h2",{className:"editor-form-title form-title"},"更多信息")),e.renderMoreInfo(),o.createElement(ue,{className:"editor-form-btns"},o.createElement(b.a,{type:"primary",onClick:e.handleSubmit,loading:e.state.btnLoading},"保存"),o.createElement(b.a,{onClick:e.goBack},"取消")))},e.renderCPS=function(){var t=e.props.form.getFieldDecorator,n=e.props.shoe,r=n.currentShowSku,a=n.setCurrentSku,s=e.state.mode;return o.createElement(ue,Object.assign({label:"CPS 分销"},ye(2,6)),t("isExistCPS",{initialValue:r&&r.isExistCPS})(o.createElement($.a,{disabled:!0,onChange:function(e){a({isExistCPS:e.target.checked?1:0},!1)}},r&&r.isExistCPS?"是":"否")),o.createElement("a",{style:{marginLeft:8,color:"#1890ff"},onClick:function(){e.props.history.push("/admin/shoe/distribution/shoe-distribution/list")}},"add"!==s&&r&&r.isExistCPS?"去编辑":"去添加"))},e.renderRate=function(){e.props.form.getFieldDecorator;var t=e.props.shoe,n=t.currentShowSku,r=t.setCurrentSku;e.state.mode;return o.createElement(ue,Object.assign({label:"官方评分"},ye(2,10)),o.createElement(B.a,null,o.createElement(z.a,{span:8},o.createElement("span",null,"耐力："),o.createElement("span",null,o.createElement(H.a,{min:0,max:100,placeholder:"请输入",style:{width:120},value:n&&n.shoeRadarVO&&n.shoeRadarVO.radarEndurance,onChange:function(e){r({shoeRadarVO:Object.assign({},n.shoeRadarVO,{radarEndurance:e})},!1)}}))),o.createElement(z.a,{span:8},o.createElement("span",null,"速度："),o.createElement("span",null,o.createElement(H.a,{min:0,max:100,placeholder:"请输入",style:{width:120},value:n&&n.shoeRadarVO&&n.shoeRadarVO.radarSpeed,onChange:function(e){r({shoeRadarVO:Object.assign({},n.shoeRadarVO,{radarSpeed:e})},!1)}}))),o.createElement(z.a,{span:8},o.createElement("span",null,"安全："),o.createElement("span",null,o.createElement(H.a,{min:0,max:100,placeholder:"请输入",style:{width:120},value:n&&n.shoeRadarVO&&n.shoeRadarVO.radarSafety,onChange:function(e){r({shoeRadarVO:Object.assign({},n.shoeRadarVO,{radarSafety:e})},!1)}})))))},e.renderMoreInfo=function(){var t=e.props.shoe,n=t.currentShowSku,r=t.setCurrentSku,a=e.props.form.getFieldDecorator,s={display:"block",marginBottom:12};return o.createElement(o.Fragment,null,e.renderTags(),e.renderSearchKeyword(),e.renderRecommends(),e.renderCPS(),e.renderRate(),o.createElement(ue,Object.assign({label:"是否上架",required:!0},ye(2,6),{className:"editor-upshelf"}),a("shoeStatus",{initialValue:n&&n.shoeStatus})(o.createElement(P.a.Group,{onChange:function(e){r({shoeStatus:e.target.value},!1)}},o.createElement(P.a,{style:s,value:1},"是"),o.createElement(P.a,{style:s,value:8},"否"))),n&&1==n.shoeStatus&&o.createElement(L.a,{className:"upshelf-date",disabledDate:function(e){return e&&e<Q()().startOf("day")},showTime:!0,value:n.publishTime?n.publishTime:null,onChange:function(e){var t=e?e.valueOf():void 0;r({publishTime:t},!1)}})))},e.renderTags=function(){var t=e.props.shoe.currentShowSku,n=e.state,a=n.selectTagVisible,s=n.tagOptions.map(function(e){return o.createElement(me,{key:e.id,$data:e},e.title)});return o.createElement(ue,Object.assign({label:"标签",className:"tag-select"},ye(2,10),{required:!0}),o.createElement("div",{className:"editor-specific-shoe"},t&&t.shoeTagList&&t.shoeTagList.map(function(t,n){var r="".concat(t.typeName?t.typeName+"-":"").concat(t.tagName),a=t&&r.length>20,s=o.createElement(C.a,{key:t.tagId,closable:!0,onClose:function(){return e.handleTagClose(t)}},a?"".concat(r.slice(0,20),"..."):r);return a?o.createElement(x.a,{title:r,key:t.tagId},s):s}),a&&o.createElement(T.a,{style:{width:300,marginRight:10},getPopupContainer:function(){return document.getElementsByClassName("tag-select")[0]},ref:function(t){return e.$selectRef=t},showSearch:!0,filterOption:!1,placeholder:"请选择标签",onFocus:function(){return r.a(le(e),void 0,void 0,regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$api.shoe.getTagList({pageNum:1,pageSize:20});case 2:t=e.sent,n=t.data.data.list.map(function(e){return e.id=e.tagId,e.title="".concat(e.typeName,"-").concat(e.tagName),e}),this.setState({tagOptions:n,tagOptionsMeta:{total:t.data.data.total,pageNum:t.data.data.pageNum,pageSize:t.data.data.pageSize}});case 5:case"end":return e.stop()}},e,this)}))},onPopupScroll:te()(function(t){return r.a(le(e),void 0,void 0,regeneratorRuntime.mark(function e(){var n,r,a,o,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.state,r=n.tagOptions,a=n.tagOptionsMeta,!(!(!t||!t.target)&&t.target.scrollHeight-(t.target.scrollTop+t.target.clientHeight)<=10&&a.total>r.length)){e.next=8;break}return e.next=5,this.$api.shoe.getTagList({pageNum:a.pageNum+1,pageSize:20});case 5:o=e.sent,s=o.data.data.list.map(function(e){return e.id=e.tagId,e.title="".concat(e.typeName,"-").concat(e.tagName),e}),this.setState({tagOptions:re()(this.state.tagOptions,s,"tagId"),tagOptionsMeta:{total:o.data.data.total,pageNum:o.data.data.pageNum,pageSize:o.data.data.pageSize}});case 8:case"end":return e.stop()}},e,this)}))},300),onSearch:e.onTagSearch,onSelect:e.onTagSelect,onBlur:e.onTagBlur},s),!a&&o.createElement(C.a,{style:{background:"#fff",borderStyle:"dashed"},onClick:function(){e.setState({selectTagVisible:!0},function(){return e.$selectRef.focus()})}},o.createElement(I.a,{type:"plus"}),"添加"),o.createElement("span",{style:{color:"#999999",fontSize:12}},"*请至少选择一个标签")))},e.renderSearchKeyword=function(){var t=e.props.shoe.currentShowSku,n=e.state.selectKeywordVisible;return o.createElement(ue,Object.assign({label:"搜索关键词"},ye(2,6)),o.createElement("div",{className:"editor-specific-shoe"},t&&t.keyword&&t.keyword.map(function(t,n){var r=t&&t.length>20,a=o.createElement(C.a,{key:t,closable:!0,onClose:function(){return e.handleKeywordClose(t)}},r?"".concat(t.slice(0,20),"..."):t);return r?o.createElement(x.a,{title:t,key:t},a):a}),n&&o.createElement(g.a,{ref:function(t){return e.$selectRef=t},onBlur:e.onKeywordBlur,onChange:function(t){e.onKeywordSelect(t.target.value)},onPressEnter:function(){e.onKeywordBlur()}}),!n&&o.createElement(C.a,{style:{background:"#fff",borderStyle:"dashed"},onClick:function(){e.setState({selectKeywordVisible:!0},function(){return e.$selectRef.focus()})}},o.createElement(I.a,{type:"plus"}),"添加")))},e.renderRecommends=function(){var t=e.props.shoe.currentShowSku,n=e.state,a=n.mode,s=n.selectRecommendVisible,i=n.recommendOptions,l=t&&t.shoeResembleList||[];return"add"!==a&&o.createElement(ue,Object.assign({label:"相似推荐"},ye(2,6)),o.createElement("div",{className:"editor-specific-shoe"},l.map(function(t,n){var r=t.shoeId,a="".concat(t.brandName,"-").concat(t.shoeName),s=a&&a.length>20,i=o.createElement(C.a,{key:r,closable:!0,onClose:function(){return e.handleRecommendClose(t)}},s?"".concat(a.slice(0,20),"..."):a);return s?o.createElement(x.a,{title:a,key:r},i):i}),s&&o.createElement(T.a,{ref:function(t){return e.$selectRef=t},showSearch:!0,placeholder:"请选择型号",onSearch:e.onRecommendSearch,onFocus:function(){return r.a(le(e),void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$api.shoe.getSkuList({pageNum:1,pageSize:20});case 2:t=e.sent,this.setState({recommendOptions:t.data.data.list,recommendOptionsMeta:{total:t.data.data.total,pageNum:t.data.data.pageNum,pageSize:t.data.data.pageSize}});case 4:case"end":return e.stop()}},e,this)}))},onSelect:e.onRecommendSelect,filterOption:!1,onPopupScroll:te()(function(t){return r.a(le(e),void 0,void 0,regeneratorRuntime.mark(function e(){var n,r,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.state,r=n.recommendOptions,a=n.recommendOptionsMeta,!(!(!t||!t.target)&&t.target.scrollHeight-(t.target.scrollTop+t.target.clientHeight)<=10&&a.total>r.length)){e.next=7;break}return e.next=5,this.$api.shoe.getSkuList({pageNum:a.pageNum+1,pageSize:20});case 5:o=e.sent,this.setState({recommendOptions:re()(this.state.recommendOptions,o.data.data.list,"shoeId"),recommendOptionsMeta:{total:o.data.data.total,pageNum:o.data.data.pageNum,pageSize:o.data.data.pageSize}});case 7:case"end":return e.stop()}},e,this)}))},300),onBlur:e.onRecommendBlur},i.map(function(e){return o.createElement(me,{key:e.shoeId,value:e.shoeId,$data:e},e.shoeName)})),!s&&o.createElement(C.a,{style:{background:"#fff",borderStyle:"dashed"},onClick:function(){e.setState({selectRecommendVisible:!0},function(){return e.$selectRef.focus()})}},o.createElement(I.a,{type:"plus"}),"添加"),G.a.isEmpty(t.shoeResembleList)&&o.createElement(b.a,{onClick:e.autoRecommend,loading:e.state.recommending},e.state.recommending?"结果后台计算中（下次进入将展示计算结果）":"自动推荐")))},e.autoRecommend=function(){return r.a(le(e),void 0,void 0,regeneratorRuntime.mark(function e(){var t,n=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=this.props.shoe.currentShowSku,this.setState({recommending:!0},function(){return r.a(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$api.shoe.calcResembleShoes({params:{shoeId:t.shoeId}});case 2:case"end":return e.stop()}},e,this)}))});case 2:case"end":return e.stop()}},e,this)}))},e.setColorImgUrl=function(t,n,r){var a=e.props.shoe,o=a.setCurrentSku,s=a.currentSku,i=W()(s.shoeColors);o({shoeColors:i=i.map(function(e,n){if(n===r){e.colorImgUrl=t.url;var a=e.shoeImgs.findIndex(function(e){return e.imgId==t.uid});e.shoeImgs=G.a.moveArrayPosition(a,0,e.shoeImgs);var o=1;e.shoeImgs=e.shoeImgs.map(function(e,t){return e.cover=0==t?1:0,e.ranking=o,o++,e})}return e})},!1)},e.renderMainImgs=function(){var t=e.props.shoe,n=t.currentShowSku,r=t.currentSku,a=t.setCurrentSku,s="".concat(n.imgId||n.shoeId,"_0");return o.createElement("li",{key:s,className:"shoe-sku-upload-item",style:{borderBottom:"2px dashed rgba(0,0,0,.06)",paddingBottom:20}},o.createElement("div",{className:"shoe-sku-upload-top"},o.createElement(S.a,{style:{width:104,height:104},key:s,className:"logo-square",accept:"image/png,image/jpeg",action:"",listType:"picture-card",onPreview:function(t){e.setState({previewImage:t.url||t.thumbUrl,previewVisible:!0})},beforeUpload:function(t){if((G.a.isEmpty(r.shoeMainImgs)?0:r.shoeMainImgs.filter(function(e){return 1!=e.delFlag}).length)>=1)return e.$msg.warning("主图配色不等超过 1 种"),!1;var n=/(png|jpeg|jpg)/g.test(t.type);return n||e.$msg.error("请上传正确格式图片"),n},onRemove:function(e){var t=W()(r.shoeMainImgs);t=t.map(function(t){return t.imgId===e.uid&&(t.delFlag=1,t.ranking=0),t});var n=1;t=t.map(function(e){return 1!=e.delFlag&&(e.ranking=n,n++),e}),a({shoeMainImgs:t},!1)},customRequest:function(e){G.a.uploadFile({file:e.file,fileName:e.file.name,ypModel:"run_shoe"}).then(function(t){var n=!G.a.isEmpty(r.shoeMainImgs)&&J()(r.shoeMainImgs,{imgId:e.file.uid})>-1,o=[],s={delFlag:0,imgId:e.file.uid,imgUrl:t,shoeId:r.shoeId};G.a.isEmpty(r.shoeMainImgs)?(s.ranking=1,o=[s]):(s.ranking=r.shoeMainImgs.length+1,o=[].concat(oe(r.shoeMainImgs),[s])),n||a({shoeMainImgs:o,coverImg:t,gender:0},!1)})},fileList:n.shoeMainImgs},ge),o.createElement("span",{style:{color:"#999999",fontSize:12,display:"flex",alignItems:"flex-end"}},"*主图，型号的默认配图。请上传 jpg 或 png，建议尺寸 500x500px，纯色底，最多上传 1 张图")),o.createElement("div",{className:"shoe-sku-upload-bottom"},o.createElement(g.a,{value:r.model,style:{width:320},placeholder:"请填写货号/色号",onChange:function(e){a({model:e.target.value},!1)}})))},e.renderUploadItem=function(t,n,r){var a="".concat(t.colorItemId||t.colorImgUrl,"_").concat(r),s=e.props.shoe,i=s.currentSku,l=s.setCurrentSku,c=W()(i.shoeColors);return o.createElement("li",{key:a,className:"shoe-sku-upload-item"},o.createElement("div",{className:"shoe-sku-upload-top",onClick:function(t){var n=t.nativeEvent.target.querySelector(".ant-upload-list-item-thumbnail").getAttribute("href");e.setState({previewImage:n,previewVisible:!0})}},o.createElement(S.a,{style:{width:104,height:104},key:a,className:"logo-square upload-shoeMain-imgs",accept:"image/png,image/jpeg",action:"",listType:"picture-card",onPreview:function(n){e.setColorImgUrl(n,t,r)},beforeUpload:function(n){if((G.a.isEmpty(t.shoeImgs)?0:t.shoeImgs.filter(function(e){return 1!=e.delFlag}).length)>=5)return e.$msg.warning("当前配色不等超过 5 种"),!1;var r=/(png|jpeg|jpg)/g.test(n.type);return r||e.$msg.error("请上传正确格式图片"),r},onRemove:function(e){var n=W()(t.shoeImgs);n=n.map(function(t,n){return t.imgId===e.uid&&(t.delFlag=1),t});for(var a=0;a<n.length;a++)if(t.colorImgUrl===e.url){var o=n[a+1];t=Object.assign({},t,{colorImgUrl:G.a.isEmpty(o)?void 0:o.imgUrl});break}var s=1;n=n.map(function(e){return 1!=e.delFlag&&(e.ranking=s,s++),e}),c=c.map(function(e,a){return a==r&&((e=Object.assign({},t)).shoeImgs=n),0==e.shoeImgs.length&&(e.delFlag=1),e}),l({shoeColors:c},!1)},customRequest:function(e){var n=G.a.uploadFile({file:e.file,fileName:e.file.name,ypModel:"run_shoe"}).then(function(n){var a=!G.a.isEmpty(t.shoeImgs)&&J()(t.shoeImgs,{imgId:e.file.uid})>-1,o=[],s={delFlag:0,imgId:e.file.uid,imgUrl:n,shoeId:i.shoeId};G.a.isEmpty(t.shoeImgs)?(s.ranking=1,o=[s]):(s.ranking=t.shoeImgs.length+1,o=[].concat(oe(t.shoeImgs),[s])),c=c.map(function(e,t){return t==r&&(e.shoeImgs=o,e.colorImgUrl||(e.colorImgUrl=n)),e}),a||l({shoeColors:c},!1)});return n.abort=function(){},n},fileList:n.shoeImgs},ge),o.createElement("span",{className:"shoe-sku-upload-close-tip"},o.createElement("span",{className:"shoe-sku-upload-close",onClick:function(){c=c.map(function(e,t){return t==r&&(e.delFlag=1,e.shoeImgs=e.shoeImgs.map(function(e){return e.delFlag=1,e})),e}),l({shoeColors:c},!1)}},o.createElement("a",null,o.createElement(I.a,{type:"close"}))),c.length-1==r&&o.createElement("span",{className:"shoe-sku-upload-tip"},"* 上传 jpg 或 png，建议尺寸 500x500px，纯色底。",o.createElement("br",null),"* 每个配色最多上传 5 张图。",o.createElement("br",null),"* 默认第一张为配色封面图。"))),o.createElement("div",{className:"shoe-sku-upload-bottom"},o.createElement(g.a,{value:t.model,style:{width:320},placeholder:"请填写货号/色号",onChange:function(e){c=c.map(function(t,n){return n==r&&(t.model=e.target.value),t}),l({shoeColors:c},!1)}}),o.createElement(de,{value:t.gender,onChange:function(t){c=c.map(function(e,n){return n==r&&(e.gender=t.target.value),e}),e.props.shoe.setCurrentSku({shoeColors:c},!1)}},o.createElement(P.a,{value:1},"男款"),o.createElement(P.a,{value:2},"女款"))))},e.renderShoeColors=function(){var t=e.props.shoe,n=t.currentSku,r=t.currentShowSku;return!G.a.isEmpty(n.shoeColors)&&n.shoeColors.map(function(t,n){return 1!=t.delFlag?e.renderUploadItem(t,r.shoeColors[n],n):null})},e.renderUploadComponent=function(){var t=e.props.shoe,n=t.currentSku,r=t.setCurrentSku;return o.createElement(o.Fragment,null,o.createElement(ue,Object.assign({label:"封面图"},ye(2,18),{required:!0}),o.createElement("ul",null,e.renderMainImgs())),o.createElement(ue,Object.assign({label:"配色货号"},ye(2,18)),o.createElement("ul",null,e.renderShoeColors())),o.createElement(ue,{style:{marginLeft:"8.33%",color:"#1890FF"}},o.createElement("a",{onClick:function(){var e=W()(n.shoeColors),t={colorImgUrl:"",gender:0,model:"",colorItemId:0,colorName:"",colorStatus:1,shoeColorId:0,shoeId:n&&(n.shoeId||0),delFlag:0,shoeImgs:[]};e=G.a.isEmpty(e)?[t]:e.concat(t),r({shoeColors:e},!1)}},o.createElement(I.a,{type:"plus"})," 添加配色")))},e.handlePreview=function(t){e.props.shoe.setCurrentSku({coverImg:t.url},!1)},e.handleUpload=function(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return r.a(le(e),void 0,void 0,regeneratorRuntime.mark(function e(){var r,o,s,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n.fileList.length>a)){e.next=2;break}return e.abrupt("return",this.$msg.warning("最多上传 ".concat(a," 张图片")));case 2:if(!t.limit){e.next=5;break}if(!(n.file.size/1024>t.limit)){e.next=5;break}return e.abrupt("return",this.$msg.error("图片大小不得超过 ".concat(t.limit,"kb")));case 5:if(r=void 0,!n.file.originFileObj){e.next=10;break}return e.next=9,G.a.readAsDataURL(n.file.originFileObj);case 9:r=e.sent;case 10:o=(o=(o=oe(n.fileList)).slice(-a)).map(function(e){return e.url=r||e.url||e.thumbUrl,e}),s=G.a.isEmpty(o),i=this.props.shoe.currentSku.shoeMainImgs,i=W()(i),s?i=[]:"removed"===n.file.status?i=i.map(function(e){return e.imgId===n.file.uid&&(e.delFlag=1),e}):n.file.status,this.props.shoe.setCurrentSku({shoeMainImgs:s?[]:i},!1);case 18:case"end":return e.stop()}},e,this)}))},e.onTagSearch=Y()(function(t){return r.a(le(e),void 0,void 0,regeneratorRuntime.mark(function e(){var n,r,a=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$api.shoe.getTagList({pageNum:1,pageSize:10,tagName:t});case 2:n=e.sent,r=n.data.data.list.map(function(e){return e.id=e.tagId,e.title="".concat(e.typeName,"-").concat(e.tagName),e}),this.setState({tagOptions:r,tagInputValue:t},function(){a.forceUpdate()});case 5:case"end":return e.stop()}},e,this)}))},500),e.onTagSelect=function(t,n){var r=e.props.shoe.currentShowSku,a=r.shoeTagList,o=r.shoeId;if((a=G.a.isEmpty(a)?[]:a)&&Object(U.o)(a)instanceof Array&&!a.find(function(e){return e.tagName===t})){var s=n.props.$data,i={shoeId:o||0,tagId:s.tagId,tagName:s.tagName,typeName:s.typeName};a=[].concat(oe(a),[i])}e.props.shoe.setCurrentSku({shoeTagList:a},!1),e.setState({selectTagVisible:!1,tagInputValue:void 0})},e.onTagBlur=function(){e.setState({selectTagVisible:!1,tagInputValue:void 0})},e.onKeywordSelect=function(t,n){t?e.setState({keywordInputValue:t.trim()}):e.setState({keywordInputValue:void 0})},e.onKeywordBlur=function(){e.onKeywordConfirm(),e.setState({selectKeywordVisible:!1,keywordInputValue:void 0})},e.onKeywordConfirm=function(){var t=e.state.keywordInputValue,n=e.props.shoe.currentShowSku.keyword;n=G.a.isEmpty(n)?[]:n,t&&n&&Object(U.o)(n)instanceof Array&&-1===n.indexOf(t)&&(n=[].concat(oe(n),[t])),e.props.shoe.setCurrentSku({keyword:n.join(" ")},!1)},e.onRecommendSearch=Y()(function(t){return r.a(le(e),void 0,void 0,regeneratorRuntime.mark(function e(){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$api.shoe.getSkuList({pageNum:1,pageSize:10,shoeName:t});case 2:n=e.sent,this.setState({recommendOptions:n.data.data.list,recommendInputValue:t});case 4:case"end":return e.stop()}},e,this)}))},500),e.onRecommendSelect=function(t,n){var r=e.props.shoe.currentShowSku,a=r.shoeResembleList,o=r.shoeId;if(a=G.a.isEmpty(a)?[]:a,n.props.$data.shoeId==o)return e.$msg.warning("不可添加当前跑鞋为相似跑鞋");a&&Object(U.o)(a)instanceof Array&&G.a.isEmpty(a.find(function(e){return e.shoeName===t}))&&(a=[{delFlag:0,score:1200,srcShoeId:o,targetShoeId:n.props.$data.shoeId,shoeName:n.props.$data.shoeName,brandName:n.props.$data.brandName,type:1}].concat(oe(a)));e.props.shoe.setCurrentSku({shoeResembleList:a},!1),e.setState({selectRecommendVisible:!1,recommendInputValue:void 0})},e.onRecommendBlur=function(){e.setState({selectRecommendVisible:!1,recommendInputValue:void 0})},e.handleKeywordClose=function(t){var n=e.props.shoe.currentShowSku.keyword;n=n.filter(function(e){return e!==t}),e.props.shoe.setCurrentSku({keyword:n.join(" ")},!1)},e.handleRecommendClose=function(t){var n=e.props.shoe.currentShowSku.shoeResembleList;n=(n=W()(n)).filter(function(e){return e.shoeId!==t.shoeId}),e.props.shoe.setCurrentSku({shoeResembleList:n},!1)},e.handleTagClose=function(t){var n=e.props.shoe.currentSku.shoeTagList.map(function(e){return e.tagId===t.tagId&&(e.delFlag=1),e});e.props.shoe.setCurrentSku({shoeTagList:n},!1)},e.handleSubmit=function(t){return r.a(le(e),void 0,void 0,regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.props.form.validateFields(function(e,n){return r.a(t,void 0,void 0,regeneratorRuntime.mark(function t(){var n,r,a,o,s,i,l,c=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=13;break}if(n=this.props.shoe,r=n.currentShowSku,a=n.currentSku,o=W()(a),s=this.state.mode,i={brandId:o.brandId||2,brandName:o.brandName,shoeId:o.shoeId,shoeName:o.shoeName,price:Number(o.price)||0,shoeIntro:o.shoeIntro||"",model:o.model||"",gender:o.gender,coverImg:o.coverImg,shoeMainImgs:o.shoeMainImgs,shoeColors:o.shoeColors||[],shoeTagList:o.shoeTagList,keyword:o.keyword||"",marketPublicTime:o.marketPublicTime||"",technology:o.technology||"",tagWord:o.tagWord||"",shoeResembleList:o.shoeResembleList,shoeStatus:o.shoeStatus,firstPublic:o.firstPublic,shoeRadarVO:o.shoeRadarVO||void 0},12==o.brandId&&(i.extrasInfo=o.extrasInfo||void 0),G.a.isEmpty(i.shoeMainImgs)||(i.shoeMainImgs=i.shoeMainImgs.map(function(e){return/^rc/.test(e.imgId)&&(e.imgId=0),e})),G.a.isEmpty(i.shoeColors)||(i.shoeColors=i.shoeColors.map(function(e){G.a.isEmpty(e.shoeImgs)||(e.shoeImgs=e.shoeImgs.map(function(e){return/^rc/.test(e.imgId)&&(e.imgId=0),e}),J()(e.shoeImgs.filter(function(e){return 1!=e.delFlag}),function(t){return t.imgUrl==e.colorImgUrl})<0&&(e.colorImgUrl=e.shoeImgs[0].imgUrl));return e})),1==a.shoeStatus?i.publishTime=Q()(a.publishTime).format("YYYY-MM-DD HH:mm:ss"):i.publishTime=Q()("1970-01-02").format("YYYY-MM-DD HH:mm:ss"),!(l=this.getValidation(i))){t.next=12;break}return t.abrupt("return",this.$msg.warn(l));case 12:fe||("add"===s?(i.shoeId=0,this.setState({btnLoading:!0}),this.$api.shoe.addSku(i).then(function(e){c.$msg.success("跑鞋d单品 ".concat(a.shoeName," 添加成功")),setTimeout(function(){fe=!1,c.setState({btnLoading:!1}),c.goBack();var e=c.props.shoe.skuListMeta,t=e.pageNum,n=e.pageSize;c.$store.shoe.getSkuList({pageNum:t,pageSize:n,orderBy:"shoeId",sort:"desc"})},1500)}).catch(function(e){fe=!1,c.setState({btnLoading:!1})})):(i.shoeId=r.shoeId,G.a.isEmpty(i.shoeResembleList)||(i.shoeResembleList=i.shoeResembleList.map(function(e){return 1==e.type&&(delete e.brandName,delete e.shoeName),{delFlag:e.delFlag||0,score:e.score||1e3,srcShoeId:e.srcShoeId||i.shoeId,targetShoeId:e.targetShoeId||e.shoeId,type:e.type||0}})),this.$api.shoe.updateSku(i).then(function(e){c.$msg.success("跑鞋单品 ".concat(r.shoeName," 编辑成功")),c.setState({btnLoading:!0}),setTimeout(function(){fe=!1,c.setState({btnLoading:!1}),c.goBack();var e=c.props.shoe.skuListMeta,t=e.pageNum,n=e.pageSize;c.$store.shoe.getSkuList({pageNum:t,pageSize:n,orderBy:"shoeId",sort:"desc"})},1500)}).catch(function(e){fe=!1,c.setState({btnLoading:!1})})));case 13:case"end":return t.stop()}},t,this)}))});case 1:case"end":return e.stop()}},e,this)}))},e.getValidation=function(e){var t,n=new A.a;if(n.add(e.brandName,[{strategy:"isNonEmpty",errMsg:"请选择品牌名称"}]),n.add(e.shoeName,[{strategy:"isNonEmpty",errMsg:"请填写跑鞋型号"},{strategy:"maxLength:100",errMsg:"跑鞋型号不得超过 100 个字"}]),null!=e.price){var r=(t=(e.price/100).toString().split("."))[0],a=t[1];n.add(r,[{strategy:"maxLength:6",errMsg:"跑鞋价格不得超过 6 位"}]),G.a.isEmpty(a)||n.add(a,[{strategy:"maxLength:2",errMsg:"跑鞋价格小数位不得超过 2 位"}])}else t=e.price,n.add(t,[{strategy:"maxLength:6",errMsg:"跑鞋价格不得超过 6 位"}]);n.add(e.shoeIntro,[{strategy:"maxLength:1000",errMsg:"跑鞋详情不得超过 1000 个字"}]),n.add(e.coverImg,[{strategy:"isNonEmpty",errMsg:"请选择一张图片设为封面图"}]),G.a.isEmpty(e.shoeColors)||e.shoeColors.filter(function(e){return 0==e.delFlag}).forEach(function(e,t){var r=e.colorImgUrl,a=e.shoeImgs.filter(function(e){return 0==e.delFlag});0==e.delFlag&&(n.add(a,[{strategy:"isNonEmpty",errMsg:"第 ".concat(t+1," 行的跑鞋配色图不能为空")}]),n.add(r,[{strategy:"isNonEmpty",errMsg:"第 ".concat(t+1," 行的封面图不能为空")}]))}),n.add(!G.a.isEmpty(e.shoeTagList)&&e.shoeTagList.filter(function(e){return 1!=e.delFlag}),[{strategy:"isNonEmpty",errMsg:"标签不能为空"}]),1==e.shoeStatus&&n.add(e.publishTime,[{strategy:"isNonEmpty",errMsg:"上架时间不能为空"}]);var o=n.start();return o||((G.a.isEmpty(e.shoeMainImgs)||!G.a.isEmpty(e.shoeMainImgs)&&e.shoeMainImgs.every(function(e){return 1==e.delFlag}))&&(o="配色货号（色号）字段相关值不能为空"),e.shoeStatus||0==e.shoeStatus||(o="请选择是否上架"),o)},e.goBack=function(){setTimeout(function(){e.props.history.goBack(),e.props.shoe.setCurrentSku({}),G.a.rmLStorage("currentSku")},300)},e.renderModal=function(){var t=e.state,n=t.previewImage,r=t.previewVisible;return o.createElement(k.a,{visible:r,footer:null,onCancel:e.handleCancel},o.createElement("img",{alt:"example",style:{width:"100%"},src:n}))},e.handleCancel=function(){e.setState({previewVisible:!1})},e}var n,s,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ce(e,t)}(t,a["a"]),n=t,(s=[{key:"componentDidMount",value:function(){return r.a(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.init();case 1:case"end":return e.stop()}},e,this)}))}},{key:"componentWillUnmount",value:function(){this.props.shoe.setCurrentSku({},!0,!1)}},{key:"render",value:function(){var e=this.props.shoe.currentSku;return o.createElement("div",{className:"editor shoe-sku"},o.createElement("section",{className:"editor-content panel-block"},this.renderEditor()),o.createElement("section",{className:"editor-modal"},this.renderModal()),o.createElement("section",{className:"cover-img"},o.createElement("span",null,o.createElement("span",{style:{color:"#f5222d"}},"*")," 封面图："),o.createElement("span",{className:"cover-img-wrapper"},e.coverImg?o.createElement("img",{src:e.coverImg,alt:""}):"请设置封面图")))}}])&&se(n.prototype,s),i&&se(n,i),t}(),ve=be=r.b([h.a.create(),Object(l.b)("common","shoe"),l.c],be),Se=n(203),Ee=n.n(Se),ke=(n(250),n(1383)),we=n.n(ke),Ie=(n(586),n(1424)),Ne=n(1428);function Ce(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var s,i=e[Symbol.iterator]();!(r=(s=i.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Oe=function(e){var t={selectedRowKeys:e.state.selectedRowKeys,onChange:function(t,n){e.setState({selectedRowKeys:t})}},n=[{title:"跑鞋 ID",width:100,dataIndex:"shoeId",sorter:!0},{title:"跑鞋详情",width:420,render:function(t,n){var r=[];return G.a.isEmpty(n.coverImg)||(r=[{url:n.coverImg}]),G.a.isEmpty(n.shoeColors)||(r=r.concat(n.shoeColors.map(function(e){return{url:e.colorImgUrl}}))),o.createElement("div",{className:"shoe-sku-detail"},o.createElement("div",{className:"shoe-sku-detail-name"},o.createElement("div",{className:"shoe-sku-detail-brandname"},o.createElement("a",{onClick:function(){e.props.history.push("/admin/shoe/racing/brand/list?brandName=".concat(n.brandName))}},n.brandName),o.createElement("strong",null,n.shoeName)),o.createElement("span",{className:"shoe-sku-detail-price"},"￥ ",n.price/100)),o.createElement("div",{className:"shoe-sku-detail-content"},o.createElement(Ne.a,{width:420},o.createElement("p",{className:"shoe-list-table-detail-content",dangerouslySetInnerHTML:{__html:n.shoeIntro}}))),!G.a.isEmpty(r)&&o.createElement("ul",{className:"shoe-sku-detail-imgs"},r.map(function(t,n){return o.createElement("li",null,o.createElement("a",{onClick:function(){e.setState({currentGallery:r,currentGalleryIndex:n,visible:!0})}},o.createElement("img",{src:t.url,alt:"",style:{objectFit:"contain"}})))})),o.createElement("div",{className:"shoe-sku-detail-time"},"发布于 ",o.createElement("span",null,Q()(n.publishTime).format("YYYY.MM.DD HH:mm"))))}},{title:"统计",width:200,dataIndex:"addCount",sorter:!0,render:function(t,n){return o.createElement("div",{className:"shoe-sku-stats"},o.createElement("p",null,"添加：",n.addCount||0),o.createElement("a",{style:{color:"#1890FF"},onClick:function(){var t="/admin/shoe/racing/comment/comment-list?shoeId=".concat(n.shoeId);e.props.history.push(t)}},"评论：",o.createElement("a",null,n.commentCount||0)),o.createElement("p",null,o.createElement("span",{style:{marginRight:4}},"评分：",n.avgScore||0),o.createElement("span",null,o.createElement(we.a,{placement:"bottomLeft",content:o.createElement("div",null,o.createElement("p",null,o.createElement("strong",{className:"gray"},"单维度"),o.createElement("span",null,n.avgScore)),o.createElement("p",null,o.createElement("strong",{className:"gray"},"六维度"),o.createElement("span",null,n.avgMultidimenScore)))},o.createElement(I.a,{type:"question-circle"})))),o.createElement("p",null,o.createElement("span",{style:{marginRight:4}},"官评：",n.shoeRadarVO&&((n.shoeRadarVO.radarEndurance+n.shoeRadarVO.radarSafety+n.shoeRadarVO.radarSpeed)/3).toFixed(2)||0),o.createElement("span",null,o.createElement(we.a,{placement:"bottomLeft",content:o.createElement("div",null,o.createElement("p",null,o.createElement("strong",{className:"gray"},"耐力"),o.createElement("span",null,n.shoeRadarVO&&n.shoeRadarVO.radarEndurance||"--")),o.createElement("p",null,o.createElement("strong",{className:"gray"},"速度"),o.createElement("span",null,n.shoeRadarVO&&n.shoeRadarVO.radarSpeed||"--")),o.createElement("p",null,o.createElement("strong",{className:"gray"},"安全"),o.createElement("span",null,n.shoeRadarVO&&n.shoeRadarVO.radarSafety||"--")))},o.createElement(I.a,{type:"question-circle"})))),o.createElement("p",null,"配色：",n.shoeColors.length||0))}},{title:"标签",width:200,render:function(e,t){return o.createElement("div",{className:"shoe-sku-tags",style:{maxWidth:200}},!G.a.isEmpty(t.shoeTagList)&&t.shoeTagList.map(function(e){return o.createElement(C.a,{key:e.id},e.typeName?e.typeName+"-":"",e.tagName)}))}},{width:120,title:"状态",filters:[{text:"上架",value:1},{text:"下架",value:8},{text:"删除",value:9}],dataIndex:"shoeStatus",filterMultiple:!1,render:function(e,t){return o.createElement(Ie.a,{type:{1:"normal",8:"block",9:"block"}[t.shoeStatus],text:{1:"上架",8:"下架",9:"删除"}[t.shoeStatus]})}},{width:120,title:"CPS",filters:[{text:"在售",value:1},{text:"无",value:0}],dataIndex:"isExistCPS",filterMultiple:!1,render:function(e,t){return o.createElement(Ie.a,{type:{1:"normal",0:"block"}[t.isExistCPS],text:{1:"在售",0:"无"}[t.isExistCPS]})}},{width:180,title:"操作",render:function(t,n){return o.createElement("div",{className:"common-list-table-operation"},o.createElement("span",{onClick:function(){return e.goToEditor(n)}},"编辑"),o.createElement("span",{className:"common-list-table-operation-spliter"}),o.createElement(Ee.a,{overlay:e.renderMenu(n)},o.createElement("span",null,"更多 ",o.createElement(I.a,{type:"down"}))))}}],r=Object.assign({},e.props.common.paginationConfig,{current:e.state.currentPage,onChange:function(e,t){},total:e.props.shoe.skuListMeta.total,onShowSizeChange:function(t,n){e.resetPagination(n,t)}});return{addBtn:{title:function(){return o.createElement(b.a,{type:"primary",onClick:function(){return e.goToEditor({})}},o.createElement(I.a,{type:"plus"})," 添加")}},tableHeader:function(){return null},searcher:{collapseControl:{onChange:function(t){e.toggleCollapse(t)},showMoreBtn:!0},batchControl:{placeholder:"请选择",showBatchControl:!G.a.isEmpty(e.state.selectedRowKeys),options:[{title:"上架",value:"upshelf"},{title:"下架",value:"downshelf"},{title:"删除",value:"delete"}],onBatch:function(t){e.onBatch(t)}},widgets:[[{type:"SelectInput",label:"跑鞋",placeholder:"请输入跑鞋 ID 或型号",options:[{title:"跑鞋 ID",value:"shoeId"},{title:"跑鞋型号",value:"shoeName"}],inputValue:e.state.shoeValue,selectValue:e.state.shoeField,onSelectChange:function(t){e.setShoeField(t)},onInputChange:function(t){e.setShoeValue(t.target.value)},onPressEnter:function(t){e.onSearch()}},{type:"Select",label:"选择品牌",showSearch:!0,placeholder:"请输入品牌名称",value:e.state.brandValue,option:{key:"brandId",value:"brandName",title:"brandName",data:e.state.brandOptions||[]},onFocus:function(){e.onBrandFocus()},onSearch:function(t){e.onBrandSearch(t)},onChange:function(t,n){e.onBrandSelect(t,n)},onSelect:function(e,t){},onBlur:function(){},onPopupScroll:function(t){e.onBrandPopupScroll(t)}}],[{type:"DatePicker",label:"发布日期",placeholder:"请输入发布日期",value:e.state.date||void 0,showTime:!0,onChange:function(t){e.onDateChange(t)}}]],onSearch:function(){e.onSearch()},onReset:function(){e.onReset()}},table:{rowKey:"shoeId",rowSelection:t,columns:n,dataSource:e.props.shoe.skuList,pagination:r,loading:e.state.tableLoading,onChange:function(t,n,r){var a={pageNum:t.current,pageSize:t.pageSize};if(!G.a.isEmpty(n))for(var o=0,s=Object.entries(n);o<s.length;o++){var i=Ce(s[o],2),l=i[0],c=i[1];a[l]=c?c[0]:void 0}G.a.isEmpty(r)?(a.orderBy="shoeId",a.sort="desc"):(a.orderBy="".concat(r.field),a.sort="".concat("descend"===r.order?"desc":"asc")),e.setState({filter:Object.assign({},e.state.filter,a),currentPage:t.current},function(){e.getDataList(e.state.filter)})}}}},xe=n(72),Re=n.n(xe),Te=(n(249),n(1426)),je=n(1434);function Pe(e){return(Pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Me(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Le(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ve(e){return(Ve=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $e(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Fe(e,t){return(Fe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Be=k.a.confirm,_e=[{title:"跑鞋评价 >",path:"/admin/shoe/racing/comment/comment-list"},{title:"跑鞋热词 >",path:"/admin/shoe/racing/term"}],ze=function(e){function t(){var e,n,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,a=Ve(t).apply(this,arguments),(e=!a||"object"!==Pe(a)&&"function"!=typeof a?$e(n):a).state={selectedRowKeys:[],brandOptions:[],filter:{orderBy:"shoeId",sort:"desc"},brandValue:void 0,shoeField:"shoeName",shoeValue:void 0,tagValue:void 0,statisticsValue:void 0,date:void 0,currentGallery:[],currentGalleryIndex:0,visible:!1,tableLoading:!1,currentPage:1,brandOptionsMeta:{total:0,pageNum:1,pageSize:20},affixConfig:{}},e.getDataList=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setState({tableLoading:!0,filter:Object.assign({},e.state.filter,t)},function(){return r.a($e(e),void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$store.shoe.getSkuList(Object.assign({},this.state.filter,t));case 2:this.setState({tableLoading:!1});case 3:case"end":return e.stop()}},e,this)}))})},e.resetPagination=function(t,n){return r.a($e(e),void 0,void 0,regeneratorRuntime.mark(function e(){var a=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({filter:Object.assign({},this.state.filter,{pageSize:t,pageNum:n})},function(){return r.a(a,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=this.state.filter,this.getDataList(t);case 2:case"end":return e.stop()}},e,this)}))});case 1:case"end":return e.stop()}},e,this)}))},e.onDateChange=function(t){e.setState({date:t,filter:Object.assign({},e.state.filter,{publishTimeStart:t?t.startOf("day").format("YYYY-MM-DD HH:mm:ss"):void 0,publishTimeEnd:t?t.endOf("day").format("YYYY-MM-DD HH:mm:ss"):void 0})})},e.onSearch=function(){return r.a($e(e),void 0,void 0,regeneratorRuntime.mark(function e(){var t,n=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this.state.filter).shoeId||!Number.isNaN(Number(t.shoeId))){e.next=3;break}return e.abrupt("return",this.$msg.error("请输入正确 shoeId"));case 3:this.setState({filter:Object.assign({},t,{pageNum:1}),currentPage:1},function(){n.getDataList(n.state.filter)});case 4:case"end":return e.stop()}},e,this)}))},e.onReset=function(){return r.a($e(e),void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,r=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t={pageNum:1,pageSize:this.state.filter.pageSize,orderBy:"shoeId",sort:"desc"},n=this.props.location.pathname,this.props.history.replace(n),this.setState({shoeValue:void 0,brandValue:void 0,tagValue:void 0,date:void 0,filter:t,currentPage:1},function(){r.getDataList(r.state.filter)});case 4:case"end":return e.stop()}},e,this)}))},e.goToEditor=function(t){var n="/admin/shoe/racing/sku/editor?id=".concat(u()(t)?0:t.shoeId);e.props.history.push(n)},e.setShoeField=function(t){var n=e.state.filter;"shoeId"!==t?delete n.shoeId:"shoeName"!==t&&delete n.shoeName,e.setState({shoeField:t,shoeValue:void 0,filter:Object.assign({},n,Me({},t,void 0))})},e.setShoeValue=function(t){e.setState({shoeValue:t,filter:Object.assign({},e.state.filter,Me({},e.state.shoeField,t||void 0))})},e.onBrandFocus=function(){return r.a($e(e),void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$api.shoe.getBrandList({pageNum:1,pageSize:20});case 2:t=e.sent,this.setState({brandOptions:t.data.data.list,brandOptionsMeta:{total:t.data.data.total,pageNum:t.data.data.pageNum,pageSize:t.data.data.pageSize}});case 4:case"end":return e.stop()}},e,this)}))},e.onBrandPopupScroll=te()(function(t){return r.a($e(e),void 0,void 0,regeneratorRuntime.mark(function e(){var n,r,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.state,r=n.brandOptions,a=n.brandOptionsMeta,!(!(!t||!t.target)&&t.target.scrollHeight-(t.target.scrollTop+t.target.clientHeight)<=10&&a.total>r.length)){e.next=7;break}return e.next=5,this.$api.shoe.getBrandList({pageNum:a.pageNum+1,pageSize:20});case 5:o=e.sent,this.setState({brandOptions:re()(this.state.brandOptions,o.data.data.list,"brandId"),brandOptionsMeta:{total:o.data.data.total,pageNum:o.data.data.pageNum,pageSize:o.data.data.pageSize}});case 7:case"end":return e.stop()}},e,this)}))},300),e.onBrandSearch=Y()(function(t){return r.a($e(e),void 0,void 0,regeneratorRuntime.mark(function e(){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$api.shoe.getBrandList({brandName:t,pageSize:10,pageNum:1});case 2:n=e.sent,this.setState({brandOptions:n.data.data.list});case 4:case"end":return e.stop()}},e,this)}))},500),e.onBrandSelect=function(t,n){var r=n.props.$data.brandId;e.setState({brandValue:t,filter:Object.assign({},e.state.filter,{brandId:r||void 0})},function(){e.onSearch()})},e.onTagChange=function(t){e.setState({tagValue:t,filter:Object.assign({},e.state.filter,{tagName:t||void 0})})},e.onStatisticsSelect=function(t,n){e.setState({statisticsValue:t,filter:Object.assign({},e.state.filter,{statistics:t||void 0})})},e.onBatch=function(t){var n=e.state.selectedRowKeys;if(t&&G.a.isEmpty(n))return e.$msg.warning("请选择至少一条记录");"upshelf"===t?e.toggleSkuStatus(1,n):"downshelf"===t?e.toggleSkuStatus(8,n):"delete"===t&&e.toggleSkuStatus(9,n)},e.renderMenu=function(t){var n=o.createElement("span",{onClick:e.toggleSkuStatus.bind($e(e),1,t.shoeId)},"上架"),r=o.createElement("span",{onClick:e.toggleSkuStatus.bind($e(e),8,t.shoeId)},"下架"),a=o.createElement("span",{onClick:e.toggleSkuStatus.bind($e(e),9,t.shoeId)},"删除"),s={1:[r,a],8:[n,a],9:[n,a]};return s[t.shoeStatus]&&o.createElement(Re.a,null,s[t.shoeStatus].map(function(e){return o.createElement(Re.a.Item,null,e)}))},e.toggleSkuStatus=function(t,n){return r.a($e(e),void 0,void 0,regeneratorRuntime.mark(function e(){var a,s,i=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a={1:{title:"跑鞋单品上架操作",content:o.createElement("span",null,"请问是否下架当前选中的跑鞋")},8:{title:"跑鞋单品下架操作",content:o.createElement("span",null,"请问是否下架当前选中的跑鞋")},9:{title:"跑鞋单品删除操作",content:o.createElement("span",null,"请问是否确定删除当前选中的跑鞋")}},s={1:"跑鞋单品上架成功",8:"跑鞋单品下架成功",9:"跑鞋单品删除成功"},Be({title:a[t].title,content:a[t].content,onOk:function(){return r.a(i,void 0,void 0,regeneratorRuntime.mark(function e(){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=null,!(n instanceof Array)){e.next=7;break}return e.next=4,this.$api.shoe.batchUpdateSkuStatus({shoeIds:n,shoeStatus:t});case 4:r=e.sent,e.next=10;break;case 7:return e.next=9,this.$api.shoe.updateSkuStatus({shoeId:n,shoeStatus:t});case 9:r=e.sent;case 10:0==r.data.ret?(this.$msg.success(s[t]),this.getDataList(this.state.filter)):this.$msg.error(r.data.msg);case 11:case"end":return e.stop()}},e,this)}))},onCancel:function(){return r.a(i,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}))}});case 3:case"end":return e.stop()}},e)}))},e.changeGalleryIndex=function(t){e.setState({currentGalleryIndex:t})},e.onGalleryModalOk=function(){e.setState({currentGallery:[],currentGalleryIndex:0,visible:!1})},e.onGalleryModalCancel=function(){e.setState({currentGallery:[],currentGalleryIndex:0,visible:!1})},e}var n,s,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Fe(e,t)}(t,a["a"]),n=t,(s=[{key:"componentDidMount",value:function(){return r.a(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,r,a,o,s,i=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=this.props.common.paginationConfig,n=t.defaultPageSize,r=t.defaultCurrent,a=this.props.location,(o=this.$qs.parse(a.search)).shoeId?this.setState({shoeField:"shoeId",shoeValue:o.shoeId,filter:{shoeId:o.shoeId}},function(){i.resetPagination(n,r)}):this.resetPagination(n,r),s={scrollToTop:document.querySelector(".shoe-sku"),scrollToBottom:1e5,elementToScroll:document.querySelector(".content")},this.setState({affixConfig:s});case 6:case"end":return e.stop()}},e,this)}))}},{key:"componentDidUpdate",value:function(){"/admin/shoe/racing/sku"===this.props.location.pathname&&this.props.history.replace("/admin/shoe/racing/sku/list")}},{key:"render",value:function(){var e=this,t=this.props,n=t.match,r=t.location,a=this.props.shoe.currentSku,s="/admin/shoe/racing/sku/editor"===r.pathname?G.a.isEmpty(a)?"添加跑鞋":"编辑跑鞋":"跑鞋单品",l=this.state,c=l.currentGallery,u=l.currentGalleryIndex,p=l.visible,h=l.affixConfig;return o.createElement("div",{className:"shoe-sku"},o.createElement(m.a,Object.assign({},this.props,{links:_e,title:s})),o.createElement(i.a,{path:"".concat(n.url,"/list"),render:function(t){return o.createElement(d.a,Object.assign({},t,{config:Oe(e)}))}}),o.createElement(i.a,{path:"".concat(n.url,"/editor"),render:function(e){return o.createElement(ve,Object.assign({},e))}}),o.createElement(je.a,Object.assign({},h)),o.createElement(k.a,{title:"跑鞋单品",visible:p,onOk:this.onGalleryModalOk,onCancel:this.onGalleryModalCancel},o.createElement(Te.a,{source:c,activeIndex:u,changeGalleryIndex:this.changeGalleryIndex})))}}])&&Le(n.prototype,s),l&&Le(n,l),t}();ze=r.b([Object(s.a)("/admin/shoe/racing/sku",{exact:!1}),Object(l.b)("common","shoe"),l.c],ze);t.default=ze}}]);