(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{1419:function(e,t,n){"use strict";n.d(t,"a",function(){return M});var r=n(1),a=n(109),o=(n(1422),n(146)),i=n.n(o),c=(n(167),n(353)),s=n.n(c),u=(n(578),n(352)),l=n.n(u),p=(n(248),n(1377)),m=n.n(p),f=(n(1376),n(1371)),d=n.n(f),h=(n(1370),n(168)),g=n.n(h),v=(n(354),n(23)),y=n.n(v),b=(n(351),n(582)),w=n.n(b),E=(n(581),n(584)),C=n.n(E),k=(n(583),n(580)),S=n.n(k),N=(n(579),n(11)),T=n(16),R=n.n(T);function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function I(e,t){return!t||"object"!==O(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var L=s.a.Option,_=l.a.Group,B=d.a.RangePicker,V=S.a.CheckableTag,$={SelectInput:function(e){var t=e.selectValue,n=e.inputValue,a=e.placeholder,o=e.options,i=e.onSelectChange,c=e.onInputChange,u=e.onPressEnter,p=e.selectStyle;return r.createElement(_,{compact:!0},r.createElement(s.a,{style:p?Object.assign({width:110},p):{width:110},value:t,onChange:i},o&&o.map(function(e,t){return r.createElement(L,{key:t,value:e.value},e.title)})),r.createElement(l.a,{style:{width:238},value:n,onChange:c,placeholder:a,onPressEnter:u}))},Select:function(e){var t=e.option,n=e.label,a=e.mode,o=e.onSearch,i=e.onSelect,c=e.onBlur,u=e.onFocus,l=e.value,p=e.placeholder,m=e.showSearch,f=e.width,d=e.filterOption,h=e.onChange,g=e.allowClear,v=e.onPopupScroll;return r.createElement(r.Fragment,null,n&&r.createElement("span",{className:"common-list-label"},"".concat(n,"：")),r.createElement("span",{className:"common-list-control"},r.createElement(s.a,{allowClear:g,value:l,mode:a||!1,style:{minWidth:f||258,width:f},showSearch:m,placeholder:p,filterOption:d,onSearch:o,onSelect:i,onChange:h,onBlur:c,onPopupScroll:v,onFocus:u},t.data.map(function(e){return r.createElement(L,{key:e[t.key]||e.id,value:e[t.value]||e.id,$data:e},e[t.title])}))))},DatePicker:function(e){var t=e.label,n=e.placeholder,a=e.onChange,o=e.value,i=e.style,c=e.format,s=e.showTime;return r.createElement(r.Fragment,null,t&&r.createElement("span",{className:"common-list-label"},"".concat(t,"：")),r.createElement("span",{className:"common-list-control"},r.createElement(d.a,{format:c||!1,style:i,showTime:s,placeholder:n,value:o,onChange:a})))},RangePicker:function(e){var t=e.label,n=e.alias,a=e.placeholder,o=e.onChange,c=e.value,s=e.showTime,u=e.format;return r.createElement(r.Fragment,null,t&&r.createElement("span",{className:"common-list-label"},"".concat(t,"：")),r.createElement("span",{className:"common-list-control"},r.createElement(B,{style:{width:400},showTime:s,format:u,placeholder:a,value:c,onChange:o}),r.createElement("span",{className:"common-list-control-date-alias"},!N.a.isEmpty(n)&&n.map(function(e,t){return r.createElement(i.a,{key:t,onClick:function(){return o([R()(Date.now()-864e5*e).startOf("day"),R()()])}},e," 天内")}))))},Input:function(e){var t=e.label,n=e.value,a=e.placeholder,o=e.onChange,i=e.width,c=e.onPressEnter;return r.createElement(r.Fragment,null,t&&r.createElement("span",{className:"common-list-label"},"".concat(t,"：")),r.createElement("span",{className:"common-list-control"},r.createElement(l.a,{style:{minWidth:i||258},value:n,onChange:o,placeholder:a,onPressEnter:c})))},Checkbox:function(e){var t=e.label,n=e.value,a=e.onChange;return r.createElement(g.a,{checked:n,onChange:a},t)},CheckableTag:function(e){var t=e.label,n=e.option,a=e.value,o=e.onChange;return r.createElement(r.Fragment,null,t&&r.createElement("span",{className:"common-list-label"},"".concat(t,"：")),r.createElement("span",{className:"common-list-control"},!N.a.isEmpty(n)&&n.map(function(e){return r.createElement(V,{key:e.value,checked:e.value===a,onChange:function(){o(e)}},e.title)})))},Label:function(e,t){var n=e.label;return r.createElement(r.Fragment,null,n&&r.createElement("span",{className:"common-list-label"},"".concat(n,"：")),r.createElement("span",{className:"common-list-control"},t))},Custom:function(e){return r.createElement("div",null,(void 0).props.children)}},M=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=I(this,j(t).apply(this,arguments))).state={collapse:!0},e.toggleCollapse=function(t){e.setState({collapse:!e.state.collapse})},e.renderSearcher=function(){var t=e.props.config,n=t.searcher,a=t.table,o=e.state.collapse;return n&&r.createElement("section",{className:"common-list-search"},e.renderWidgets(n.widgets),a&&a.tableHeader&&a.tableHeader(),r.createElement("div",{className:"common-list-search-right"},!n.hideSearcher&&r.createElement(r.Fragment,null,r.createElement(i.a,{type:"primary",onClick:n.onSearch},"查询"),r.createElement(i.a,{onClick:n.onReset},"重置")),n.collapseControl&&n.collapseControl.showMoreBtn&&r.createElement("span",{className:"common-list-serach-more"},r.createElement("a",{onClick:e.toggleCollapse},o?"更多":"收起"," ",r.createElement(y.a,{type:o?"down":"up"})))))},e.renderWidgets=function(t){var n=e.state.collapse,a=e.props.config.searcher;return t&&r.createElement("div",{className:"common-list-search-left"},t.map(function(t,o){return Array.isArray(t)?r.createElement("div",{key:o,className:"common-list-search-row",style:{display:a.collapseControl&&a.collapseControl.showMoreBtn&&n&&o>0?"none":"flex"}},t.map(function(t){return r.createElement("div",{key:t.label,className:"common-list-search-col",style:Object.assign({},t.style)},$[t.type]&&$[t.type](t,t.children?e.renderWidgets(t.children):null))})):r.createElement("div",{key:t.label,className:"common-list-search-row ".concat(t.className)},$[t.type]&&$[t.type](t,t.children?e.renderWidgets(t.children):null))}))},e.renderAddBtn=function(){var t=e.props.config,n=t.addBtn,a=t.searcher;return n&&r.createElement("section",{className:"common-list-addbtn",style:n.style},"function"==typeof n.title?r.createElement(n.title,null):n.title,r.createElement("div",{className:"common-list-search-batch"},a.batchControl.showBatchControl&&r.createElement(s.a,{placeholder:a.batchControl.placeholder,style:{minWidth:120},defaultValue:void 0,onChange:a.batchControl.onBatch},a.batchControl.options.map(function(e){return r.createElement(L,{key:e.value,value:e.value},e.title)}))))},e.renderTableHeader=function(){var t=e.props.config.tableHeader;return r.createElement("section",{className:"common-list-table-header"},t&&t())},e.renderTable=function(){var t=e.props.config.table,n=t.rowKey,a=t.rowSelection,o=t.columns,i=t.dataSource,c=t.pagination,s=t.onChange,u=t.loading,l=t.locale;return r.createElement("section",{className:"common-list-table"},r.createElement(m.a,{locale:l,rowKey:n||"id",rowSelection:a,columns:o,dataSource:i,loading:u,pagination:c,onChange:s}))},e.renderCards=function(){var t=e.props.config.cards,n=t.dataSource,a=t.loading,o=t.pagination,i=t.renderCard,c=t.addBtn;return r.createElement("div",{className:"common-list-cards-wrapper"},r.createElement("ul",{className:"common-list-cards"},a?r.createElement("div",{className:"common-list-cards-loading"},r.createElement(C.a,null)):r.createElement(r.Fragment,null,r.createElement("li",{className:"common-list-card add-btn"},r.createElement("div",{className:"common-list-card-item",onClick:c.onAddBtnClick},c.icon?r.createElement("img",{src:c.icon,alt:""}):r.createElement(y.a,{type:"plus-circle"}),r.createElement("p",null,c.title))),n.map(function(e){return r.createElement("li",{className:"common-list-card"},r.createElement("div",{className:"common-list-card-item"},i(e)))}))),r.createElement("section",{className:"common-list-cards-pagination"},r.createElement(w.a,Object.assign({},o))))},e}var n,o,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(t,a["a"]),n=t,(o=[{key:"render",value:function(){var e=this.props.config;return r.createElement("div",{className:"common-list"},this.renderSearcher(),this.renderAddBtn(),this.renderTableHeader(),e.table&&this.renderTable(),e.cards&&this.renderCards())}}])&&x(n.prototype,o),c&&x(n,c),t}()},1420:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(1),a=n(1375),o=n.n(a),i=(n(1374),n(11));n(1421);function c(e){var t=i.a.getPageBreadcrumb(e.location.pathname),n=e.title,a=e.links,c=e.tabs,s=e.currentTab;return r.createElement("div",{className:"common-header"},r.createElement("section",{className:"common-header-breadcrumb"},t&&r.createElement(o.a,null,t.map(function(e,t){return r.createElement(o.a.Item,{key:t},e.title)}))),r.createElement("section",{className:"common-header-title"},r.createElement("h2",null,n),r.createElement("div",{className:"common-header-links"},a&&a.map(function(t,n){return r.createElement("a",{key:n,onClick:function(){e.history.push(t.path)}},t.title)}))),r.createElement("section",{className:"common-header-tabs"},c&&c.map(function(t,n){return r.createElement("a",{onClick:function(){e.onTabClick(t.id)},className:"".concat(s===t.id?"tab-active":""," ")},r.createElement("span",null,t.title),t.tipComponent&&t.tipComponent())})))}},1421:function(e,t,n){},1422:function(e,t,n){},1423:function(e,t,n){"use strict";var r=function(e){var t=e;return 15===e.length&&(t=function(e){if(/^\d{15}$/.test(e)){e=e.substr(0,6)+"19"+e.substr(6,e.length-6);for(var t=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2],n=0,r=0;r<e.length;r++)n+=parseInt(e.substr(r,1))*t[r];return e+["1","0","X","9","8","7","6","5","4","3","2"][n%11]}return e}(e)),function(e){if(!/^\d{17}(\d|x)$/i.test(e))return!1;return null!=={11:"北京",12:"天津",13:"河北",14:"山西",15:"内蒙",21:"辽宁",22:"吉林",23:"黑龙",31:"上海",32:"江苏",33:"浙江",34:"安徽",35:"福建",36:"江西",37:"山东",41:"河南",42:"湖北",43:"湖南",44:"广东",45:"广西",46:"海南",50:"重庆",51:"四川",52:"贵州",53:"云南",54:"西藏",61:"陕西",62:"甘肃",63:"青海",64:"宁夏",65:"新疆",71:"台湾",81:"香港",82:"澳门",83:"台湾",91:"国外"}[parseInt(e.substr(0,2))]}(t)},a=function(e){return/^[HMhm]{1}([0-9]{8})$/.test(e)},o=function(e){return/^[0-9]{8}$/.test(e)||/^[0-9]{10}$/.test(e)},i=function(e){return/^[a-zA-Z]{5, 17}$/.test(e)||/^[a-zA-Z0-9]$/.test(e)},c=n(11);function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.d(t,"a",function(){return l});var u={isNonEmpty:function(e,t,n){if(0!==e&&c.a.isEmpty(e))return n&&n(),t},maxLength:function(e,t,n,r){if(e.length>t)return r&&r(),n},minLength:function(e,t,n,r){if(e.length<t)return r&&r(),n},isEmail:function(e,t,n){if(!/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(e))return n&&n(),t},isMobile:function(e,t,n){if(!/^(13[0-9]|14[57]|15[012356789]|16[0-9]|18[0-9]|17[0-9]|19[0-9])\d{8}$/.test(e))return n&&n(),t},isID:function(e,t,n,c){var s=null;if("id"===t?s=r:"HKMC"===t?s=a:"TW"===t?s=o:"PSPort"===t&&(s=i),!s(e))return c&&c(),n},isNumber:function(e,t,n){if(e&&Number.isNaN(Number(e)))return n&&n(),t},isHexColor:function(e,t,n){var r=e.toString();if(!r||!function(e){if("#"!==e[0])return!1;var t=e.slice(1);return 6===t.length&&/^[0-9a-fA-f]{6}$/.test(t)}(r))return n&&n(),t},customReg:function(e,t,n,r){var a=e.toString();if(!a||!new RegExp(t).test(a))return r&&r(),n}},l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.cache=[]}var t,n,r;return t=e,(n=[{key:"add",value:function(e,t){var n=this,r=!0,a=!1,o=void 0;try{for(var i,c=function(){var t=i.value,r=t.strategy.split(":");n.cache.push(function(){var n=r.shift();return r.unshift(e),r.push(t.errMsg),r.push(t.cb),u[n].apply(null,r)})},s=t[Symbol.iterator]();!(r=(i=s.next()).done);r=!0)c()}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}}},{key:"start",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,a=this.cache[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){var o=(0,r.value)();if(o)return o}}catch(e){t=!0,n=e}finally{try{e||null==a.return||a.return()}finally{if(t)throw n}}}}])&&s(t.prototype,n),r&&s(t,r),e}()},1463:function(e,t,n){},1464:function(e,t,n){},1465:function(e,t,n){},1513:function(e,t,n){"use strict";n.r(t);var r=n(2),a=n(1),o=n(109),i=n(200),c=n(120),s=n(1369),u=n.n(s),l=(n(1368),n(72)),p=n.n(l),m=(n(249),n(1463),n(110)),f=n(251),d=n.n(f),h=n(1420),g=n(1419),v=n(146),y=n.n(v),b=(n(167),n(23)),w=n.n(b),E=(n(351),n(203)),C=n.n(E),k=(n(250),function(e){var t={selectedRowKeys:e.state.selectedRowKeys,onChange:function(t,n){e.setState({selectedRowKeys:t})}},n=[{width:100,title:"标签ID",dataIndex:"tagId",sorter:!0},{width:120,title:"标签类别",dataIndex:"typeName"},{width:120,title:"标签名称",dataIndex:"tagName"},{width:120,title:"点击次数",dataIndex:"clickCnt",sorter:!0},{width:120,title:"操作",render:function(t,n){return a.createElement("div",{className:"common-list-table-operation"},a.createElement("span",{onClick:function(){return e.goToEditor(n)}},"编辑"),a.createElement("span",{className:"common-list-table-operation-spliter"}),a.createElement(C.a,{overlay:e.renderMenu(n)},a.createElement("span",null,"更多 ",a.createElement(w.a,{type:"down"}))))}}],r=Object.assign({},e.props.tag.paginationConfig,{onChange:function(t,n){e.resetPagination(n,t)},onShowSizeChange:function(t,n){e.resetPagination(n,t)}});return{addBtn:{title:function(){return a.createElement(y.a,{type:"primary",onClick:function(){return e.goToEditor({})}},a.createElement(w.a,{type:"plus"})," 添加")}},searcher:{batchControl:{placeholder:"请选择",showBatchControl:!1,options:[],onBatch:function(t){e.onBatch(t)}},widgets:[{type:"Select",label:"标签类别",showSearch:!0,placeholder:"请选择标签类别",allowClear:!1,value:e.state.tagTypeValue,option:{key:"tagTypeId",value:"tagTypeId",title:"typeName",data:e.state.typeList||[]},onSearch:function(t){e.onTagSearch(t)},onSelect:function(t,n){e.onTypeSelect(t,n)},onBlur:function(){e.onTagSearchBlur()}},{type:"Input",label:"标签名称",placeholder:"请输入标签名称",value:e.state.SearchInputValue||void 0,onChange:function(t){e.setSearchInputValue(t.target.value)},onPressEnter:function(t){e.onSearch()}}],onSearch:function(){e.onSearch()},onReset:function(){e.onReset()}},table:{rowKey:"tagId",rowSelection:t,columns:n,dataSource:e.state.tagList,pagination:r,onChange:function(t,n,r){r&&r.columnKey&&r.order&&e.getDataList(r)}}}}),S=n(147),N=n.n(S),T=(n(1464),n(580)),R=n.n(T);n(579);function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function I(e,t){return!t||"object"!==O(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var L=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=I(this,j(t).apply(this,arguments))).state={checked:e.props.checked},e.onChange=function(t){e.props.onChange(t,e.props.value)},e.onClose=function(t){e.props.onClose(e.props.value,t)},e}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(t,o["a"]),n=t,(r=[{key:"render",value:function(){var e=this.props.checked;return a.createElement(R.a,{closable:!0,className:"c-tag"+(e?" c-tag-checked":""),onClose:this.onClose},a.createElement(R.a.CheckableTag,{className:"c-tag-checkbox",checked:e,onChange:this.onChange},this.props.children))}}])&&x(n.prototype,r),i&&x(n,i),t}(),_=n(1373),B=n.n(_),V=(n(1372),n(352)),$=n.n(V),M=(n(248),n(1465),n(1423));function F(e){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function A(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function D(e){return(D=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function K(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function z(e,t){return(z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var H=B.a.Item,W=u.a.confirm,U=function(e,t,n){return{labelCol:{span:e,offset:n},wrapperCol:{span:t}}},Z=function(e){function t(){var e,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,o=D(t).apply(this,arguments),(e=!o||"object"!==F(o)&&"function"!=typeof o?K(n):o).state={mode:"add",inputVisible:!1,inputValue:""},e.init=function(){var t=e.$qs.parse(e.props.location.search);e.setState({mode:0==t.id?"add":"edit"},function(){e.state.mode})},e.renderEditor=function(){var t=e.props.tag,n=t.setCurrentNewTag,r=t.getCurrentNewTag,o=e.props.form.getFieldDecorator;return a.createElement(B.a,{className:"editor-form"},a.createElement(H,null,a.createElement("h2",{className:"form-title"},"标签基本信息")),e.renderTagType(),a.createElement(H,Object.assign({label:"标签名称"},U(2,6)),o("tagName",{initialValue:r&&r.tagName,rules:[{required:!0,message:"请输入标签名称"},{min:2,max:50,message:"请输入2-50个字符"}]})(a.createElement($.a,{placeholder:"请输入标签名称",onChange:function(e){n({tagName:e.target.value},!1)}}))),a.createElement(H,{className:"editor-form-btns"},a.createElement(y.a,{type:"primary",onClick:e.handleSubmit},"保存"),a.createElement(y.a,{onClick:e.goBack},"取消")))},e.handleSubmit=function(){return r.a(K(e),void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,a,o,i=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=this.props.tag,n=t.getCurrentNewTag,a=t.updateTag,o=this.state.mode,this.props.form.validateFields(function(e,t){return r.a(i,void 0,void 0,regeneratorRuntime.mark(function e(){var t,r=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this.getValidation(n))){e.next=3;break}return e.abrupt("return",this.$msg.warn(t));case 3:a().then(function(e){e&&"0"===e.data.ret?(r.$msg.success("标签 ".concat(n.tagName," ").concat("add"===o?"添加":"更新","成功")),r.goBack()):r.$msg.error("标签 ".concat(n.tagName," ").concat("add"===o?"添加":"更新","失败，").concat(e.data.msg))}).catch(function(e){r.$msg.error("标签 ".concat(n.tagName," ").concat("add"===o?"添加":"更新","失败，").concat(e))});case 4:case"end":return e.stop()}},e,this)}))});case 3:case"end":return e.stop()}},e,this)}))},e.getValidation=function(e){var t=new M.a;return t.add(e.tagTypeId,[{strategy:"isNonEmpty",errMsg:"请选择标签类别"}]),t.add(e.tagName,[{strategy:"isNonEmpty",errMsg:"请输入标签名称"},{strategy:"minLength:2",errMsg:"标签名称最少输入2个字符"},{strategy:"maxLength:50",errMsg:"标签名称最多输入50个字符"}]),t.start()},e.goBack=function(){setTimeout(function(){e.props.tag.toggleShouldUpdateTagList(),e.props.history.goBack(),e.props.tag.setCurrentNewTag({})},300)},e.renderTagType=function(){var t=e.props.tag,n=t.setCurrentNewTag,o=t.getCurrentNewTag,i=t.deleteTypeById,c=e.props.tag.currentTypeList,s=e.state,u=s.inputVisible,l=s.inputValue;return a.createElement(H,Object.assign({label:"标签类别"},U(2,20),{required:!0}),c.map(function(t,c){return a.createElement(L,{key:t.tagTypeId,value:t.tagTypeId,checked:o.tagTypeId===t.tagTypeId,onChange:function(e,t){n(e?{tagTypeId:t}:{tagTypeId:null},!1)},onClose:function(n,a){a.preventDefault(),W({title:"删除标签类别操作",content:"标签类别「".concat(t.typeName,"」将会被删除，请问是否确认？"),onOk:function(){return r.a(K(e),void 0,void 0,regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i(n).then(function(e){e&&"0"===e.data.ret?(t.$msg.success("标签类别 ".concat(l," 删除成功")),t.props.tag.getTypeList()):t.$msg.error("标签类别 ".concat(l," 删除失败，").concat(e.data.msg))}).catch(function(e){t.$msg.error("标签类别 ".concat(l," 删除失败，").concat(e))});case 1:case"end":return e.stop()}},e)}))},onCancel:function(){return r.a(K(e),void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}))}})}},t.typeName)}),u&&a.createElement("span",null,a.createElement($.a,{ref:e.saveInputRef,type:"text",size:"small",style:{width:78},value:l,onChange:e.handleInputChange,onBlur:e.handleInputBlur,onPressEnter:e.handleInputConfirm}),a.createElement("span",{className:"input-tip"},"按回车确认，输入2-4个字")),!u&&a.createElement(R.a,{onClick:e.showInput,style:{background:"#fff",borderStyle:"dashed"}},a.createElement(w.a,{type:"plus"})," 添加"))},e.saveInputRef=function(t){return e.input=t},e.showInput=function(){e.setState({inputVisible:!0},function(){return e.input.focus()})},e.handleInputChange=function(t){e.setState({inputValue:t.target.value.trim()})},e.handleInputBlur=function(){e.setState({inputVisible:!1,inputValue:""})},e.handleInputConfirm=function(t){var n=e.state.inputValue,a=e.props.tag.currentTypeList;if(t.target.value.length<2||t.target.value.length>4)return e.$msg.warn("输入字数2-4个字");n&&!a.some(function(e){return e.typeName===n})?W({title:"增加标签类别操作",content:"标签类别「".concat(n,"」将会被添加，请问是否确认？"),onOk:function(){return r.a(K(e),void 0,void 0,regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.props.tag.saveOrUpdateTagType({tagTypeId:0,typeName:n}).then(function(e){e&&"0"===e.data.ret?(t.$msg.success("标签类别 ".concat(n," 添加成功")),t.props.tag.getTypeList()):t.$msg.error("标签类别 ".concat(n," 添加失败，").concat(e.data.msg))}).catch(function(e){t.$msg.error("标签类别 ".concat(n," 添加失败，").concat(e))}),this.setState({inputVisible:!1,inputValue:""});case 2:case"end":return e.stop()}},e,this)}))},onCancel:function(){return r.a(K(e),void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({inputVisible:!1,inputValue:""});case 1:case"end":return e.stop()}},e,this)}))}}):n?e.$msg.warn("已存在该类别，请输入其他类别"):e.$msg.warn("不能添加空的标签类别")},e}var n,i,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&z(e,t)}(t,o["a"]),n=t,(i=[{key:"componentDidMount",value:function(){return r.a(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.init();case 1:case"end":return e.stop()}},e,this)}))}},{key:"render",value:function(){return a.createElement("div",{className:"editor"},a.createElement("section",{className:"editor-content panel-block"},this.renderEditor()))}}])&&A(n.prototype,i),c&&A(n,c),t}(),q=Z=r.b([B.a.create(),Object(m.b)("common","tag"),m.c],Z);function J(e){return(J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function G(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function X(e){return(X=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Q(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Y(e,t){return(Y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ee=u.a.confirm,te=[{title:"跑鞋评价 >",path:"/admin/shoe/racing/comment/comment-list"},{title:"跑鞋热词 >",path:"/admin/shoe/racing/term"}],ne=function(e){function t(){var e,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,o=X(t).apply(this,arguments),(e=!o||"object"!==J(o)&&"function"!=typeof o?Q(n):o).state={selectedRowKeys:[],filter:{},SearchInputValue:void 0,tagTypeValue:void 0,tagList:[],typeList:[]},e.resetPagination=function(t,n){return r.a(Q(e),void 0,void 0,regeneratorRuntime.mark(function e(){var a=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({filter:Object.assign({},this.state.filter,{pageSize:t,pageNum:n})},function(){return r.a(a,void 0,void 0,regeneratorRuntime.mark(function e(){var t,r,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.filter,this.props.tag.setPaginationCurrent(n),e.next=4,this.props.tag.getTagList(t);case 4:return r=e.sent,e.next=7,this.props.tag.getTypeList();case 7:a=e.sent,this.setState({tagList:r,typeList:a});case 9:case"end":return e.stop()}},e,this)}))});case 1:case"end":return e.stop()}},e,this)}))},e.getDataList=function(t){return r.a(Q(e),void 0,void 0,regeneratorRuntime.mark(function e(){var n=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({filter:Object.assign({},this.state.filter,{orderBy:t.columnKey,sort:"ascend"===t.order?"asc":"desc"})},function(){return r.a(n,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.tag.getTagList(this.state.filter);case 2:t=e.sent,this.setState({tagList:t});case 4:case"end":return e.stop()}},e,this)}))});case 1:case"end":return e.stop()}},e,this)}))},e.goToEditor=function(t){var n="/admin/shoe/racing/tag/editor?id=".concat(d()(t)?0:t.tagId);e.props.tag.setCurrentNewTag(t),e.props.history.push(n)},e.renderMenu=function(t){var n=a.createElement("span",{onClick:e.deleteRecord.bind(Q(e),t)},"删除");return a.createElement(p.a,null,a.createElement(p.a.Item,null,n))},e.doOperation=function(t){return r.a(Q(e),void 0,void 0,regeneratorRuntime.mark(function e(){var n=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:ee({title:"标签上架操作",content:a.createElement("span",null,"请问是否上架 ",a.createElement("strong",null,t.tagName)," 标签"),onOk:function(){return r.a(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}))},onCancel:function(){return r.a(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}))}});case 1:case"end":return e.stop()}},e)}))},e.cancelOperation=function(t){return r.a(Q(e),void 0,void 0,regeneratorRuntime.mark(function e(){var n=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:ee({title:"标签下架操作",content:a.createElement("span",null,"请问是否下架 ",a.createElement("strong",null,t.tagName)," 标签"),onOk:function(){return r.a(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}))},onCancel:function(){return r.a(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}))}});case 1:case"end":return e.stop()}},e)}))},e.deleteRecord=function(t){return r.a(Q(e),void 0,void 0,regeneratorRuntime.mark(function e(){var n=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:ee({title:"标签删除操作",content:a.createElement("span",null,"请问是否确定删除 ",a.createElement("strong",null,t.tagName)," 标签"),onOk:function(){return r.a(n,void 0,void 0,regeneratorRuntime.mark(function e(){var n=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.props.tag.deleteTag(t.tagId).then(function(e){return r.a(n,void 0,void 0,regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!e||"0"!==e.data.ret){n.next=8;break}return this.$msg.success("标签 ".concat(t.tagName," 删除成功")),n.next=4,this.props.tag.getTagList(this.state.filter);case 4:r=n.sent,this.setState({tagList:r}),n.next=9;break;case 8:this.$msg.error("标签 ".concat(t.tagName," 删除失败， ").concat(e.data.msg));case 9:case"end":return n.stop()}},n,this)}))}).catch(function(e){n.$msg.error("标签 ".concat(t.tagName," 删除失败， ").concat(e))});case 1:case"end":return e.stop()}},e,this)}))},onCancel:function(){return r.a(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}))}});case 1:case"end":return e.stop()}},e)}))},e.onTypeSelect=function(t,n){e.setState({tagTypeValue:t,filter:Object.assign({},e.state.filter,{tagTypeId:t||void 0})},function(){e.onSearch()})},e.setSearchInputValue=function(t){e.setState({SearchInputValue:t,filter:Object.assign({},e.state.filter,{tagName:t?t.trim():void 0})})},e.onTagSearch=N()(function(t){return r.a(Q(e),void 0,void 0,regeneratorRuntime.mark(function e(){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.tag.getTypeList();case 2:n=(n=e.sent).filter(function(e){return e.typeName.indexOf(t)>=0}),this.setState({typeList:n});case 5:case"end":return e.stop()}},e,this)}))},500),e.onTagSearchBlur=function(){return r.a(Q(e),void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.tag.getTypeList();case 2:t=e.sent,this.setState({typeList:t});case 4:case"end":return e.stop()}},e,this)}))},e.onSearch=function(){return r.a(Q(e),void 0,void 0,regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({filter:Object.assign({},this.state.filter,{pageNum:1})},function(){return r.a(t,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.tag.getTagList(this.state.filter);case 2:t=e.sent,this.props.tag.setPaginationCurrent(1),this.setState({tagList:t});case 5:case"end":return e.stop()}},e,this)}))});case 1:case"end":return e.stop()}},e,this)}))},e.onReset=function(){return r.a(Q(e),void 0,void 0,regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return delete(t=Object.assign({},this.state.filter,{pageNum:1})).tagTypeId,delete t.tagName,this.props.tag.setPaginationCurrent(1),e.next=6,this.props.tag.getTagList(t);case 6:n=e.sent,this.setState({tagList:n,filter:t,SearchInputValue:void 0,tagTypeValue:void 0});case 8:case"end":return e.stop()}},e,this)}))},e.onBatch=function(t){return r.a(Q(e),void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case 1:case"end":return e.stop()}},e)}))},e}var n,i,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Y(e,t)}(t,o["a"]),n=t,(i=[{key:"componentDidMount",value:function(){var e=this.props.tag.paginationConfig,t=e.defaultPageSize,n=e.defaultCurrent;this.resetPagination(t,n)}},{key:"componentDidUpdate",value:function(){return r.a(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("/admin/shoe/racing/tag"===this.props.location.pathname&&this.props.history.replace("/admin/shoe/racing/tag/list"),!this.props.tag.currentShouldUpdateTagList){e.next=11;break}return t=this.state.filter,this.props.tag.toggleShouldUpdateTagList(),e.next=6,this.props.tag.getTagList(t);case 6:return n=e.sent,e.next=9,this.props.tag.getTypeList();case 9:r=e.sent,this.setState({tagList:n,typeList:r});case 11:case"end":return e.stop()}},e,this)}))}},{key:"render",value:function(){var e=this,t=this.props.match;return a.createElement("div",null,a.createElement(h.a,Object.assign({},this.props,{links:te,title:"跑鞋标签"})),a.createElement(c.a,{path:"".concat(t.url,"/list"),render:function(t){return a.createElement(g.a,Object.assign({},t,{config:k(e)}))}}),a.createElement(c.a,{path:"".concat(t.url,"/editor"),render:function(e){return a.createElement(q,Object.assign({},e))}}))}}])&&G(n.prototype,i),s&&G(n,s),t}();ne=r.b([Object(i.a)("/admin/shoe/racing/tag",{exact:!1}),Object(m.b)("common","tag"),m.c],ne);t.default=ne}}]);