(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{1064:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(1),a=n(1046),o=n.n(a),i=(n(1045),n(34));n(1065);function c(e){var t=i.a.getPageBreadcrumb(e.location.pathname),n=e.title,a=e.links,c=e.tabs,s=e.currentTab;return r.createElement("div",{className:"common-header"},r.createElement("section",{className:"common-header-breadcrumb"},t&&r.createElement(o.a,null,t.map((function(e,t){return r.createElement(o.a.Item,{key:t},e.title)})))),r.createElement("section",{className:"common-header-title"},r.createElement("h2",null,n),r.createElement("div",{className:"common-header-links"},a&&a.map((function(t,n){return r.createElement("a",{key:n,onClick:function(){e.history.push(t.path)}},t.title)})))),r.createElement("section",{className:"common-header-tabs"},c&&c.map((function(t,n){return r.createElement("a",{onClick:function(){e.onTabClick(t.id)},className:"".concat(s===t.id?"tab-active":""," ")},r.createElement("span",null,t.title),t.tipComponent&&t.tipComponent())}))))}},1065:function(e,t,n){},1066:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(1),a=n(94);function o(e,t){return function(n){return function(){return r.createElement(a.b,Object.assign({path:e},Object.assign({exact:!0},t),{render:function(e){return r.createElement(n,Object.assign({},e))}}))}}}},1067:function(e,t,n){"use strict";n.d(t,"a",(function(){return V}));var r=n(1),a=(n(1068),n(97)),o=n.n(a),i=(n(133),n(289)),c=n.n(i),s=(n(433),n(134)),l=n.n(s),u=(n(204),n(1044)),p=n.n(u),m=(n(1043),n(1048)),d=n.n(m),f=(n(1047),n(205)),h=n.n(f),g=(n(435),n(17)),y=n.n(g),b=(n(203),n(438)),v=n.n(b),_=(n(437),n(439)),E=n.n(_),w=(n(436),n(441)),O=n.n(w),x=(n(440),n(34)),C=n(21),k=n.n(C);function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function N(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function P(e,t){return!t||"object"!==j(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function R(e){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function I(e,t){return(I=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var B=c.a.Option,T=l.a.Group,M=d.a.RangePicker,$=O.a.CheckableTag,F={SelectInput:function(e){var t=e.selectValue,n=e.inputValue,a=e.placeholder,o=e.options,i=e.onSelectChange,s=e.onInputChange,u=e.onPressEnter,p=e.selectStyle;return r.createElement(T,{compact:!0},r.createElement(c.a,{style:p?Object.assign({width:110},p):{width:110},value:t,onChange:i},o&&o.map((function(e,t){return r.createElement(B,{key:t,value:e.value},e.title)}))),r.createElement(l.a,{style:{width:238},value:n,onChange:s,placeholder:a,onPressEnter:u}))},Select:function(e){var t=e.option,n=e.label,a=e.mode,o=e.onSearch,i=e.onSelect,s=e.onBlur,l=e.onFocus,u=e.value,p=e.placeholder,m=e.showSearch,d=e.width,f=e.filterOption,h=e.onChange,g=e.allowClear,y=e.onPopupScroll;return r.createElement(r.Fragment,null,n&&r.createElement("span",{className:"common-list-label"},"".concat(n,"：")),r.createElement("span",{className:"common-list-control"},r.createElement(c.a,{allowClear:g,value:u,mode:a||!1,style:{minWidth:d||258,width:d},showSearch:m,placeholder:p,filterOption:f,onSearch:o,onSelect:i,onChange:h,onBlur:s,onPopupScroll:y,onFocus:l},t.data.map((function(e){return r.createElement(B,{key:e[t.key]||e.id,value:e[t.value]||e.id,$data:e},e[t.title])})))))},DatePicker:function(e){var t=e.label,n=e.placeholder,a=e.onChange,o=e.value,i=e.style,c=e.format,s=e.showTime;return r.createElement(r.Fragment,null,t&&r.createElement("span",{className:"common-list-label"},"".concat(t,"：")),r.createElement("span",{className:"common-list-control"},r.createElement(d.a,{format:c||!1,style:i,showTime:s,placeholder:n,value:o,onChange:a})))},RangePicker:function(e){var t=e.label,n=e.alias,a=e.placeholder,i=e.onChange,c=e.value,s=e.showTime,l=e.format;return r.createElement(r.Fragment,null,t&&r.createElement("span",{className:"common-list-label"},"".concat(t,"：")),r.createElement("span",{className:"common-list-control"},r.createElement(M,{style:{width:400},showTime:s,format:l,placeholder:a,value:c,onChange:i}),r.createElement("span",{className:"common-list-control-date-alias"},!x.a.isEmpty(n)&&n.map((function(e,t){return r.createElement(o.a,{key:t,onClick:function(){return i([k()(Date.now()-864e5*e).startOf("day"),k()()])}},e," 天内")})))))},Input:function(e){var t=e.label,n=e.value,a=e.placeholder,o=e.onChange,i=e.width,c=e.onPressEnter;return r.createElement(r.Fragment,null,t&&r.createElement("span",{className:"common-list-label"},"".concat(t,"：")),r.createElement("span",{className:"common-list-control"},r.createElement(l.a,{style:{minWidth:i||258},value:n,onChange:o,placeholder:a,onPressEnter:c})))},Checkbox:function(e){var t=e.label,n=e.value,a=e.onChange;return r.createElement(h.a,{checked:n,onChange:a},t)},CheckableTag:function(e){var t=e.label,n=e.option,a=e.value,o=e.onChange;return r.createElement(r.Fragment,null,t&&r.createElement("span",{className:"common-list-label"},"".concat(t,"：")),r.createElement("span",{className:"common-list-control"},!x.a.isEmpty(n)&&n.map((function(e){return r.createElement($,{key:e.value,checked:e.value===a,onChange:function(){o(e)}},e.title)}))))},Label:function(e,t){var n=e.label;return r.createElement(r.Fragment,null,n&&r.createElement("span",{className:"common-list-label"},"".concat(n,"：")),r.createElement("span",{className:"common-list-control"},t))},Custom:function(e){return r.createElement("div",null,(void 0).props.children)}},V=function(e){function t(){var e;return S(this,t),(e=P(this,R(t).apply(this,arguments))).state={collapse:!0},e.toggleCollapse=function(t){e.setState({collapse:!e.state.collapse})},e.renderSearcher=function(){var t=e.props.config,n=t.searcher,a=t.table,i=e.state.collapse,c=a&&a.tableHeader;return n&&r.createElement("section",{className:"common-list-search"},e.renderWidgets(n.widgets),c&&r.createElement(c,null),r.createElement("div",{className:"common-list-search-right"},!n.hideSearcher&&r.createElement(r.Fragment,null,r.createElement(o.a,{type:"primary",onClick:n.onSearch},"查询"),r.createElement(o.a,{onClick:n.onReset},"重置")),n.collapseControl&&n.collapseControl.showMoreBtn&&r.createElement("span",{className:"common-list-serach-more"},r.createElement("a",{onClick:e.toggleCollapse},i?"更多":"收起"," ",r.createElement(y.a,{type:i?"down":"up"})))))},e.renderWidgets=function(t){var n=e.state.collapse,a=e.props.config.searcher;return t&&r.createElement("div",{className:"common-list-search-left"},t.map((function(t,o){return Array.isArray(t)?r.createElement("div",{key:o,className:"common-list-search-row",style:{display:a.collapseControl&&a.collapseControl.showMoreBtn&&n&&o>0?"none":"flex"}},t.map((function(t){return r.createElement("div",{key:t.label,className:"common-list-search-col",style:Object.assign({},t.style)},F[t.type]&&F[t.type](t,t.children?e.renderWidgets(t.children):null))}))):r.createElement("div",{key:t.label,className:"common-list-search-row ".concat(t.className)},F[t.type]&&F[t.type](t,t.children?e.renderWidgets(t.children):null))})))},e.renderAddBtn=function(){var t=e.props.config,n=t.addBtn,a=t.searcher,o=n&&n.title;return n&&r.createElement("section",{className:"common-list-addbtn",style:n.style},"function"==typeof n.title?r.createElement(o,null):n.title,r.createElement("div",{className:"common-list-search-batch"},a.batchControl.showBatchControl&&r.createElement(c.a,{placeholder:a.batchControl.placeholder,style:{minWidth:120},defaultValue:void 0,onChange:a.batchControl.onBatch},a.batchControl.options.map((function(e){return r.createElement(B,{key:e.value,value:e.value},e.title)})))))},e.renderTableHeader=function(){var t=e.props.config.tableHeader,n=t;return r.createElement("section",{className:"common-list-table-header"},t&&r.createElement(n,null))},e.renderTable=function(){var t=e.props.config.table,n=t.rowKey,a=t.rowSelection,o=t.columns,i=t.dataSource,c=t.pagination,s=t.onChange,l=t.loading,u=t.locale;return r.createElement("section",{className:"common-list-table"},r.createElement(p.a,{locale:u,rowKey:n||"id",rowSelection:a,columns:o,dataSource:i,loading:l,pagination:c,onChange:s}))},e.renderCards=function(){var t=e.props.config.cards,n=t.dataSource,a=t.loading,o=t.pagination,i=t.renderCard,c=t.addBtn;return r.createElement("div",{className:"common-list-cards-wrapper"},r.createElement("ul",{className:"common-list-cards"},a?r.createElement("div",{className:"common-list-cards-loading"},r.createElement(E.a,null)):r.createElement(r.Fragment,null,r.createElement("li",{className:"common-list-card add-btn"},r.createElement("div",{className:"common-list-card-item",onClick:c.onAddBtnClick},c.icon?r.createElement("img",{src:c.icon,alt:""}):r.createElement(y.a,{type:"plus-circle"}),r.createElement("p",null,c.title))),n.map((function(e){return r.createElement("li",{className:"common-list-card"},r.createElement("div",{className:"common-list-card-item"},i(e)))})))),r.createElement("section",{className:"common-list-cards-pagination"},r.createElement(v.a,Object.assign({},o))))},e}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&I(e,t)}(t,e),n=t,(a=[{key:"render",value:function(){var e=this.props.config;return r.createElement("div",{className:"common-list"},this.renderSearcher(),this.renderAddBtn(),this.renderTableHeader(),e.table&&this.renderTable(),e.cards&&this.renderCards())}}])&&N(n.prototype,a),i&&N(n,i),t}(r.Component)},1068:function(e,t,n){},1069:function(e,t,n){"use strict";var r=function(e){var t=e;return 15===e.length&&(t=function(e){if(/^\d{15}$/.test(e)){e=e.substr(0,6)+"19"+e.substr(6,e.length-6);for(var t=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2],n=0,r=0;r<e.length;r++)n+=parseInt(e.substr(r,1))*t[r];return e+["1","0","X","9","8","7","6","5","4","3","2"][n%11]}return e}(e)),function(e){if(!/^\d{17}(\d|x)$/i.test(e))return!1;return null!=={11:"北京",12:"天津",13:"河北",14:"山西",15:"内蒙",21:"辽宁",22:"吉林",23:"黑龙",31:"上海",32:"江苏",33:"浙江",34:"安徽",35:"福建",36:"江西",37:"山东",41:"河南",42:"湖北",43:"湖南",44:"广东",45:"广西",46:"海南",50:"重庆",51:"四川",52:"贵州",53:"云南",54:"西藏",61:"陕西",62:"甘肃",63:"青海",64:"宁夏",65:"新疆",71:"台湾",81:"香港",82:"澳门",83:"台湾",91:"国外"}[parseInt(e.substr(0,2))]}(t)},a=function(e){return/^[HMhm]{1}([0-9]{8})$/.test(e)},o=function(e){return/^[0-9]{8}$/.test(e)||/^[0-9]{10}$/.test(e)},i=function(e){return/^[a-zA-Z]{5, 17}$/.test(e)||/^[a-zA-Z0-9]$/.test(e)},c=n(34);function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.d(t,"a",(function(){return u}));var l={isNonEmpty:function(e,t,n){if(0!==e&&c.a.isEmpty(e))return n&&n(),t},maxLength:function(e,t,n,r){if(e.length>t)return r&&r(),n},minLength:function(e,t,n,r){if(e.length<t)return r&&r(),n},isEmail:function(e,t,n){if(!/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(e))return n&&n(),t},isMobile:function(e,t,n){if(!/^(13[0-9]|14[57]|15[012356789]|16[0-9]|18[0-9]|17[0-9]|19[0-9])\d{8}$/.test(e))return n&&n(),t},isID:function(e,t,n,c){var s=null;if("id"===t?s=r:"HKMC"===t?s=a:"TW"===t?s=o:"PSPort"===t&&(s=i),!s(e))return c&&c(),n},isNumber:function(e,t,n){if(e&&Number.isNaN(Number(e)))return n&&n(),t},isHexColor:function(e,t,n){var r=e.toString();if(!r||!function(e){if("#"!==e[0])return!1;var t=e.slice(1);return 6===t.length&&/^[0-9a-fA-f]{6}$/.test(t)}(r))return n&&n(),t},isUrl:function(e,t,n){var r=e.toString();if(!r||!/^https?:\/\/(([a-zA-Z0-9_-])+(\.)?)*(:\d+)?(\/((\.)?(\?)?=?&?[a-zA-Z0-9_-](\?)?)*)*$/i.test(r))return n&&n(),t},customReg:function(e,t,n,r){var a=e.toString();if(!a||!new RegExp(t).test(a))return r&&r(),n}},u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.cache=[]}var t,n,r;return t=e,(n=[{key:"add",value:function(e,t){var n=this,r=!0,a=!1,o=void 0;try{for(var i,c=function(){var t=i.value,r=t.strategy.split(":");n.cache.push((function(){var n=r.shift();return r.unshift(e),r.push(t.errMsg),r.push(t.cb),l[n].apply(null,r)}))},s=t[Symbol.iterator]();!(r=(i=s.next()).done);r=!0)c()}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}}},{key:"start",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,a=this.cache[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){var o=(0,r.value)();if(o)return o}}catch(e){t=!0,n=e}finally{try{e||null==a.return||a.return()}finally{if(t)throw n}}}}])&&s(t.prototype,n),r&&s(t,r),e}()},1080:function(e,t,n){},1081:function(e,t,n){},1085:function(e,t,n){"use strict";n.r(t);var r=n(8),a=n(1064),o=n(1067),i=n(1),c=n(97),s=n.n(c),l=(n(133),n(17)),u=n.n(l),p=(n(203),n(1050)),m=n.n(p),d=(n(1049),n(34)),f=n(80),h=n(21),g=n.n(h);function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var b=function(e){e.state.selectedRowKeys;var t=[{width:200,title:"品种 ID",dataIndex:"id"},{width:200,title:"品种名称",dataIndex:"name",render:function(e,t){return e||"--"}},{title:"品种类型",dataIndex:"type",render:function(e,t){return e||"--"}},{title:"行情产品",dataIndex:"product",render:function(e,t){return e.market||"--"}},{title:"小数位",dataIndex:"decimals_place",render:function(e,t){return e||"--"}},{title:"合约大小",dataIndex:"contract_size",render:function(e,t){return e||"--"}},{title:"点差",dataIndex:"spread",render:function(e,t){return e||"--"}},{title:"止盈止损位",dataIndex:"limit_stop_level",render:function(e,t){return e||"--"}},{title:"预付款货币",dataIndex:"margin_currency",render:function(e,t){return e||"--"}},{title:"获利货币",dataIndex:"profit_currency",render:function(e,t){return e||"--"}},{title:"最大交易量",dataIndex:"max_trading_volume",render:function(e,t){return e||"--"}},{title:"最小交易量",dataIndex:"min_trading_volume",render:function(e,t){return e||"--"}},{title:"交易量步长",dataIndex:"volumne_step",render:function(e,t){return e||"--"}},{title:"价格变动最小单位",dataIndex:"min_unit_of_price_change",render:function(e,t){return e||"--"}},{title:"成交模式",dataIndex:"transaction_mode",render:function(e,t){return e||"--"}},{title:"买入库存费",dataIndex:"purchase_fee",render:function(e,t){return e||"--"}},{title:"卖出库存费",dataIndex:"selling_fee",render:function(e,t){return e||"--"}},{title:"三日库存费",dataIndex:"three_days_swap",render:function(e,t){return e||"--"}},{title:"交易时间段",dataIndex:"trading_times",render:function(e,t){return e&&f.c.map((function(t){return"\n              ".concat(t,": ").concat(e[t].trades.map((function(e){return g()(e).format("HH:mm")})).join("-"),"\n            ")}))||"--"}},{title:"描述",dataIndex:"description",render:function(e,t){return e||"--"}},{title:"背景颜色",dataIndex:"background",render:function(e,t){return e||"--"}},{title:"挂单模式",dataIndex:"orders_mode",render:function(e,t){return e||"--"}},{title:"盈亏计算（多）",dataIndex:"profit_calculate_for_bought",render:function(e,t){return e||"--"}},{title:"盈亏计算（空）",dataIndex:"profit_calculate_for_sale",render:function(e,t){return e||"--"}},{title:"交易手续费（多）",dataIndex:"hands_fee_for_bought",render:function(e,t){return e||"--"}},{title:"交易手续费（空）",dataIndex:"hands_fee_for_sale",render:function(e,t){return e||"--"}},{title:"税金计算",dataIndex:"calculate_for_tax",render:function(e,t){return e||"--"}},{title:"库存费计算",dataIndex:"calculate_for_fee",render:function(e,t){return e||"--"}},{title:"保证金计算",dataIndex:"calculate_for_cash_deposit",render:function(e,t){return e||"--"}},{fixed:"right",title:"操作",render:function(t,n){return i.createElement("div",{className:"common-list-table-operation"},i.createElement("span",{onClick:function(){e.goToEditor(n)}},"编辑"),i.createElement("span",{className:"common-list-table-operation-spliter"}),i.createElement(m.a,{title:"请问是否确定删除当前规则",onConfirm:function(){return Object(r.a)(void 0,void 0,void 0,regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$api.exchange.deleteProduct(n.id);case 2:204===(r=t.sent).status?(e.$msg.success("当期记录删除成功"),e.getDataList(e.state.filter)):e.$msg.error(r.data.message);case 4:case"end":return t.stop()}}),t)})))},onCancel:function(){}},i.createElement("span",null,"删除")))}}],n=Object.assign(Object.assign({},e.props.common.paginationConfig),{total:e.props.exchange.productListMeta.total,current:e.state.currentPage,onChange:function(e,t){},onShowSizeChange:function(t,n){e.resetPagination(n,t)}});return{addBtn:{title:function(){return i.createElement(s.a,{type:"primary",onClick:function(){e.goToEditor({})}},i.createElement(u.a,{type:"plus"}),"添加")}},searcher:{batchControl:{placeholder:"请选择",showBatchControl:!d.a.isEmpty(e.state.selectedRowKeys),options:[{title:"删除",value:"delete"}],onBatch:function(t){e.onBatch(t)}},widgets:[[{type:"Input",label:"品种名称",placeholder:"请输入品种名称",value:e.state.name||void 0,onChange:function(t){e.onInputChanged("name",t.target.value)},onPressEnter:function(t){e.onSearch()}},{type:"Select",label:"品种类型",showSearch:!1,placeholder:"请选择品种类型",allowClear:!1,width:150,value:e.state.type,option:{key:"id",value:"id",title:"name",data:e.state.typeOptions||[]},onSelect:function(t,n){e.onTypeSelected(t,n)}}],{type:"Input",label:"产品编码",placeholder:"请输入产品编码",value:e.state.product_code||void 0,onChange:function(t){e.onInputChanged("product_code",t.target.value)},onPressEnter:function(t){e.onSearch()}}],onSearch:function(){e.onSearch()},onReset:function(){e.onReset()}},table:{rowKey:"id",columns:t,dataSource:e.props.exchange.productList,pagination:n,scroll:{x:2300},onChange:function(t,n,r){var a={pageNum:t.current,pageSize:t.pageSize};if(!d.a.isEmpty(n))for(var o=0,i=Object.entries(n);o<i.length;o++){var c=y(i[o],2),s=c[0],l=c[1];a[s]=l?l[0]:void 0}d.a.isEmpty(r)?(delete a.orderBy,delete a.sort):(a.orderBy="".concat(r.field),a.sort="".concat("descend"===r.order?"desc":"asc")),e.props.exchange.setFilterProduct(a),e.setState({currentPage:t.current},(function(){e.getDataList(e.props.exchange.filterProduct)}))}}}},v=n(1066),_=n(84),E=n(86),w=n.n(E),O=(n(434),n(134)),x=n.n(O),C=(n(204),n(289)),k=n.n(C),j=(n(433),n(1052)),S=n.n(j),N=(n(1051),n(442),n(1059)),P=n.n(N),R=(n(1058),n(1048)),I=n.n(R),B=(n(1047),n(445)),T=n.n(B),M=(n(444),n(1080),n(1069)),$=n(85),F=n(1053),V=n.n(F);function z(e){return(z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function L(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function A(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function D(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function q(e,t){return!t||"object"!==z(t)&&"function"!=typeof t?W(e):t}function H(e){return(H=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function W(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function K(e,t){return(K=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Z=w.a.Item,G=k.a.Option,J=S.a.confirm,U=x.a.TextArea,X=(I.a.RangePicker,function(e,t,n){return{labelCol:{span:e,offset:n},wrapperCol:{span:t}}}),Q=function(e){function t(){var e;return A(this,t),(e=q(this,H(t).apply(this,arguments))).state={mode:"add",typeOptions:[],marketOptions:[],transactionModeOptions:[],bgColorOptions:[],profitOptions:[],marginCurrencyOptions:[],orderModeOptions:[],deposit_rule_options:[],profit_bounght_rule_options:[],profit_sale_rule_options:[],fee_rule_options:[],tax_rule_options:[]},e.init=function(){return Object(r.a)(W(e),void 0,void 0,regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.$qs.parse(this.props.location.search),this.setState({mode:0==t.id?"add":"edit"},(function(){return Object(r.a)(n,void 0,void 0,regeneratorRuntime.mark((function e(){var n,r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=d.a.getLStorage("currentExchangeProduct"))){e.next=5;break}J({title:"行情产品恢复操作",content:"检测到您存在未提交的行情产品记录，请问是否从上次编辑中恢复状态？",onOk:function(){r.props.exchange.setCurrentProduct(n)},onCancel:function(){r.init(),d.a.rmLStorage("currentExchangeProduct")}}),e.next=11;break;case 5:if("edit"!==this.state.mode){e.next=10;break}return e.next=8,this.$store.exchange.getCurrentProduct(t.id);case 8:e.next=11;break;case 10:this.props.exchange.setCurrentProduct({},!0,!1);case 11:case"end":return e.stop()}}),e,this)})))}));case 2:case"end":return e.stop()}}),e,this)})))},e.getDifferentScopeOptions=function(){["deposit_rule","profit_bounght_rule","profit_sale_rule","fee_rule","tax_rule",""].forEach((function(t){e.getScopeOptions(t)}))},e.getScopeOptions=function(t){return Object(r.a)(W(e),void 0,void 0,regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$api.exchange.getScopeOptions({params:{rule:t}});case 2:n=e.sent,this.setState(L({},"".concat(t,"_options"),n.data.data));case 4:case"end":return e.stop()}}),e,this)})))},e.getGenreOptions=function(){return Object(r.a)(W(e),void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$api.exchange.getGenreList({offset:0,limit:200});case 2:t=e.sent,this.setState({typeOptions:t.data.results});case 4:case"end":return e.stop()}}),e,this)})))},e.getMarketOptions=function(){return Object(r.a)(W(e),void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$api.market.getProductList({offset:0,limit:200});case 2:t=e.sent,this.setState({marketOptions:t.data.results,marketMeta:{total:t.count}});case 4:case"end":return e.stop()}}),e,this)})))},e.getTransactionModeOptions=function(){return Object(r.a)(W(e),void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$api.exchange.getTransactionModeOptions({page:1,page_size:200});case 2:200==(t=e.sent).status&&this.setState({transactionModeOptions:t.data.data||[]});case 4:case"end":return e.stop()}}),e,this)})))},e.getBgColorOptions=function(){return Object(r.a)(W(e),void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$api.exchange.getBgColorOptions({page:1,page_size:200});case 2:200==(t=e.sent).status&&this.setState({bgColorOptions:t.data.data||[]});case 4:case"end":return e.stop()}}),e,this)})))},e.getProfitOptioins=function(){return Object(r.a)(W(e),void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$api.exchange.getProfitOptioins({page:1,page_size:200});case 2:200==(t=e.sent).status&&this.setState({profitOptions:t.data.data||[]});case 4:case"end":return e.stop()}}),e,this)})))},e.getMarginCurrencyOptions=function(){return Object(r.a)(W(e),void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$api.exchange.getMarginCurrencyOptions({page:1,page_size:200});case 2:200==(t=e.sent).status&&this.setState({marginCurrencyOptions:t.data.data||[]});case 4:case"end":return e.stop()}}),e,this)})))},e.getOrderModeOptions=function(){return Object(r.a)(W(e),void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$api.exchange.getOrderModeOptions({page:1,page_size:200});case 2:200==(t=e.sent).status&&this.setState({orderModeOptions:t.data.data||[]});case 4:case"end":return e.stop()}}),e,this)})))},e.renderEditor=function(){var t=e.props.form.getFieldDecorator,n=e.props.exchange,a=n.setCurrentProduct,o=n.currentShowProduct,c=n.currentProduct,l=e.state,u=l.typeOptions,p=l.marketOptions,m=l.transactionModeOptions,h=l.bgColorOptions,g=l.profitOptions,y=l.marginCurrencyOptions,b=l.orderModeOptions,v=l.deposit_rule_options,_=l.profit_bounght_rule_options,E=l.profit_sale_rule_options,O=l.fee_rule_options,C=l.tax_rule_options;return i.createElement(w.a,{className:"editor-form"},i.createElement(Z,null,i.createElement("h2",{className:"editor-form-title form-title"},"基本配置")),i.createElement(Z,Object.assign({label:"产品名称"},X(3,12),{required:!0}),t("name",{initialValue:o&&o.name})(i.createElement(x.a,{placeholder:"请输入产品名称",onChange:function(e){a({name:e.target.value},!1)},style:{display:"inline-block",width:200}}))),i.createElement(Z,Object.assign({label:"行情产品",className:"push-type-select"},X(3,6),{required:!0}),t("product",{initialValue:o&&o.product})(i.createElement(k.a,{getPopupContainer:function(){return document.getElementsByClassName("push-type-select")[0]},placeholder:"请选择行情产品",onChange:function(e,t){a({product:e},!1)},onFocus:function(){return Object(r.a)(W(e),void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))}},p.map((function(e){return i.createElement(G,{key:e.id.toString()},e.name)}))))),i.createElement(Z,Object.assign({label:"小位数"},X(3,12)),t("decimals_place",{initialValue:o&&o.decimals_place})(i.createElement(P.a,{min:0,type:"number",placeholder:"请输入小位数",onChange:function(e){a({decimals_place:e},!1)},style:{display:"inline-block",width:200}}))),i.createElement(Z,Object.assign({label:"描述"},X(3,8)),t("description",{initialValue:o&&o.description,rules:[]})(i.createElement(U,{placeholder:"请输入产品描述",rows:6,onChange:function(e){a({description:e.target.value},!1)}}))),i.createElement(Z,Object.assign({label:"交易品种类型",className:"push-type-select"},X(3,6),{required:!0}),t("type",{initialValue:o&&o.type})(i.createElement(k.a,{getPopupContainer:function(){return document.getElementsByClassName("push-type-select")[0]},placeholder:"请选择交易品种类型",onChange:function(e,t){a({type:e},!1)},onFocus:function(){return Object(r.a)(W(e),void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))}},u.map((function(e){return i.createElement(G,{key:e.id.toString()},e.name)}))))),i.createElement(Z,Object.assign({label:"成交模式",className:"push-type-select"},X(3,6),{required:!0}),t("transaction_mode",{initialValue:o&&o.transaction_mode})(i.createElement(k.a,{getPopupContainer:function(){return document.getElementsByClassName("push-type-select")[0]},placeholder:"请选择成交模式",onChange:function(e,t){a({transaction_mode:e},!1)},onFocus:function(){return Object(r.a)(W(e),void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))}},m.map((function(e){return i.createElement(G,{key:e.field},e.translation)}))))),i.createElement(Z,Object.assign({label:"背景颜色",className:"push-type-select"},X(3,6),{required:!0}),t("background",{initialValue:o&&o.background})(i.createElement(k.a,{getPopupContainer:function(){return document.getElementsByClassName("push-type-select")[0]},placeholder:"请选择背景颜色",onChange:function(e,t){a({background:e},!1)},onFocus:function(){return Object(r.a)(W(e),void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))}},h.map((function(e){return i.createElement(G,{key:e.field},e.translation)}))))),i.createElement(Z,Object.assign({label:"获利货币",className:"push-type-select"},X(3,6),{required:!0}),t("profit_currency",{initialValue:o&&o.profit_currency})(i.createElement(k.a,{getPopupContainer:function(){return document.getElementsByClassName("push-type-select")[0]},placeholder:"请选择获利货币",onChange:function(e,t){a({profit_currency:e},!1)},onFocus:function(){return Object(r.a)(W(e),void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))}},g.map((function(e){return i.createElement(G,{key:e.field},e.translation)}))))),i.createElement(Z,Object.assign({label:"预付款货币",className:"push-type-select"},X(3,6),{required:!0}),t("margin_currency",{initialValue:o&&o.margin_currency})(i.createElement(k.a,{getPopupContainer:function(){return document.getElementsByClassName("push-type-select")[0]},placeholder:"请选择预付款货币",onChange:function(e,t){a({margin_currency:e},!1)},onFocus:function(){return Object(r.a)(W(e),void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))}},y.map((function(e){return i.createElement(G,{key:e.field},e.translation)}))))),i.createElement(Z,Object.assign({label:"最大交易量"},X(3,12)),t("max_trading_volume",{initialValue:o&&o.max_trading_volume})(i.createElement(P.a,{min:0,type:"number",placeholder:"请输入最大交易量",onChange:function(e){a({max_trading_volume:e},!1)},style:{display:"inline-block",width:200}}))),i.createElement(Z,Object.assign({label:"最小交易量"},X(3,12)),t("min_trading_volume",{initialValue:o&&o.min_trading_volume})(i.createElement(P.a,{min:0,type:"number",placeholder:"请输入最小交易量",onChange:function(e){a({min_trading_volume:e},!1)},style:{display:"inline-block",width:200}}))),i.createElement(Z,Object.assign({label:"挂单模式\n          ",className:"push-type-select"},X(3,6),{required:!0}),t("orders_mode",{initialValue:o&&o.orders_mode})(i.createElement(k.a,{getPopupContainer:function(){return document.getElementsByClassName("push-type-select")[0]},placeholder:"请选择挂单模式",onChange:function(e,t){a({orders_mode:e},!1)},onFocus:function(){return Object(r.a)(W(e),void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))}},b.map((function(e){return i.createElement(G,{key:e.field},e.translation)}))))),i.createElement(Z,Object.assign({label:"点差"},X(3,12)),t("spread",{initialValue:o&&o.spread})(i.createElement(P.a,{min:0,type:"number",placeholder:"请输入点差",onChange:function(e){a({spread:e},!1)},style:{display:"inline-block",width:200}}))),i.createElement(Z,Object.assign({label:"止盈止损位"},X(3,12)),t("limit_stop_level",{initialValue:o&&o.limit_stop_level})(i.createElement(P.a,{min:0,type:"number",placeholder:"请输入点差",onChange:function(e){a({limit_stop_level:e},!1)},style:{display:"inline-block",width:200}}))),i.createElement(Z,Object.assign({label:"交易量步长"},X(3,12)),t("volume_step",{initialValue:o&&o.volume_step})(i.createElement(P.a,{min:0,type:"number",placeholder:"请输入交易量步长",onChange:function(e){a({volume_step:e},!1)},style:{display:"inline-block",width:200}}))),i.createElement(Z,Object.assign({label:"价格变动最小单位\n"},X(3,12)),t("min_unit_of_price_change",{initialValue:o&&o.min_unit_of_price_change})(i.createElement(P.a,{min:0,type:"number",placeholder:"请输入价格变动最小单位\n          ",onChange:function(e){a({min_unit_of_price_change:e},!1)},style:{display:"inline-block",width:200}}))),i.createElement(Z,null,i.createElement("h2",{className:"editor-form-title form-title"},"保证金计算")),i.createElement(Z,Object.assign({label:"合约大小"},X(3,12)),t("contract_size",{initialValue:o&&o.contract_size})(i.createElement(P.a,{min:0,type:"number",placeholder:"请输入合约大小",onChange:function(e){a({contract_size:e},!1)},style:{display:"inline-block",width:200}}))),i.createElement(Z,Object.assign({label:"保证金计算",className:"push-type-select"},X(3,6),{required:!0}),t("calculate_for_cash_deposit",{initialValue:o&&o.calculate_for_cash_deposit})(i.createElement(k.a,{getPopupContainer:function(){return document.getElementsByClassName("push-type-select")[0]},placeholder:"请选择保证金计算",onChange:function(e,t){a({calculate_for_cash_deposit:e},!1)},onFocus:function(){return Object(r.a)(W(e),void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))}},v.map((function(e){return i.createElement(G,{key:e.field},e.translation)}))))),i.createElement(Z,Object.assign({label:"盈亏计算（多）",className:"push-type-select"},X(3,6),{required:!0}),t("profit_calculate_for_bought",{initialValue:o&&o.profit_calculate_for_bought})(i.createElement(k.a,{getPopupContainer:function(){return document.getElementsByClassName("push-type-select")[0]},placeholder:"请选择盈亏计算（多）",onChange:function(e,t){a({profit_calculate_for_bought:e},!1)},onFocus:function(){return Object(r.a)(W(e),void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))}},_.map((function(e){return i.createElement(G,{key:e.field},e.translation)}))))),i.createElement(Z,Object.assign({label:"盈亏计算（空）",className:"push-type-select"},X(3,6),{required:!0}),t("profit_calculate_for_sale",{initialValue:o&&o.profit_calculate_for_sale})(i.createElement(k.a,{getPopupContainer:function(){return document.getElementsByClassName("push-type-select")[0]},placeholder:"请选择盈亏计算（空）",onChange:function(e,t){a({profit_calculate_for_sale:e},!1)},onFocus:function(){return Object(r.a)(W(e),void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))}},E.map((function(e){return i.createElement(G,{key:e.field},e.translation)}))))),i.createElement(Z,null,i.createElement("h2",{className:"editor-form-title form-title"},"利润设定")),i.createElement(Z,Object.assign({label:"买入库存费（%）"},X(3,12)),t("purchase_fee",{initialValue:o&&o.purchase_fee})(i.createElement(P.a,{min:0,type:"number",placeholder:"请输入买入库存费\n          ",onChange:function(e){a({purchase_fee:e},!1)},style:{display:"inline-block",width:200}}))),i.createElement(Z,Object.assign({label:"卖出库存费（%）"},X(3,12)),t("selling_fee",{initialValue:o&&o.selling_fee})(i.createElement(P.a,{min:0,type:"number",placeholder:"请输入卖出库存费",onChange:function(e){a({selling_fee:e},!1)},style:{display:"inline-block",width:200}}))),i.createElement(Z,Object.assign({label:"库存费计算",className:"push-type-select"},X(3,6),{required:!0}),t("calculate_for_fee",{initialValue:o&&o.calculate_for_fee})(i.createElement(k.a,{getPopupContainer:function(){return document.getElementsByClassName("push-type-select")[0]},placeholder:"请选择税金计算",onChange:function(e,t){a({calculate_for_fee:e},!1)},onFocus:function(){return Object(r.a)(W(e),void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))}},O.map((function(e){return i.createElement(G,{key:e.field},e.translation)}))))),i.createElement(Z,Object.assign({label:"三日库存费"},X(3,12)),t("three_days_swap",{initialValue:o&&o.three_days_swap})(i.createElement(P.a,{min:0,type:"number",placeholder:"请输入三日库存费",onChange:function(e){a({three_days_swap:e},!1)},style:{display:"inline-block",width:200}}))),i.createElement(Z,Object.assign({label:"交易手续费（多）"},X(3,12)),t("hands_fee_for_bought",{initialValue:o&&o.hands_fee_for_bought})(i.createElement(P.a,{min:0,type:"number",placeholder:"交易手续费（多）",onChange:function(e){a({hands_fee_for_bought:e},!1)},style:{display:"inline-block",width:200}}))),i.createElement(Z,Object.assign({label:"交易手续费（空）"},X(3,12)),t("hands_fee_for_sale",{initialValue:o&&o.hands_fee_for_sale})(i.createElement(P.a,{min:0,type:"number",placeholder:"请输入交易手续费（空）",onChange:function(e){a({hands_fee_for_sale:e},!1)},style:{display:"inline-block",width:200}}))),i.createElement(Z,Object.assign({label:"税金计算",className:"push-type-select"},X(3,6),{required:!0}),t("calculate_for_tax",{initialValue:o&&o.calculate_for_tax})(i.createElement(k.a,{getPopupContainer:function(){return document.getElementsByClassName("push-type-select")[0]},placeholder:"请选择税金计算",onChange:function(e,t){a({calculate_for_tax:e},!1)},onFocus:function(){return Object(r.a)(W(e),void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))}},C.map((function(e){return i.createElement(G,{key:e.field},e.translation)}))))),i.createElement(Z,null,i.createElement("h2",{className:"editor-form-title form-title"},"交易时间段")),!d.a.isEmpty(o.trading_times)&&i.createElement(i.Fragment,null,o.trading_times.map((function(e,t){return i.createElement(Z,Object.assign({key:e.day,label:e.day},X(3,16)),i.createElement(T.a,{style:{marginRight:10,width:180},placeholder:"请输入交易开始时间",value:e.trades&&e.trades[0],onChange:function(t){var n=c.trading_times?V()(c.trading_times):{};d.a.isEmpty(n)&&f.c.forEach((function(e){n[e]={trades:[]}})),n[e.day].trades[0]=t.valueOf(),a({trading_times:n},!1),a({trading_times:n},!1)}}),i.createElement(T.a,{value:e.trades&&e.trades[1],placeholder:"请输入交易结束时间",style:{marginRight:10,width:180},onChange:function(t){var n=c.trading_times?V()(c.trading_times):{};d.a.isEmpty(n)&&f.c.forEach((function(e){n[e]={trades:[]}})),n[e.day].trades[1]=t.valueOf(),a({trading_times:n},!1)}}))}))),i.createElement(Z,{className:"editor-form-btns"},i.createElement(s.a,{type:"primary",onClick:e.handleSubmit},"edit"==e.state.mode?"确认修改":"保存"),i.createElement(s.a,{onClick:e.goBack},"取消")))},e.goBack=function(){setTimeout((function(){e.props.history.goBack(),e.props.exchange.setCurrentProduct({}),d.a.rmLStorage("currentExchangeProduct")}),300)},e.handleSubmit=function(t){return Object(r.a)(W(e),void 0,void 0,regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.props.form.validateFields((function(e,n){return Object(r.a)(t,void 0,void 0,regeneratorRuntime.mark((function t(){var n,r,a,o,i=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=19;break}if(n=this.props.exchange.currentProduct,r=this.state.mode,a={name:n.name,type:n.type,product:n.product,decimals_place:n.decimals_place,contract_size:n.contract_size,spread:n.spread,limit_stop_level:n.limit_stop_level,margin_currency:n.margin_currency,profit_currency:n.profit_currency,max_trading_volume:n.max_trading_volume,min_trading_volume:n.min_trading_volume,volume_step:n.volume_step,min_unit_of_price_change:n.min_unit_of_price_change,transaction_mode:n.transaction_mode,purchase_fee:n.purchase_fee,selling_fee:n.selling_fee,description:n.description,background:n.background,orders_mode:n.orders_mode,hands_fee_for_bought:n.hands_fee_for_bought,hands_fee_for_sale:n.hands_fee_for_sale,three_days_swap:n.three_days_swap,trading_times:n.trading_times},o=this.getValidation(a),a.trading_times=JSON.stringify(a.trading_times),!o){t.next=8;break}return t.abrupt("return",this.$msg.warn(o));case 8:if("add"!=r){t.next=15;break}return t.next=11,this.$api.exchange.createProduct(a);case 11:201==t.sent.status&&(this.$msg.success("交易品种创建成功"),setTimeout((function(){i.goBack(),i.$store.exchange.getProductList({page:1,page_size:10})}),1500)),t.next=19;break;case 15:return t.next=17,this.$api.exchange.updateProduct(n.id,a);case 17:200==t.sent.status&&(this.$msg.success("交易品种更新成功"),setTimeout((function(){i.goBack(),i.$store.exchange.getProductList({page:1,page_size:10})}),1500));case 19:case"end":return t.stop()}}),t,this)})))}));case 1:case"end":return e.stop()}}),e,this)})))},e.getValidation=function(e){var t=new M.a;t.add(e.name,[{strategy:"isNonEmpty",errMsg:"请输入交易品种名字"}]),t.add(e.type,[{strategy:"isNonEmpty",errMsg:"请选择交易品种类型"}]),t.add(e.product,[{strategy:"isNonEmpty",errMsg:"请选择行情产品"}]),t.add(e.margin_currency,[{strategy:"isNonEmpty",errMsg:"请选择预售货币款"}]),t.add(e.profit_currency,[{strategy:"isNonEmpty",errMsg:"请选择获利货币"}]),t.add(e.transaction_mode,[{strategy:"isNonEmpty",errMsg:"请选择成交模式"}]);var n=t.start();if(e.trading_times)for(var r=0;r<f.c.length;r++){var a=f.c[r],o=e.trading_times[a];if(d.a.isEmpty(o.trades)){n="请输入 ".concat(a," 的交易时间段");break}if(o.trades[1]<o.trades[0]){n="".concat(a," 的交易结束时间不得小于开始时间");break}}else n="请设置交易时间段";return n},e}var n,a,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&K(e,t)}(t,e),n=t,(a=[{key:"componentDidMount",value:function(){return Object(r.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.init(),this.getGenreOptions(),this.getMarketOptions(),this.getTransactionModeOptions(),this.getBgColorOptions(),this.getProfitOptioins(),this.getMarginCurrencyOptions(),this.getOrderModeOptions(),this.getDifferentScopeOptions();case 9:case"end":return e.stop()}}),e,this)})))}},{key:"componentWillUnmount",value:function(){this.props.exchange.setCurrentProduct({},!0,!1)}},{key:"render",value:function(){return i.createElement("div",{className:"editor food-card-editor"},i.createElement("section",{className:"editor-content panel-block"},this.renderEditor()))}}])&&D(n.prototype,a),o&&D(n,o),t}(_.a),Y=Q=Object(r.b)([w.a.create(),Object($.b)("common","exchange"),$.c],Q),ee=n(94);n(1081);function te(e){return(te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ne(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function re(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ae(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function oe(e,t){return!t||"object"!==te(t)&&"function"!=typeof t?ce(e):t}function ie(e){return(ie=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ce(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function se(e,t){return(se=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var le=function(e){function t(){var e;return re(this,t),(e=oe(this,ie(t).apply(this,arguments))).state={filter:{},tableLoading:!1,currentPage:1,selectedRowKeys:[],name:void 0,product_code:void 0,type:void 0},e.onInputChanged=function(t,n){e.setState(ne({},t,n)),e.props.exchange.setFilterProduct(ne({},t,n||void 0))},e.getTypetOptions=function(){return Object(r.a)(ce(e),void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$api.exchange.getGenreList({params:{page:1,page_size:200}});case 2:200===(t=e.sent).status&&this.setState({typeOptions:t.data.results});case 4:case"end":return e.stop()}}),e,this)})))},e.onTypeSelected=function(t,n){e.setState({type:t},(function(){e.props.exchange.setFilterProduct({type:t})}))},e.getDataList=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setState({tableLoading:!0},(function(){return Object(r.a)(ce(e),void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.exchange.setFilterProduct(Object.assign({},t)),e.next=3,this.props.exchange.getProductList({params:this.props.exchange.filterProduct});case 3:this.setState({tableLoading:!1});case 4:case"end":return e.stop()}}),e,this)})))}))},e.resetPagination=function(t,n){return Object(r.a)(ce(e),void 0,void 0,regeneratorRuntime.mark((function e(){var a=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.props.exchange.setFilterProduct({page_size:t,current_page:n}),this.setState({current_page:n},(function(){return Object(r.a)(a,void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.props.exchange.filterProduct,this.getDataList(t);case 2:case"end":return e.stop()}}),e,this)})))}));case 2:case"end":return e.stop()}}),e,this)})))},e.onSearch=function(){return Object(r.a)(ce(e),void 0,void 0,regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.props.exchange.setFilterProduct({current_page:1}),this.setState({currentPage:1},(function(){t.getDataList(t.props.exchange.filterProduct)}));case 2:case"end":return e.stop()}}),e,this)})))},e.onReset=function(){return Object(r.a)(ce(e),void 0,void 0,regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t={current_page:1},this.props.exchange.setFilterProduct(t,!0),this.setState({currentPage:1,name:void 0,type:void 0,product_code:void 0},(function(){n.getDataList(n.props.exchange.filterProduct)}));case 3:case"end":return e.stop()}}),e,this)})))},e.goToEditor=function(t){var n="/dashboard/exchange/product/editor?id=".concat(d.a.isEmpty(t)?0:t.id);e.props.history.push(n)},e.renderMenu=function(e){return null},e.onBatch=function(t){return Object(r.a)(ce(e),void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))},e}var n,c,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&se(e,t)}(t,e),n=t,(c=[{key:"componentDidMount",value:function(){return Object(r.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.props.common.paginationConfig,n=t.defaultPageSize,r=t.defaultCurrent,this.resetPagination(n,r),this.getTypetOptions();case 3:case"end":return e.stop()}}),e,this)})))}},{key:"componentDidUpdate",value:function(){"/dashboard/exchange/product"===this.props.location.pathname&&this.props.history.replace("/dashboard/exchange/product/list")}},{key:"render",value:function(){var e=this,t=this.props.match;return i.createElement("div",null,i.createElement(a.a,Object.assign({},this.props,{links:[],title:"交易品种设置"})),i.createElement(ee.b,{path:"".concat(t.url,"/list"),render:function(t){return i.createElement(o.a,Object.assign({},t,{config:b(e)}))}}),i.createElement(ee.b,{path:"".concat(t.url,"/editor"),render:function(e){return i.createElement(Y,Object.assign({},e))}}))}}])&&ae(n.prototype,c),s&&ae(n,s),t}(_.a);le=Object(r.b)([Object(v.a)("/dashboard/exchange/product",{exact:!1}),Object($.b)("common","exchange"),$.c],le);t.default=le}}]);